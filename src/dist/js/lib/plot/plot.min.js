((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3@7.9.0/dist/d3.min.js")):"function"==typeof define&&define.amd?define(["exports","d3@7.9.0/dist/d3.min.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Plot=t.Plot||{},t.d3)})(this,function(t,G){function y(t){return null!=t&&!Number.isNaN(t)}function s(t,e){return+y(e)-+y(t)||G.ascending(t,e)}function u(t,e){return+y(e)-+y(t)||G.descending(t,e)}function k(t){return null!=t&&""!=""+t}function w(t){return isFinite(t)?t:NaN}function M(t){return 0<t&&isFinite(t)?t:NaN}function A(t){return t<0&&isFinite(t)?t:NaN}function l(t,e){return(""+t).padStart(e,"0")}let i=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function o(t,e){return i.test(t+="")?new Date(t):"function"==typeof e?e(t):e}function g(t){var e;if(null!=t)return e=t[0],G.descending(e,t[t.length-1])}let c=864e5,f=7*c,h=30*c,d=365*c,p=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",1e3],["5 seconds",5e3],["15 seconds",15e3],["30 seconds",3e4],["minute",6e4],["5 minutes",3e5],["15 minutes",9e5],["30 minutes",18e5],["hour",36e5],["3 hours",108e5],["6 hours",216e5],["12 hours",432e5],["day",c],["2 days",2*c],["week",f],["2 weeks",2*f],["month",h],["3 months",3*h],["6 months",6*h],["year",d],["2 years",2*d],["5 years",5*d],["10 years",10*d],["20 years",20*d],["50 years",50*d],["100 years",100*d]],m=new Map([["second",1e3],["minute",6e4],["hour",36e5],["day",c],["monday",f],["tuesday",f],["wednesday",f],["thursday",f],["friday",f],["saturday",f],["sunday",f],["week",f],["month",h],["year",d]]),v=new Map([["second",G.timeSecond],["minute",G.timeMinute],["hour",G.timeHour],["day",G.timeDay],["monday",G.timeMonday],["tuesday",G.timeTuesday],["wednesday",G.timeWednesday],["thursday",G.timeThursday],["friday",G.timeFriday],["saturday",G.timeSaturday],["sunday",G.timeSunday],["week",G.timeWeek],["month",G.timeMonth],["year",G.timeYear]]),$=new Map([["second",G.utcSecond],["minute",G.utcMinute],["hour",G.utcHour],["day",G.unixDay],["monday",G.utcMonday],["tuesday",G.utcTuesday],["wednesday",G.utcWednesday],["thursday",G.utcThursday],["friday",G.utcFriday],["saturday",G.utcSaturday],["sunday",G.utcSunday],["week",G.utcWeek],["month",G.utcMonth],["year",G.utcYear]]),z=Symbol("intervalDuration"),tt=Symbol("intervalType");for(let[t,e]of v)e[z]=m.get(t),e[tt]="time";for(let[t,e]of $)e[z]=m.get(t),e[tt]="utc";let et=[["year",G.utcYear,"utc"],["month",G.utcMonth,"utc"],["day",G.unixDay,"utc",6*h],["hour",G.utcHour,"utc",3*c],["minute",G.utcMinute,"utc",216e5],["second",G.utcSecond,"utc",18e5]],rt=[["year",G.timeYear,"time"],["month",G.timeMonth,"time"],["day",G.timeDay,"time",6*h],["hour",G.timeHour,"time",3*c],["minute",G.timeMinute,"time",216e5],["second",G.timeSecond,"time",18e5]],nt=[et[0],rt[0],et[1],rt[1],et[2],rt[2],...et.slice(3)];function at(t){let e=(""+t).toLowerCase(),r=(e.endsWith("s")&&(e=e.slice(0,-1)),1);var n=/^(?:(\d+)\s+)/.exec(e);switch(n&&(e=e.slice(n[0].length),r=+n[1]),e){case"quarter":e="month",r*=3;break;case"half":e="month",r*=6}n=$.get(e);if(!n)throw new Error("unknown interval: "+t);if(1<r&&!n.every)throw new Error("non-periodic interval: "+e);return[e,r]}function lt(t){return st(at(t),"time")}function ot(t){return st(at(t),"utc")}function st([t,e],r){let n=("time"===r?v:$).get(t);return 1<e&&((n=n.every(e))[z]=m.get(t)*e,n[tt]=r),n}function ut(t,r){if(1<r){let e=t[z];if(p.some(([,t])=>t===e))if(!(e%c==0&&c<e&&e<h))return[r]=p[G.bisector(([,t])=>Math.log(t)).center(p,Math.log(e*r))],("time"===t[tt]?lt:ot)(r)}}function ct(t,e,r){var n="time"===e?G.timeFormat:G.utcFormat;if(null==r)return n("year"===t?"%Y":"month"===t?"%Y-%m":"day"===t?"%Y-%m-%d":"hour"===t||"minute"===t?"%Y-%m-%dT%H:%M":"second"===t?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");var i="left"===r||"right"===r?(t,e)=>`
${t}
`+e:"top"===r?(t,e)=>e+`
`+t:(t,e)=>t+`
`+e;switch(t){case"millisecond":return ft(n(".%L"),n(":%M:%S"),i);case"second":return ft(n(":%S"),n("%-I:%M"),i);case"minute":return ft(n("%-I:%M"),n("%p"),i);case"hour":return ft(n("%-I %p"),n("%b %-d"),i);case"day":return ft(n("%-d"),n("%b"),i);case"month":return ft(n("%b"),n("%Y"),i);case"year":return n("%Y")}throw new Error("unable to format time ticks")}function ft(a,l,o){return(t,e,r)=>{var n=a(t,e),t=l(t,e),i=e-g(r);return e!==i&&void 0!==r[i]&&t===l(r[i],i)?n:o(n,t)}}let ht=Object.getPrototypeOf(Uint8Array),dt=Object.prototype.toString;function pt(t){return t instanceof Array||t instanceof ht}function mt(t){return t instanceof ht&&!((t=t)instanceof BigInt64Array||t instanceof BigUint64Array)}function yt(t){return t?.prototype instanceof ht&&t!==BigInt64Array&&t!==BigUint64Array}let vt=Symbol("reindex");function _(t,e,r){var n=typeof e;return"string"==n?ke(t)?wt(t.getChild(e),r):gt(t,Mt(e),r):"function"==n?gt(t,e,r):"number"==n||e instanceof Date||"boolean"==n?C(t,E(e),r):"function"==typeof e?.transform?xt(e.transform(t),r):(n=xt(e,r),e=t?.[vt],null!=n&&e?Ut(n,e):n)}function gt(t,r,e){return C(t,yt(e)?(t,e)=>Et(r(t,e)):r,e)}function xt(t,e){return void 0===e?Bt(t):Me(t)?wt(t,e):t instanceof e?t:e.from(t,yt(e)&&!mt(t)?Et:void 0)}function wt(t,e){return null==t?t:void 0!==e&&e!==Array||!(r=t.type)||8!==r.typeId&&10!==r.typeId||1!==r.unit?xt(bt(t),e):Rt(bt(t));var r}function bt(t){return t.nullCount?t.toJSON():t.toArray()}let kt=[null],Mt=r=>t=>{var e=t[r];return void 0===e&&"Feature"===t.type?t.properties?.[r]:e},b={transform:Ht},X={transform:t=>t},At=()=>1,Lt=()=>!0,I=t=>null==t?t:""+t,O=t=>null==t?t:+t,$t=t=>t?t[0]:void 0,St=t=>t?t[1]:void 0,zt=t=>t?t[2]:void 0,E=t=>()=>t;function Ot(t){let r=+(""+t).slice(1)/100;return(t,e)=>G.quantile(t,r,e)}function S(t){return mt(t)?t:C(t,Et,Float64Array)}function Et(t){return null==t?NaN:Number(t)}function Rt(t){return C(t,Ct)}function Ct(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?o(t):null==t||isNaN(t=Number(t))?void 0:new Date(t)}function H(t,e){return null===(t=void 0===t?e:t)?[void 0,"none"]:me(t)?[void 0,t]:[t,void 0]}function P(t,e){return null===(t=void 0===t?e:t)||"number"==typeof t?[void 0,t]:[t,void 0]}function Nt(t,e,r){if(null!=t)return R(t,e,r)}function R(t,e,r){var n=(""+t).toLowerCase();if(r.includes(n))return n;throw new Error(`invalid ${e}: `+t)}function Tt(t){return ke(t)?t:Bt(t)}function Bt(t){if(null==t||pt(t))return t;if(Me(t))return wt(t);if(It(t))switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;default:return[t]}return Array.from(t)}function It(t){switch(t?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return 1;default:return}}function C(t,e,r=Array){return null==t?t:t instanceof r?t.map(e):r.from(t,e)}function Pt(t,e=Array){return t instanceof e?t.slice():e.from(t)}function Wt({x:t,x1:e,x2:r}){return void 0!==t||void 0!==e||void 0!==r}function jt({y:t,y1:e,y2:r}){return void 0!==t||void 0!==e||void 0!==r}function Ft(t){return Wt(t)||jt(t)||void 0!==t.interval}function x(t){return t?.toString===dt}function qt(t){return x(t)&&(void 0!==t.type||void 0!==t.domain)}function Dt(t){return x(t)&&"function"!=typeof t.transform}function Yt(t){return Dt(t)&&void 0===t.value&&void 0===t.channel}function _t(t,e,r,n=X){return void 0===e&&void 0===r?r=void(e=0)===t?n:t:void 0===e?e=void 0===t?0:t:void 0===r&&(r=void 0===t?0:t),[e,r]}function a(t,e){return void 0===t&&void 0===e?[$t,St]:[t,e]}function Gt({z:t,fill:e,stroke:r}={}){return void 0===t&&([t]=H(e)),void 0===t&&([t]=H(r)),t}function Xt(t){return pt(t)?t.length:t?.numRows}function Ht(t){var e=Xt(t),r=new Uint32Array(e);for(let t=0;t<e;++t)r[t]=t;return r}function Ut(e,t){return pt(e)?C(t,t=>e[t],e.constructor):C(t,t=>e.at(t))}function Vt(r){return 1===r.length?(t,e)=>r(Ut(e,t)):r}function Zt(t,e,r){return t.subarray?t.subarray(e,r):t.slice(e,r)}function Jt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Qt(t,e){if(void 0===e[t])switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y"}return e[t]}function L(t){let e;return[{transform:()=>e,label:Kt(t)},t=>e=t]}function U(t){return null==t?[t]:L(t)}function Kt(t,e){return"string"==typeof t?t:t&&void 0!==t.label?t.label:e}function te(e,i){return{transform(t){let r=e.transform(t),n=i.transform(t);return q(r)||q(n)?C(r,(t,e)=>new Date((+r[e]+ +n[e])/2)):C(r,(t,e)=>(+r[e]+ +n[e])/2,Float64Array)},label:e.label}}function ee(t,e){e=re(e?.interval,e?.type);return e?C(t,e):t}function re(t,e){let r=ne(t,e);return r&&(t=>y(t)?r.floor(t):t)}function ne(t,e){if(null!=t){if("number"==typeof t)return ie(t);if("string"==typeof t)return("time"===e?lt:ot)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function ie(t){0<(t=+t)&&t<1&&Number.isInteger(1/t)&&(t=-1/t);let r=Math.abs(t);return t<0?{floor:t=>Math.floor(t*r)/r,offset:(t,e=1)=>(t*r+Math.floor(e))/r,range:(t,e)=>G.range(Math.ceil(t*r),e*r).map(t=>t/r)}:{floor:t=>Math.floor(t/r)*r,offset:(t,e=1)=>t+r*Math.floor(e),range:(t,e)=>G.range(Math.ceil(t/r),e/r).map(t=>t*r)}}function ae(t,e){if((t=ne(t,e))&&"function"!=typeof t.range)throw new Error("invalid interval: missing range method");return t}function le(t){return"function"==typeof t?.range}function oe(t){return void 0===t||Dt(t)?t:{value:t}}function se(t){return t&&"function"==typeof t[Symbol.iterator]}function ue(t){for(var e of t)if(null!=e)return"object"!=typeof e||e instanceof Date}function T(t){for(var e of t)if(null!=e){let t=typeof e;return"string"==t||"boolean"==t}}function q(t){for(var e of t)if(null!=e)return e instanceof Date}function ce(t){for(var e of t)if(null!=e)return"string"==typeof e&&isNaN(e)&&o(e)}function fe(t){for(var e of t)if(null!=e){if("string"!=typeof e)return!1;if(e.trim())return!isNaN(e)}}function he(t){for(var e of t)if(null!=e)return"number"==typeof e}function de(t,e){let r;for(var n of t)if(null!=n){if(!e(n))return;r=!0}return r}let pe=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function me(t){return"string"==typeof t&&(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||pe.has(t))}function ye(t){return"number"==typeof t&&(0<=t&&t<=1||isNaN(t))}function W(t){return null==t||ve(t)}function ve(t){return/^\s*none\s*$/i.test(t)}function ge(t,e){return Nt(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function xe(t="middle"){return ge(t,"frameAnchor")}function we(t){if(se(t)){var e=t;console.warn("named iterables are deprecated; please use an object instead");let n=new Set;return Object.fromEntries(Array.from(e,t=>{var e=t.name;if(null==e)throw new Error("missing name");var r=""+e;if("__proto__"==r)throw new Error("illegal name: "+r);if(n.has(r))throw new Error("duplicate name: "+r);return n.add(r),[e,t]}))}return t}function be(t){return!0===t?t="frame":!1===t?t=null:It(t)||null==t||"sphere"===(t=R(t,"clip",["frame","sphere"]))&&(t={type:"Sphere"}),t}function ke(t){return t&&"function"==typeof t.getChild&&"function"==typeof t.toArray&&t.schema&&Array.isArray(t.schema.fields)}function Me(t){return t&&"function"==typeof t.toArray&&t.type}let Ae=Symbol("position"),Le=Symbol("color"),$e=Symbol("radius"),Se=Symbol("length"),ze=Symbol("opacity"),Oe=Symbol("symbol"),Ee=Symbol("projection"),V=new Map([["x",Ae],["y",Ae],["fx",Ae],["fy",Ae],["r",$e],["color",Le],["opacity",ze],["symbol",Oe],["length",Se],["projection",Ee]]),Re=Math.sqrt(3),Ce=2/Re,Ne={draw(t,e){var e=Math.sqrt(e/Math.PI),r=e*Ce,n=r/2;t.moveTo(0,r),t.lineTo(e,n),t.lineTo(e,-n),t.lineTo(0,-r),t.lineTo(-e,-n),t.lineTo(-e,n),t.closePath()}},Te=new Map([["asterisk",G.symbolAsterisk],["circle",G.symbolCircle],["cross",G.symbolCross],["diamond",G.symbolDiamond],["diamond2",G.symbolDiamond2],["hexagon",Ne],["plus",G.symbolPlus],["square",G.symbolSquare],["square2",G.symbolSquare2],["star",G.symbolStar],["times",G.symbolTimes],["triangle",G.symbolTriangle],["triangle2",G.symbolTriangle2],["wye",G.symbolWye]]);function Be(t){return t&&"function"==typeof t.draw}function Ie(t){return!!Be(t)||"string"==typeof t&&Te.has(t.toLowerCase())}function Pe(t){if(null==t||Be(t))return t;var e=Te.get((""+t).toLowerCase());if(e)return e;throw new Error("invalid symbol: "+t)}function We({filter:t,sort:e,reverse:r,transform:n,initializer:i,...a}={},l){if(void 0===n&&(null!=t&&(n=De(t)),null==e||Yt(e)||(n=je(n,Ge(e))),r)&&(n=je(n,Ye)),null!=l&&null!=i)throw new Error("transforms cannot be applied after initializers");return{...a,...(null===e||Yt(e))&&{sort:e},transform:je(n,l)}}function Z({filter:t,sort:e,reverse:r,initializer:n,...i}={},a){return void 0===n&&(null!=t&&(n=De(t)),null==e||Yt(e)||(n=Fe(n,Ge(e))),r)&&(n=Fe(n,Ye)),{...i,...(null===e||Yt(e))&&{sort:e},initializer:Fe(n,a)}}function je(n,i){return null==n?null===i?void 0:i:null==i?null===n?void 0:n:function(t,e,r){return{data:t,facets:e}=n.call(this,t,e,r),i.call(this,Tt(t),e,r)}}function Fe(a,l){return null==a?null===l?void 0:l:null==l?null===a?void 0:a:function(t,e,r,...n){var i;return{data:t=t,facets:e=e,channels:i}=a.call(this,t,e,r,...n),{data:r=t,facets:n=e,channels:t}=l.call(this,t,e,{...r,...i},...n),{data:r,facets:n,channels:{...i,...t}}}}function qe(t,e){return(null!=t.initializer?Z:We)(t,e)}function De(n){return(t,e)=>{let r=_(t,n);return{data:t,facets:e.map(t=>t.filter(t=>r[t]))}}}function Ye(t,e){return{data:t,facets:e.map(t=>t.slice().reverse())}}function _e(t,{sort:e,...r}={}){return{...(Dt(t)&&void 0!==t.channel?Z:qe)(r,Ge(t)),sort:Yt(e)?e:null}}function Ge(t){return("function"==typeof t&&1!==t.length?function(n){return(r,t)=>{let e=pt(r)?(t,e)=>n(r[t],r[e]):(t,e)=>n(r.get(t),r.get(e));return{data:r,facets:t.map(t=>t.slice().sort(e))}}}:Xe)(t)}function Xe(a){let l,o;({channel:l,value:a,order:o}={...oe(a)});var t=l?.startsWith("-");if(t&&(l=l.slice(1)),"function"!=typeof(o=void 0===o?t?u:s:o))switch((""+o).toLowerCase()){case"ascending":o=s;break;case"descending":o=u;break;default:throw new Error("invalid order: "+o)}return(t,e,r)=>{let n;if(void 0===l)n=_(t,a);else{if(void 0===r)throw new Error("channel sort requires an initializer");if(!(n=r[l]))return{};n=n.value}let i=(t,e)=>o(n[t],n[e]);return{data:t,facets:e.map(t=>t.slice().sort(i))}}}function He(t,e){return Je(null,null,t,e)}function Ue(t={y:"count"},e={}){var{x:r=X}=e;if(null==r)throw new Error("missing channel: x");return Je(r,null,t,e)}function Ve(t={x:"count"},e={}){var{y:r=X}=e;if(null==r)throw new Error("missing channel: y");return Je(null,r,t,e)}function Ze(t={fill:"count"},e={}){var{x:r,y:n}=e;if([r,n]=a(r,n),null==r)throw new Error("missing channel: x");if(null==n)throw new Error("missing channel: y");return Je(r,n,t,e)}function Je(n,i,{data:w=pr,filter:b,sort:k,reverse:a,...M}={},t={}){M=ar(M,t),w=sr(w,X),k=null==k?void 0:lr("sort",k,t),b=null==b?void 0:or("filter",b,t);let[e,A]=U(n),[r,L]=U(i),{z:$,fill:l,stroke:o,x1:s,x2:u,y1:c,y2:f,...h}=t,[d,S]=U($),[z]=H(l),[O]=H(o),[p,E]=U(z),[m,R]=U(O);return{..."z"in t&&{z:d||$},..."fill"in t&&{fill:p||l},..."stroke"in t&&{stroke:m||o},...We(h,(l,t,e)=>{var o=ee(_(l,n),e?.x),s=ee(_(l,i),e?.y),u=_(l,$),c=_(l,z),f=_(l,O),h=cr(M,{z:u,fill:c,stroke:f}),r=[],d=[],p=o&&A([]),m=s&&L([]),y=u&&S([]),v=c&&E([]),g=f&&R([]);let x=0;for(let t of M)t.initialize(l);k&&k.initialize(l),b&&b.initialize(l);for(let e of t){let a=[];for(let t of M)t.scope("facet",e);k&&k.scope("facet",e),b&&b.scope("facet",e);for(let[i,t]of rr(e,h))for(let[n,e]of rr(t,s))for(let[t,r]of rr(e,o)){let e={data:l};if(o&&(e.x=t),s&&(e.y=n),h&&(e.z=i),!b||b.reduce(r,e)){a.push(x++),d.push(w.reduceIndex(r,l,e)),o&&p.push(t),s&&m.push(n),u&&y.push(h===u?i:u[r[0]]),c&&v.push(h===c?i:c[r[0]]),f&&g.push(h===f?i:f[r[0]]);for(let t of M)t.reduce(r,e);k&&k.reduce(r,e)}}r.push(a)}return fr(r,k,a),{data:d,facets:r}}),...!Qe(M,"x")&&(e?{x:e}:{x1:s,x2:u}),...!Qe(M,"y")&&(r?{y:r}:{y1:c,y2:f}),...Object.fromEntries(M.map(({name:t,output:e})=>[t,e]))}}function Qe(t,...e){for(var{name:r}of t)if(e.includes(r))return 1}function Ke(t,r,n=tr){var e=Object.entries(t);return null!=r.title&&void 0===t.title&&e.push(["title",yr]),null!=r.href&&void 0===t.href&&e.push(["href",mr]),e.filter(([,t])=>void 0!==t).map(([t,e])=>null===e?{name:t,initialize(){},scope(){},reduce(){}}:n(t,e,r))}function tr(t,e,r,n=er){let i,a=(x(e)&&"reduce"in e&&(i=e.scale,e=e.reduce),n(t,e,r)),[l,o]=L(a.label),s;return{name:t,output:void 0===i?l:{value:l,scale:i},initialize(t){a.initialize(t),s=o([])},scope(t,e){a.scope(t,e)},reduce(t,e){s.push(a.reduce(t,e))}}}function er(t,e,r,n=nr){let i=Qt(t,r),a=n(e,i),l,o;return{label:Kt(a===gr?null:i,a.label),initialize(t){l=void 0===i?t:_(t,i),"data"===a.scope&&(o=a.reduceIndex(Ht(t),l))},scope(t,e){a.scope===t&&(o=a.reduceIndex(e,l))},reduce:(t,e)=>null==a.scope?a.reduceIndex(t,l,e):a.reduceIndex(t,l,o,e)}}function rr(t,e){return e?G.group(t,t=>e[t]):[[,t]]}function nr(t,e,r=ir){if(null!=t){if("function"==typeof t.reduceIndex)return t;if("function"==typeof t.reduce&&x(t))return n=t,console.warn("deprecated reduce interface; implement reduceIndex instead."),{...n,reduceIndex:n.reduce.bind(n)};var n,i;if("function"==typeof t)return i=t,{reduceIndex:(t,e,r)=>i(Ut(e,t),r)};if(/^p\d{2}$/i.test(t))return hr(Ot(t));switch((""+t).toLowerCase()){case"first":return mr;case"last":return vr;case"identity":return pr;case"count":return gr;case"distinct":return xr;case"sum":return null==e?gr:wr;case"proportion":return br(e,"data");case"proportion-facet":return br(e,"facet");case"deviation":return hr(G.deviation);case"min":return hr(G.min);case"min-index":return hr(G.minIndex);case"max":return hr(G.max);case"max-index":return hr(G.maxIndex);case"mean":return dr(G.mean);case"median":return dr(G.median);case"variance":return hr(G.variance);case"mode":return hr(G.mode)}}return r(t)}function ir(t){throw new Error("invalid reduce: "+t)}function ar(t,e){return Ke(t,e,lr)}function lr(t,e,r){return tr(t,e,r,or)}function or(t,e,r){return er(t,e,r,sr)}function sr(t,e){return nr(t,e,ur)}function ur(t){switch((""+t).toLowerCase()){case"x":return kr;case"y":return Mr;case"z":return Ar}throw new Error("invalid group reduce: "+t)}function cr(t,r){for(let e in r){var n=r[e];if(void 0!==n&&!t.some(t=>t.name===e))return n}}function fr(t,n,e){if(n){let r=n.output.transform(),e=(t,e)=>s(r[t],r[e]);t.forEach(t=>t.sort(e))}e&&t.forEach(t=>t.reverse())}function hr(r){return{reduceIndex:(t,e)=>r(t,t=>e[t])}}function dr(r){return{reduceIndex(t,e){t=r(t,t=>e[t]);return q(e)?new Date(t):t}}}let pr={reduceIndex:(t,e)=>Ut(e,t)},mr={reduceIndex:(t,e)=>e[t[0]]},yr={reduceIndex(t,e){var r=G.sort(G.rollup(t,t=>t.length,t=>e[t]),St),n=r.slice(-5).reverse();if(n.length<r.length){let t=r.slice(0,-4);n[4]=[`… ${t.length.toLocaleString("en-US")} more`,G.sum(t,St)]}return n.map(([t,e])=>`${t} (${e.toLocaleString("en-US")})`).join("\n")}},vr={reduceIndex:(t,e)=>e[t[t.length-1]]},gr={label:"Frequency",reduceIndex:t=>t.length},xr={label:"Distinct",reduceIndex(e,r){var n=new G.InternSet;for(let t of e)n.add(r[t]);return n.size}},wr=hr(G.sum);function br(t,e){return null==t?{scope:e,label:"Frequency",reduceIndex:(t,e,r=1)=>t.length/r}:{scope:e,reduceIndex:(t,e,r=1)=>G.sum(t,t=>e[t])/r}}let kr={reduceIndex:(t,e,{x:r})=>r},Mr={reduceIndex:(t,e,{y:r})=>r},Ar={reduceIndex:(t,e,{z:r})=>r};function Lr(t,{scale:e,type:r,value:n,filter:i,hint:a,label:l=Kt(n)},o){return void 0===a&&"function"==typeof n?.transform&&(a=n.hint),zr(o,{scale:e,type:r,value:_(t,n),label:l,filter:i,hint:a})}function $r(t,r){return Object.fromEntries(Object.entries(t).map(([t,e])=>[t,Lr(r,e,t)]))}function Sr(t,n){var e=Object.fromEntries(Object.entries(t).map(([t,{scale:e,value:r}])=>{e=null==e?null:n[e];return[t,null==e?r:C(r,e)]}));return e.channels=t,e}function zr(t,e){var{scale:r,value:n}=e;if(!0===r||"auto"===r)switch(t){case"fill":case"stroke":case"color":e.scale=!0!==r&&de(n,me)?null:"color",e.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=!0!==r&&de(n,ye)?null:"opacity",e.defaultScale="opacity";break;case"symbol":!0!==r&&de(n,Ie)?(e.scale=null,e.value=C(n,Pe)):e.scale="symbol",e.defaultScale="symbol";break;default:e.scale=V.has(t)?t:null}else if(!1===r)e.scale=null;else if(null!=r&&!V.has(r))throw new Error("unknown scale: "+r);return e}function Or(t,e,r){let n=Er(t,e);return C(Er(t,r),(t,e)=>Math.abs(t-n[e]),Float64Array)}function Er(t,e,r){let n=t[e];if(n=n||void 0===r?n:t[r])return n.value;throw new Error("missing channel: "+e)}function Rr([t,e],[r,n]){return s(e,n)||s(t,r)}function Cr([t,e],[r,n]){return u(e,n)||s(t,r)}function Nr(t,e){let r=t[e];if(r){for(;r.source;)r=r.source;return null===r.source?null:r}}let Tr=new Map([["accent",G.schemeAccent],["category10",G.schemeCategory10],["dark2",G.schemeDark2],["observable10",G.schemeObservable10],["paired",G.schemePaired],["pastel1",G.schemePastel1],["pastel2",G.schemePastel2],["set1",G.schemeSet1],["set2",G.schemeSet2],["set3",G.schemeSet3],["tableau10",G.schemeTableau10]]),Br=new Map([...Tr,["brbg",Ir(G.schemeBrBG,G.interpolateBrBG)],["prgn",Ir(G.schemePRGn,G.interpolatePRGn)],["piyg",Ir(G.schemePiYG,G.interpolatePiYG)],["puor",Ir(G.schemePuOr,G.interpolatePuOr)],["rdbu",Ir(G.schemeRdBu,G.interpolateRdBu)],["rdgy",Ir(G.schemeRdGy,G.interpolateRdGy)],["rdylbu",Ir(G.schemeRdYlBu,G.interpolateRdYlBu)],["rdylgn",Ir(G.schemeRdYlGn,G.interpolateRdYlGn)],["spectral",Ir(G.schemeSpectral,G.interpolateSpectral)],["burd",Pr(G.schemeRdBu,G.interpolateRdBu)],["buylrd",Pr(G.schemeRdYlBu,G.interpolateRdYlBu)],["blues",e(G.schemeBlues,G.interpolateBlues)],["greens",e(G.schemeGreens,G.interpolateGreens)],["greys",e(G.schemeGreys,G.interpolateGreys)],["oranges",e(G.schemeOranges,G.interpolateOranges)],["purples",e(G.schemePurples,G.interpolatePurples)],["reds",e(G.schemeReds,G.interpolateReds)],["turbo",Wr(G.interpolateTurbo)],["viridis",Wr(G.interpolateViridis)],["magma",Wr(G.interpolateMagma)],["inferno",Wr(G.interpolateInferno)],["plasma",Wr(G.interpolatePlasma)],["cividis",Wr(G.interpolateCividis)],["cubehelix",Wr(G.interpolateCubehelixDefault)],["warm",Wr(G.interpolateWarm)],["cool",Wr(G.interpolateCool)],["bugn",e(G.schemeBuGn,G.interpolateBuGn)],["bupu",e(G.schemeBuPu,G.interpolateBuPu)],["gnbu",e(G.schemeGnBu,G.interpolateGnBu)],["orrd",e(G.schemeOrRd,G.interpolateOrRd)],["pubu",e(G.schemePuBu,G.interpolatePuBu)],["pubugn",e(G.schemePuBuGn,G.interpolatePuBuGn)],["purd",e(G.schemePuRd,G.interpolatePuRd)],["rdpu",e(G.schemeRdPu,G.interpolateRdPu)],["ylgn",e(G.schemeYlGn,G.interpolateYlGn)],["ylgnbu",e(G.schemeYlGnBu,G.interpolateYlGnBu)],["ylorbr",e(G.schemeYlOrBr,G.interpolateYlOrBr)],["ylorrd",e(G.schemeYlOrRd,G.interpolateYlOrRd)],["rainbow",jr(G.interpolateRainbow)],["sinebow",jr(G.interpolateSinebow)]]);function e(e,r){return({length:t})=>1===t?[e[3][1]]:2===t?[e[3][1],e[3][2]]:9<(t=Math.max(3,Math.floor(t)))?G.quantize(r,t):e[t]}function Ir(e,r){return({length:t})=>2===t?[e[3][0],e[3][2]]:11<(t=Math.max(3,Math.floor(t)))?G.quantize(r,t):e[t]}function Pr(e,r){return({length:t})=>2===t?[e[3][2],e[3][0]]:11<(t=Math.max(3,Math.floor(t)))?G.quantize(t=>r(1-t),t):e[t].slice().reverse()}function Wr(e){return({length:t})=>G.quantize(e,Math.max(2,Math.floor(t)))}function jr(e){return({length:t})=>G.quantize(e,Math.floor(t)+1).slice(0,-1)}function Fr(t){t=(""+t).toLowerCase();if(Br.has(t))return Br.get(t);throw new Error("unknown ordinal scheme: "+t)}function qr(t,e){t=Fr(t),t="function"==typeof t?t({length:e}):t;return t.length!==e?t.slice(0,e):t}let Dr=new Map([["brbg",G.interpolateBrBG],["prgn",G.interpolatePRGn],["piyg",G.interpolatePiYG],["puor",G.interpolatePuOr],["rdbu",G.interpolateRdBu],["rdgy",G.interpolateRdGy],["rdylbu",G.interpolateRdYlBu],["rdylgn",G.interpolateRdYlGn],["spectral",G.interpolateSpectral],["burd",t=>G.interpolateRdBu(1-t)],["buylrd",t=>G.interpolateRdYlBu(1-t)],["blues",G.interpolateBlues],["greens",G.interpolateGreens],["greys",G.interpolateGreys],["purples",G.interpolatePurples],["reds",G.interpolateReds],["oranges",G.interpolateOranges],["turbo",G.interpolateTurbo],["viridis",G.interpolateViridis],["magma",G.interpolateMagma],["inferno",G.interpolateInferno],["plasma",G.interpolatePlasma],["cividis",G.interpolateCividis],["cubehelix",G.interpolateCubehelixDefault],["warm",G.interpolateWarm],["cool",G.interpolateCool],["bugn",G.interpolateBuGn],["bupu",G.interpolateBuPu],["gnbu",G.interpolateGnBu],["orrd",G.interpolateOrRd],["pubugn",G.interpolatePuBuGn],["pubu",G.interpolatePuBu],["purd",G.interpolatePuRd],["rdpu",G.interpolateRdPu],["ylgnbu",G.interpolateYlGnBu],["ylgn",G.interpolateYlGn],["ylorbr",G.interpolateYlOrBr],["ylorrd",G.interpolateYlOrRd],["rainbow",G.interpolateRainbow],["sinebow",G.interpolateSinebow]]);function Yr(t){t=(""+t).toLowerCase();if(Dr.has(t))return Dr.get(t);throw new Error("unknown quantitative scheme: "+t)}let _r=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]),Gr=e=>t=>e(1-t),Xr=[0,1],Hr=new Map([["number",G.interpolateNumber],["rgb",G.interpolateRgb],["hsl",G.interpolateHsl],["hcl",G.interpolateHcl],["lab",G.interpolateLab]]);function Ur(t){t=(""+t).toLowerCase();if(Hr.has(t))return Hr.get(t);throw new Error("unknown interpolator: "+t)}function Vr(t,e,r,{type:n,nice:i,clamp:a,zero:l,domain:o=tn(t,r),unknown:s,round:u,scheme:c,interval:f,range:h=V.get(t)===$e?((t,e)=>{var r=t.find(({radius:t})=>void 0!==t);if(void 0!==r)return[0,r.radius];let n=G.quantile(t,.5,({value:t})=>void 0===t?NaN:G.quantile(t,.25,M)),i=e.map(t=>3*Math.sqrt(t/n)),a=30/G.max(i);return a<1?i.map(t=>t*a):i})(r,o):V.get(t)===Se?((t,e)=>{let r=G.median(t,({value:t})=>void 0===t?NaN:G.median(t,Math.abs)),n=e.map(t=>12*t/r),i=60/G.max(n);return i<1?n.map(t=>t*i):n})(r,o):V.get(t)===ze?Xr:void 0,interpolate:d=V.get(t)===Le?null==c&&void 0!==h?G.interpolateRgb:Yr(void 0!==c?c:"cyclical"===n?"rainbow":"turbo"):u?G.interpolateRound:G.interpolateNumber,reverse:p}){if(o=Zr(o),f=ae(f,n),"cyclical"!==n&&"sequential"!==n||(n="linear"),"function"!=typeof d&&(d=Ur(d)),p=!!p,void 0!==h&&o.length!==(h=Zr(h)).length){if(1===d.length)throw new Error("invalid piecewise interpolator");d=G.piecewise(d,h),h=void 0}if(1===d.length?(p&&(d=Gr(d),p=!1),void 0===h&&2===(h=Float64Array.from(o,(t,e)=>e/(o.length-1))).length&&(h=Xr),e.interpolate((h===Xr?E:rn)(d))):e.interpolate(d),l){let[t,e]=G.extent(o);(0<t||e<0)&&((g(o=Pt(o))||1)===Math.sign(t)?o[0]=0:o[o.length-1]=0)}return p&&(o=G.reverse(o)),e.domain(o).unknown(s),i&&(e.nice(((t,e)=>{if(!0!==t){if("number"==typeof t)return t;var r=void 0;if((r=ae(t,e))&&"function"!=typeof r.ceil)throw new Error("invalid interval: missing ceil method");return r}})(i,n)),o=e.domain()),void 0!==h&&e.range(h),a&&e.clamp(a),{type:n,domain:o,range:h,scale:e,interpolate:d,interval:f}}function Zr(t){return 2<=(t=Bt(t)).length?t:[t[0],t[0]]}function Jr(t,e,{exponent:r=1,...n}){return Vr(t,G.scalePow().exponent(r),e,{...n,type:"pow"})}function Qr(t,e,{domain:r=[0],unknown:n,scheme:i="rdylbu",interpolate:a,range:l=void 0!==a?G.quantize(a,r.length+1):V.get(t)===Le?qr(i,r.length+1):void 0,reverse:o}){var s=g(r=Bt(r));if(isNaN(s)||((n,i)=>{for(let t=1,e=n.length,r=n[0];t<e;++t){var a=G.descending(r,r=n[t]);if(0!==a&&a!==i)return}return 1})(r,s))return o&&(l=G.reverse(l)),{type:"threshold",scale:G.scaleThreshold(s<0?G.reverse(r):r,void 0===l?[]:l).unknown(n),domain:r,range:l};throw new Error(`the ${t} scale has a non-monotonic domain`)}function Kr(t,e=w){return t.length?[G.min(t,({value:t})=>void 0===t?t:G.min(t,e)),G.max(t,({value:t})=>void 0===t?t:G.max(t,e))]:[0,1]}function tn(t,e){t=V.get(t);return(t===$e||t===ze||t===Se?en:Kr)(e)}function en(t){return[0,t.length?G.max(t,({value:t})=>void 0===t?t:G.max(t,w)):1]}function rn(n){return(e,r)=>t=>n(e+t*(r-e))}let nn,an=0;function ln(t){t!==nn&&(nn=t,console.warn(t),++an)}function on(t,e,n,r,{type:i,nice:a,clamp:l,domain:o=Kr(r),unknown:s,pivot:u=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=V.get(t)===Le?null==c&&void 0!==f?G.interpolateRgb:Yr(void 0!==c?c:"rdbu"):G.interpolateNumber,reverse:p}){u=+u;let[m,y]=o=Bt(o);if(2<o.length&&ln(`Warning: the diverging ${t} scale domain contains extra elements.`),G.descending(m,y)<0&&([m,y]=[y,m],p=!p),m=Math.min(m,u),y=Math.max(y,u),"function"!=typeof d&&(d=Ur(d)),void 0!==f&&(d=1===d.length?rn(d)(...f):G.piecewise(d,f)),p&&(d=Gr(d)),h){let t=n.apply(u),e=t-n.apply(m),r=n.apply(y)-t;e<r?m=n.invert(t-r):e>r&&(y=n.invert(t+e))}return e.domain([m,u,y]).unknown(s).interpolator(d),l&&e.clamp(l),a&&e.nice(a),{type:i,domain:[m,y],pivot:u,interpolate:d,scale:e}}function sn(t,e,{exponent:r=1,...n}){return on(t,G.scaleDivergingPow().exponent(r=+r),.5===(i=r)?fn:{apply:t=>Math.sign(t)*Math.pow(Math.abs(t),i),invert:t=>Math.sign(t)*Math.pow(Math.abs(t),1/i)},e,{...n,type:"diverging-pow"});var i}let un={apply:t=>t,invert:t=>t},cn={apply:Math.log,invert:Math.exp},fn={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function hn(t,e,r,n){return Vr(t,e,r,n)}let dn=Symbol("ordinal");function pn(t,e,r,{type:n,interval:i,domain:a,range:l,reverse:o,hint:s}){return i=ae(i,n),void 0===a&&(a=vn(r,i,t)),"categorical"!==n&&n!==dn||(n="ordinal"),o&&(a=G.reverse(a)),a=e.domain(a).domain(),void 0!==l&&("function"==typeof l&&(l=l(a)),e.range(l)),{type:n,domain:a,range:l,scale:e,hint:s,interval:i}}function mn(t,e,{type:r,interval:n,domain:i,range:a,scheme:l,unknown:o,...s}){let u;if(n=ae(n,r),void 0===i&&(i=vn(e,n,t)),V.get(t)===Oe)u={fill:gn(n=e,"fill"),stroke:gn(n,"stroke")},a=void 0===a?W(u.fill)?G.symbolsStroke:G.symbolsFill:C(a,Pe);else if(V.get(t)===Le&&(void 0!==a||"ordinal"!==r&&r!==dn||void 0!==(a=((e,t="greys")=>{var r=new Set,[n,i]=qr(t,2);for(let t of e)if(null!=t)if(!0===t)r.add(i);else{if(!1!==t)return;r.add(n)}return[...r]})(i,l))&&(l=void 0),void 0!==(l=void 0===l&&void 0===a?"ordinal"===r?"turbo":"observable10":l)))if(void 0!==a){let e=Yr(l),r=a[0],n=a[1]-a[0];a=({length:t})=>G.quantize(t=>e(r+n*t),t)}else a=Fr(l);if(o===G.scaleImplicit)throw new Error(`implicit unknown on ${t} scale is not supported`);return pn(t,G.scaleOrdinal().unknown(o),e,{...s,type:r,domain:i,range:a,hint:u})}function yn(t,e,r,n){let i=r.round;return void 0!==i&&t.round(i=!!i),(t=pn(n,t,e,r)).round=i,t}function vn(r,n,t){var i=new G.InternSet;for(let{value:e,domain:t}of r){if(void 0!==t)return t();if(void 0!==e)for(let t of e)i.add(t)}if(void 0!==n){let[t,e]=G.extent(i).map(n.floor,n);return n.range(t,n.offset(e))}if(1e4<i.size&&V.get(t)===Ae)throw new Error(`implicit ordinal domain of ${t} scale has more than 10,000 values`);return G.sort(i,s)}function gn(t,e){let r;for(var{hint:n}of t){let t=n?.[e];if(void 0!==t)if(void 0===r)r=t;else if(r!==t)return}return r}function xn(t,{label:h,inset:e=0,insetTop:d=e,insetRight:p=e,insetBottom:m=e,insetLeft:y=e,round:r,nice:n,clamp:i,zero:a,align:l,padding:o,projection:v,facet:{label:g=h}={},...x}={}){var w={};for(let[c,f]of t){let s=x[c],u=On(c,f,{round:V.get(c)===Ae?r:void 0,nice:n,clamp:i,zero:a,align:l,padding:o,projection:v,...s});if(u){let{label:t="fx"===c||"fy"===c?g:h,percent:e,transform:r,inset:n,insetTop:i=void 0!==n?n:"y"===c?d:0,insetRight:a=void 0!==n?n:"x"===c?p:0,insetBottom:l=void 0!==n?n:"y"===c?m:0,insetLeft:o=void 0!==n?n:"x"===c?y:0}=s||{};if(null==r)r=void 0;else if("function"!=typeof r)throw new Error("invalid scale transform; not a function");u.percent=!!e,u.label=void 0===t?((e=[],t)=>{let r;for(let{label:t}of e)if(void 0!==t)if(void 0===r)r=t;else if(r!==t)return;if(void 0!==r)return!Tn(t)&&t.percent&&(r+=" (%)"),{inferred:!0,toString:()=>r}})(f,u):t,u.transform=r,"x"===c||"fx"===c?(u.insetLeft=+o,u.insetRight=+a):"y"!==c&&"fy"!==c||(u.insetTop=+i,u.insetBottom=+l),w[c]=u}}return w}function wn(t){var i,a,l={},o={scales:l};for([i,a]of Object.entries(t)){let{scale:t,type:e,interval:r,label:n}=a;l[i]=jn(a),(o[i]=t).type=e,null!=r&&(t.interval=r),null!=n&&(t.label=n)}return o}function bn(t){return Math.sign(g(t.domain()))*Math.sign(g(t.range()))}function kn(t){var{marginTop:t,marginRight:e,marginBottom:r,marginLeft:n,width:i,height:a,facet:{marginTop:l,marginRight:o,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(t,l),marginRight:Math.max(e,o),marginBottom:Math.max(r,s),marginLeft:Math.max(n,u),width:i,height:a}}function Mn({fx:t,fy:e},r){var{marginTop:r,marginRight:n,marginBottom:i,marginLeft:a,width:l,height:o}=kn(r);return{marginTop:r,marginRight:n,marginBottom:i,marginLeft:a,width:t?t.scale.bandwidth()+a+n:l,height:e?e.scale.bandwidth()+r+i:o,facet:{width:l,height:o}}}function An(t,e){var r,n,i,a;void 0===t.range&&({insetLeft:r,insetRight:n}=t,{width:e,marginLeft:a=0,marginRight:i=0}=e,t.range=[a=a+r,Math.max(a,e-i-n)],Tn(t)||(t.range=Sn(t)),t.scale.range(t.range)),$n(t)}function Ln(t,e){var r,n,i,a;void 0===t.range&&({insetTop:r,insetBottom:n}=t,{height:e,marginTop:a=0,marginBottom:i=0}=e,a=a+r,t.range=[Math.max(a,e-i-n),a],Tn(t)?t.range.reverse():t.range=Sn(t),t.scale.range(t.range)),$n(t)}function $n(t){var e;void 0===t.round&&(e=[t.type][0],"point"===e||"band"===e)&&(({scale:t})=>{var e=t.domain().length,[r,n]=t.range(),i=t.paddingInner?t.paddingInner():1,t=t.paddingOuter?t.paddingOuter():t.padding(),e=e-i;return((i=Math.abs(n-r)/Math.max(1,e+2*t))-Math.floor(i))*e})(t)<=30&&t.scale.round(!0)}function Sn(t){let r=t.scale.domain().length+Bn(t);if(!(2<r))return t.range;let[n,i]=t.range;return Array.from({length:r},(t,e)=>n+e/(r-1)*(i-n))}function zn(t,e,r){return On(t,void 0===r?void 0:[{hint:r}],{...e})}function On(e,r=[],t={}){var n,i,a,l,o,s,u,c,f,h,d,p,m,y,v=((t,r,{type:n,domain:e,range:i,scheme:a,pivot:l,projection:o})=>{if(n=Rn(n),"fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==o||(n=Cn);for(let e of r){let t=Rn(e.type);if(void 0!==t)if(void 0===n)n=t;else if(n!==t)throw new Error(`scale incompatible with channel: ${n} !== `+t)}if(n!==Cn){if(void 0!==n)return n;if(void 0!==e||r.some(({value:t})=>void 0!==t)){o=V.get(t);if(o===$e)return"sqrt";if(o!==ze&&o!==Se){if(o===Oe)return"ordinal";var t=(e??i)?.length;if(t<2||2<t)return Nn(o);if(void 0!==e){if(T(e))return Nn(o);if(q(e))return"utc"}else{let t=r.map(({value:t})=>t).filter(t=>void 0!==t);if(t.some(T))return Nn(o);if(t.some(q))return"utc"}if(o===Le){if(null!=l||null!=(i=a)&&_r.has((""+i).toLowerCase()))return"diverging";if(null!=(t=a)&&Tr.has((""+t).toLowerCase()))return"categorical"}}return"linear"}}})(e,r,t);if(void 0===t.type&&void 0===t.domain&&void 0===t.range&&null==t.interval&&"fx"!==e&&"fy"!==e&&Tn({type:v})){let t=r.map(({value:t})=>t).filter(t=>void 0!==t);t.some(q)?ln(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${En(v)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${En(v)}".`):t.some(ce)?ln(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${En(v)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${En(v)}".`):t.some(fe)&&ln(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${En(v)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${En(v)}".`)}switch(t.type=v){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":t=Pn(r,t,S);break;case"identity":switch(V.get(e)){case Ae:t=Pn(r,t,S);break;case Oe:t=Pn(r,t,Wn)}break;case"utc":case"time":t=Pn(r,t,Rt)}switch(v){case"diverging":return m=r,y=t,on(e,G.scaleDiverging(),un,m,y);case"diverging-sqrt":return sn(e,r,{...t,exponent:.5});case"diverging-pow":return sn(e,r,t);case"diverging-log":return((t,e,{base:r=10,pivot:n=1,domain:i=Kr(e,n<0?A:M),...a})=>on(t,G.scaleDivergingLog().base(+r),cn,e,{domain:i,pivot:n,...a}))(e,r,t);case"diverging-symlog":return[m,y,{constant:h=1,...d}]=[e,r,t],on(m,G.scaleDivergingSymlog().constant(h=+h),(p=h,{apply:t=>Math.sign(t)*Math.log1p(Math.abs(t/p)),invert:t=>Math.sign(t)*Math.expm1(Math.abs(t))*p}),y,d);case"categorical":case"ordinal":case dn:return mn(e,r,t);case"cyclical":case"sequential":case"linear":return h=r,d=t,Vr(e,G.scaleLinear(),h,d);case"sqrt":return Jr(e,r,{...t,exponent:.5});case"threshold":return Qr(e,0,t);case"quantile":return((t,e,{range:r,quantiles:n=void 0===r?5:(r=[...r]).length,n:i=n,scheme:a="rdylbu",domain:l=(t=>{var e,r=[];for({value:e}of t)if(void 0!==e)for(let t of e)r.push(t);return r})(e),unknown:o,interpolate:s,reverse:u})=>(void 0===r&&(r=void 0!==s?G.quantize(s,i):V.get(t)===Le?qr(a,i):void 0),Qr(t,0,{domain:l=0<l.length?G.scaleQuantile(l,void 0===r?{length:i}:r).quantiles():l,range:r,reverse:u,unknown:o})))(e,r,t);case"quantize":return((t,e,{range:r,n=void 0===r?5:(r=[...r]).length,scheme:i="rdylbu",domain:a=tn(t,e),unknown:l,interpolate:o,reverse:s})=>{var[u,c]=G.extent(a);let f;return void 0===r?((f=G.ticks(u,c,n))[0]<=u&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),n=f.length+1,r=void 0!==o?G.quantize(o,n):V.get(t)===Le?qr(i,n):void 0):(f=G.quantize(G.interpolateNumber(u,c),n+1).slice(1,-1),u instanceof Date&&(f=f.map(t=>new Date(t)))),g(Bt(a))<0&&f.reverse(),Qr(t,0,{domain:f,range:r,reverse:s,unknown:l})})(e,r,t);case"pow":return Jr(e,r,t);case"log":return((t,e,{base:r=10,domain:n=(t=>{for(var{value:e}of t)if(void 0!==e)for(var r of e){if(0<r)return Kr(t,M);if(r<0)return Kr(t,A)}return[1,10]})(e),...i})=>Vr(t,G.scaleLog().base(r),e,{...i,domain:n}))(e,r,t);case"symlog":return[s,u,{constant:c=1,...f}]=[e,r,t],Vr(s,G.scaleSymlog().constant(c),u,f);case"utc":return s=r,c=t,hn(e,G.scaleUtc(),s,c);case"time":return u=r,f=t,hn(e,G.scaleTime(),u,f);case"point":return[n,i,{align:a=.5,padding:l=.5,...o}]=[e,r,t],yn(G.scalePoint().align(a).padding(l),i,o,n);case"band":return((t,e,{align:r=.5,padding:n=.1,paddingInner:i=n,paddingOuter:a="fx"===t||"fy"===t?0:n,...l})=>yn(G.scaleBand().align(r).paddingInner(i).paddingOuter(a),e,l,t))(e,r,t);case"identity":return a=e,{type:"identity",scale:(a=V.get(a))===Ae||a===$e||a===Se||a===ze?G.scaleIdentity():t=>t};case void 0:return;default:throw new Error("unknown scale type: "+v)}}function En(t){return"symbol"==typeof t?t.description:t}function Rn(t){return"string"==typeof t?(""+t).toLowerCase():t}let Cn={toString:()=>"projection"};function Nn(t){switch(t){case Ae:return"point";case Le:return dn;default:return"ordinal"}}function Tn({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===dn}function Bn({type:t}){return"threshold"===t}function In(r){if(void 0!==r){var n=r.domain(),i=r(n[0]);for(let t=1,e=n.length;t<e;++t)if(r(n[t])-i)return}return 1}function Pn(e,{domain:r,...t},n){for(let t of e)void 0!==t.value&&(void 0===r&&(r=t.value?.domain),t.value=n(t.value));return{domain:void 0===r?r:n(r),...t}}function Wn(t){return C(t,Pe)}function jn({scale:e,type:t,domain:r,range:n,interpolate:i,interval:a,transform:l,percent:o,pivot:s}){var u;return"identity"===t?{type:"identity",apply:t=>t,invert:t=>t}:(u=e.unknown?e.unknown():void 0,{type:t,domain:Pt(r),...void 0!==n&&{range:Pt(n)},...void 0!==l&&{transform:l},...o&&{percent:o},...void 0!==u&&{unknown:u},...void 0!==a&&{interval:a},...void 0!==i&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...void 0!==s&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:t=>e(t),...e.invert&&{invert:t=>e.invert(t)}})}function Fn(t,{fx:e,fy:r}){let n=Ht(t),i=e?.value,a=r?.value;return e&&r?G.rollup(n,t=>(t.fx=i[t[0]],t.fy=a[t[0]],t),t=>i[t],t=>a[t]):e?G.rollup(n,t=>(t.fx=i[t[0]],t),t=>i[t]):G.rollup(n,t=>(t.fy=a[t[0]],t),t=>a[t])}function qn(n){let t=[],i=new Uint32Array(G.sum(n,t=>t.length));for(let r of n){let e=0;for(let t of n)r!==t&&(i.set(t,e),e+=t.length);t.push(i.slice(0,e))}return t}let Dn=new Map([["top",Hn],["right",Zn],["bottom",Un],["left",Vn],["top-left",Jn(Hn,Vn)],["top-right",Jn(Hn,Zn)],["bottom-left",Jn(Un,Vn)],["bottom-right",Jn(Un,Zn)],["top-empty",function(t,{y:e},{x:r,y:n,empty:i}){return!i&&(e&&0<(i=Gn(e,n))?Xn(t,r,e[i-1]):void 0)}],["right-empty",function(t,{x:e},{x:r,y:n,empty:i}){return!i&&(e&&(i=Gn(e,r))<e.length-1?Xn(t,e[i+1],n):void 0)}],["bottom-empty",function(t,{y:e},{x:r,y:n,empty:i}){return!i&&(e&&(i=Gn(e,n))<e.length-1?Xn(t,r,e[i+1]):void 0)}],["left-empty",function(t,{x:e},{x:r,y:n,empty:i}){return!i&&(e&&0<(i=Gn(e,r))?Xn(t,e[i-1],n):void 0)}],["empty",function(t,e,{empty:r}){return r}]]),Yn=new WeakMap;function _n(t){let e=Yn.get(t);return e||Yn.set(t,e=new G.InternMap(C(t,(t,e)=>[t,e]))),e}function Gn(t,e){return _n(t).get(e)}function Xn(t,e,r){return t=t,i=r,n=Jt(e),i=Jt(i),t.find(t=>Object.is(Jt(t.x),n)&&Object.is(Jt(t.y),i))?.empty;var n,i}function Hn(t,{y:e},{y:r}){return!e||0===Gn(e,r)}function Un(t,{y:e},{y:r}){return!e||Gn(e,r)===e.length-1}function Vn(t,{x:e},{x:r}){return!e||0===Gn(e,r)}function Zn(t,{x:e},{x:r}){return!e||Gn(e,r)===e.length-1}function Jn(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Qn(t,{channels:{fx:e,fy:r},groups:n}){return e&&r?t.map(({x:t,y:e})=>n.get(t)?.get(e)??[]):e?t.map(({x:t})=>n.get(t)??[]):t.map(({y:t})=>n.get(t)??[])}let Kn=Math.PI,ti=2*Kn,ei=.618;function ri({projection:u,inset:t=0,insetTop:r=t,insetRight:n=t,insetBottom:i=t,insetLeft:c=t}={},f){if(null!=u){if("function"==typeof u.stream)return u;let t,s,e="frame";if(x(u))if({type:u,domain:s,inset:h,insetTop:r=void 0!==h?h:r,insetRight:n=void 0!==h?h:n,insetBottom:i=void 0!==h?h:i,insetLeft:c=void 0!==h?h:c,clip:e=e,...t}=u,null==u)return;"function"!=typeof u&&(u=ni(u).type);var{width:h,height:f,marginLeft:d,marginRight:p,marginTop:m,marginBottom:y}=f,v=h-d-p-c-n,g=f-m-y-r-i;if(null!=(u=u?.({width:v,height:g,clip:e,...t}))){e=((t,e,r,n,i)=>{if(!1===t||null==t||"number"==typeof t)return t=>t;if("frame"===(""+(t=!0===t?"frame":t)).toLowerCase())return G.geoClipRectangle(e,r,n,i);throw new Error("unknown projection clip type: "+t)})(e,d,m,h-p,f-y);let a,l=d+c,o=m+r;if(null!=s){let[[t,e],[r,n]]=G.geoPath(u).bounds(s),i=Math.min(v/(r-t),g/(n-e));0<i?(l-=(i*(t+r)-v)/2,o-=(i*(e+n)-g)/2,a=G.geoTransform({point(t,e){this.stream.point(t*i+l,e*i+o)}})):ln("Warning: the projection could not be fit to the specified domain; using the default scale.")}return a??=0===l&&0===o?li():G.geoTransform({point(t,e){this.stream.point(t+l,e+o)}}),{stream:t=>u.stream(a.stream(e(t)))}}}}function ni(t){switch((""+t).toLowerCase()){case"albers-usa":return ii(G.geoAlbersUsa,.7463,.4673);case"albers":return ai(G.geoAlbers,.7463,.4673);case"azimuthal-equal-area":return ii(G.geoAzimuthalEqualArea,4,4);case"azimuthal-equidistant":return ii(G.geoAzimuthalEquidistant,ti,ti);case"conic-conformal":return ai(G.geoConicConformal,ti,ti);case"conic-equal-area":return ai(G.geoConicEqualArea,6.1702,2.9781);case"conic-equidistant":return ai(G.geoConicEquidistant,7.312,3.6282);case"equal-earth":return ii(G.geoEqualEarth,5.4133,2.6347);case"equirectangular":return ii(G.geoEquirectangular,ti,Kn);case"gnomonic":return ii(G.geoGnomonic,3.4641,3.4641);case"identity":return{type:li};case"reflect-y":return{type:oi};case"mercator":return ii(G.geoMercator,ti,ti);case"orthographic":return ii(G.geoOrthographic,2,2);case"stereographic":return ii(G.geoStereographic,2,2);case"transverse-mercator":return ii(G.geoTransverseMercator,ti,ti);default:throw new Error("unknown projection type: "+t)}}function ii(l,o,s){return{type:({width:t,height:e,rotate:r,precision:n=.15,clip:i})=>{var a=l();return null!=n&&a.precision?.(n),null!=r&&a.rotate?.(r),"number"==typeof i&&a.clipAngle?.(i),null!=t&&(a.scale(Math.min(t/o,e/s)),a.translate([t/2,e/2])),a},aspectRatio:s/o}}function ai(t,e,r){let{type:a,aspectRatio:n}=ii(t,e,r);return{type:t=>{var{parallels:e,domain:r,width:n,height:i}=t,t=a(t);return null!=e&&(t.parallels(e),void 0===r)&&null!=n&&t.fitSize([n,i],{type:"Sphere"}),t},aspectRatio:n}}let li=E({stream:t=>t}),oi=E(G.geoTransform({point(t,e){this.stream.point(t,-e)}}));function si(t,e,r,n){let i=r[t],a=r[e],l=i.length,o=r[t]=new Float64Array(l).fill(NaN),s=r[e]=new Float64Array(l).fill(NaN),u;var c=n.stream({point(t,e){o[u]=t,s[u]=e}});for(u=0;u<l;++u)c.point(i[u],a[u])}function ui(t,e,{projection:r}){var{x:t,y:n}=t;let i={};return t&&(i.x=t),n&&(i.y=n),i=Sr(i,e),r&&"x"===t?.scale&&"y"===n?.scale&&si("x","y",i,r),t&&(i.x=S(i.x)),n&&(i.y=S(i.y)),i}function ci(t={}){var{document:t="undefined"!=typeof window?window.document:void 0,clip:e}=t;return{document:t,clip:be(e)}}function F(t,{document:e}){return G.select(G.creator(t).call(e.documentElement))}let fi=Symbol("unset");function hi(t){return(1===t.length?di:pi)(t)}function di(e){let r,n=fi;return t=>(Object.is(n,t)||(n=t,r=e(t)),r)}function pi(t){let e,n;return(...r)=>(n?.length===r.length&&!n.some((t,e)=>!Object.is(t,r[e]))||(n=r,e=t(...r)),e)}let mi=hi(t=>new Intl.NumberFormat(t)),yi=hi((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}})),vi=hi((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function gi(t="en-US"){let e=mi(t);return t=>null==t||isNaN(t)?void 0:e.format(t)}function xi(t){return e="Invalid Date",(t=t)instanceof Date||(t=new Date(+t)),isNaN(t)?"function"==typeof e?e(t):e:(e=t.getUTCHours(),r=t.getUTCMinutes(),n=t.getUTCSeconds(),i=t.getUTCMilliseconds(),`${a=t.getUTCFullYear(),a<0?"-"+l(-a,6):9999<a?"+"+l(a,6):l(a,4)}-${l(t.getUTCMonth()+1,2)}-`+l(t.getUTCDate(),2)+(e||r||n||i?`T${l(e,2)}:${l(r,2)}${n||i?":"+l(n,2)+(i?"."+l(i,3):""):""}Z`:""));var e,r,n,i,a}let wi=(()=>{let e=gi("en-US");return t=>(t instanceof Date?xi:"number"==typeof t?e:I)(t)})(),J=("undefined"!=typeof window?1<window.devicePixelRatio:"undefined"==typeof it)?0:.5,bi=0,ki=0;function Mi(){return"plot-clip-"+ ++bi}function Ai(t,{title:e,href:r,ariaLabel:n,ariaDescription:i,ariaHidden:a,target:l,fill:o,fillOpacity:s,stroke:u,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:y,opacity:v,mixBlendMode:g,imageFilter:x,paintOrder:w,pointerEvents:b,shapeRendering:k,channels:M},{ariaLabel:A,fill:L="currentColor",fillOpacity:$,stroke:S="none",strokeOpacity:z,strokeWidth:O,strokeLinecap:E,strokeLinejoin:R,strokeMiterlimit:C,paintOrder:N}){null===L&&(s=o=null),null===S&&(f=u=null),W(L)?W(S)||W(o)&&!M?.fill||(S="none"):!W(S)||W(u)&&!M?.stroke||(L="none");var[M,o]=H(o,L),[s,$]=P(s,$),[u,T]=H(u,S),[f,z]=P(f,z),[v,B]=P(v),[O,E]=(ve(T)||(void 0===c&&(c=O),void 0===d&&(d=E),void 0===h&&(h=R),void 0!==p||/^\s*round\s*$/i.test(h)||(p=C),ve(o))||void 0!==w||(w=N),P(c));return null!==L&&(t.fill=j(o,"currentColor"),t.fillOpacity=Bi($,1)),null!==S&&(t.stroke=j(T,"none"),t.strokeWidth=Bi(E,1),t.strokeOpacity=Bi(z,1),t.strokeLinejoin=j(h,"miter"),t.strokeLinecap=j(d,"butt"),t.strokeMiterlimit=Bi(p,4),t.strokeDasharray=j(m,"none"),t.strokeDashoffset=j(y,"0")),t.target=I(l),t.ariaLabel=I(A),t.ariaDescription=I(i),t.ariaHidden=I(a),t.opacity=Bi(B,1),t.mixBlendMode=j(g,"normal"),t.imageFilter=j(x,"none"),t.paintOrder=j(w,"normal"),t.pointerEvents=j(b,"auto"),t.shapeRendering=j(k,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:r,optional:!0,filter:null},ariaLabel:{value:n,optional:!0,filter:null},fill:{value:M,scale:"auto",optional:!0},fillOpacity:{value:s,scale:"auto",optional:!0},stroke:{value:u,scale:"auto",optional:!0},strokeOpacity:{value:f,scale:"auto",optional:!0},strokeWidth:{value:O,optional:!0},opacity:{value:v,scale:"auto",optional:!0}}}function Li(t,e){e&&t.text(t=>wi(e[t]))}function $i(t,e){e&&t.text(([t])=>wi(e[t]))}function N(t,{target:e,tip:r},{ariaLabel:n,title:i,fill:a,fillOpacity:l,stroke:o,strokeOpacity:s,strokeWidth:u,opacity:c,href:f}){var h;n&&B(t,"aria-label",t=>n[t]),a&&B(t,"fill",t=>a[t]),l&&B(t,"fill-opacity",t=>l[t]),o&&B(t,"stroke",t=>o[t]),s&&B(t,"stroke-opacity",t=>s[t]),u&&B(t,"stroke-width",t=>u[t]),c&&B(t,"opacity",t=>c[t]),f&&Ti(t,t=>f[t],e),r||(h=i)&&t.filter(t=>k(h[t])).append("title").call(Li,h)}function Si(t,{target:e,tip:r},{ariaLabel:n,title:i,fill:a,fillOpacity:l,stroke:o,strokeOpacity:s,strokeWidth:u,opacity:c,href:f}){var h;n&&B(t,"aria-label",([t])=>n[t]),a&&B(t,"fill",([t])=>a[t]),l&&B(t,"fill-opacity",([t])=>l[t]),o&&B(t,"stroke",([t])=>o[t]),s&&B(t,"stroke-opacity",([t])=>s[t]),u&&B(t,"stroke-width",([t])=>u[t]),c&&B(t,"opacity",([t])=>c[t]),f&&Ti(t,([t])=>f[t],e),r||(h=i)&&t.filter(([t])=>k(h[t])).append("title").call($i,h)}function zi(t,e,r){var n=G.group(t,t=>e[t]);return void 0===r&&n.size>1+t.length>>1&&ln("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),n.values()}function*Oi(e,t,r,n){var i,a,l,o,s,u,c,f,h=r.z,d=n.z,p=([{ariaLabel:n,title:r,fill:i,fillOpacity:a,stroke:l,strokeOpacity:o,strokeWidth:s,opacity:u,href:c},f]=[n,r.tip],[n,f?void 0:r,i,a,l,o,s,u,c].filter(t=>void 0!==t)),m=[...t,...p];for(let t of d?zi(e,d,h):[e]){let r,n;t:for(let e of t){for(let t of m)if(!y(t[e])){n&&n.push(-1);continue t}if(void 0!==r){n.push(e);for(let t=0;t<p.length;++t)if(Jt(p[t][e])!==r[t]){yield n,r=p.map(t=>Jt(t[e])),n=[e];continue t}}else n&&(yield n),r=p.map(t=>Jt(t[e])),n=[e]}n&&(yield n)}}function Ei(t,e,r,n){let i;var{clip:a=n.clip}=e;"frame"===a?(t=F("svg:g",n).each(function(){this.appendChild(t.node()),t.node=()=>this}),i=Ri(n,r)):a&&(i=((t,e)=>{let r,n;var i;return(r=Ci.get(e))||Ci.set(e,r=new WeakMap),"Sphere"===t.type&&(t=Ni),(n=r.get(t))||(i=Mi(),G.select(e.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",e.path()(t)),r.set(t,n=`url(#${i})`)),n})(a,n)),B(t,"aria-label",e.ariaLabel),B(t,"aria-description",e.ariaDescription),B(t,"aria-hidden",e.ariaHidden),B(t,"clip-path",i)}let Ri=(i=>{let a=new WeakMap;return(t,e)=>{let r=a.get(t);var n;return r||(n=Mi(),G.select(t.ownerSVGElement).append("clipPath").attr("id",n).call(i,t,e),a.set(t,r=`url(#${n})`)),r}})((t,e,r)=>{var{width:r,height:n,marginLeft:i,marginRight:a,marginTop:l,marginBottom:o}=r;t.append("rect").attr("x",i).attr("y",l).attr("width",r-a-i).attr("height",n-l-o)}),Ci=new WeakMap,Ni={type:"Sphere"};function D(t,e,r,n){Ei(t,e,r,n),B(t,"class",e.className),B(t,"fill",e.fill),B(t,"fill-opacity",e.fillOpacity),B(t,"stroke",e.stroke),B(t,"stroke-width",e.strokeWidth),B(t,"stroke-opacity",e.strokeOpacity),B(t,"stroke-linejoin",e.strokeLinejoin),B(t,"stroke-linecap",e.strokeLinecap),B(t,"stroke-miterlimit",e.strokeMiterlimit),B(t,"stroke-dasharray",e.strokeDasharray),B(t,"stroke-dashoffset",e.strokeDashoffset),B(t,"shape-rendering",e.shapeRendering),B(t,"filter",e.imageFilter),B(t,"paint-order",e.paintOrder);var{pointerEvents:r=!1===n.pointerSticky?"none":void 0}=e;B(t,"pointer-events",r)}function Y(t,e){var r,n;r=t,null!=(n=e.mixBlendMode)&&r.style("mix-blend-mode",n),B(t,"opacity",e.opacity)}function Ti(t,r,n){t.each(function(t){var e=r(t);if(null!=e){let t=this.ownerDocument.createElementNS(G.namespaces.svg,"a");t.setAttribute("fill","inherit"),t.setAttributeNS(G.namespaces.xlink,"href",e),null!=n&&t.setAttribute("target",n),this.parentNode.insertBefore(t,this).appendChild(this)}})}function B(t,e,r){null!=r&&t.attr(e,r)}function Q(t,e,{x:r,y:n},i=J,a=J){i+=e.dx,a+=e.dy,r?.bandwidth&&(i+=r.bandwidth()/2),n?.bandwidth&&(a+=n.bandwidth()/2),(i||a)&&t.attr("transform",`translate(${i},${a})`)}function j(t,e){if((t=I(t))!==e)return t}function Bi(t,e){if((t=O(t))!==e)return t}let Ii=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Pi(t){if(void 0===t)return"plot-d6a7b5";if(t=""+t,Ii.test(t))return t;throw new Error("invalid class name: "+t)}function Wi(t,e){if("string"==typeof e)t.property("style",e);else if(null!=e)for(var r of t)Object.assign(r.style,e)}function ji({frameAnchor:t},{width:e,height:r,marginTop:n,marginRight:i,marginBottom:a,marginLeft:l}){return[/left$/.test(t)?l:/right$/.test(t)?e-i:(l+e-i)/2,/^top/.test(t)?n:/^bottom/.test(t)?r-a:(n+r-a)/2]}class r{constructor(e,r={},t={},n){var{facet:i="auto",facetAnchor:a,fx:l,fy:o,sort:s,dx:u=0,dy:c=0,margin:f=0,marginTop:h=f,marginRight:d=f,marginBottom:p=f,marginLeft:f=f,className:m,clip:y=n?.clip,channels:v,tip:g,render:x}=t;if(this.data=e,this.sort=Yt(s)?s:null,this.initializer=Z(t).initializer,this.transform=(this.initializer?t:We(t)).transform,null===i||!1===i?this.facet=null:(this.facet=R(!0===i?"include":i,"facet",["auto","include","exclude","super"]),this.fx=e===kt&&"string"==typeof l?[l]:l,this.fy=e===kt&&"string"==typeof o?[o]:o),this.facetAnchor=(t=>{if(null==t)return null;var e=Dn.get((""+t).toLowerCase());if(e)return e;throw new Error("invalid facet anchor: "+t)})(a),r=we(r),void 0!==v&&(r={...(s=v,Object.fromEntries(Object.entries(we(s)).map(([t,e])=>[t,e=void 0===(e="string"==typeof e?{value:e,label:t}:oe(e)).filter&&null==e.scale?{...e,filter:null}:e]))),...r}),void 0!==n&&(r={...Ai(this,t,n),...r}),this.channels=Object.fromEntries(Object.entries(r).map(([t,n])=>{if(Dt(n.value)){let{value:t,label:e=n.label,scale:r=n.scale}=n.value;n={...n,label:e,scale:r,value:t}}if(e===kt&&"string"==typeof n.value){let t=n.value;n={...n,value:[t]}}return[t,n]}).filter(([t,{value:e,optional:r}])=>{if(null!=e)return!0;if(r)return!1;throw new Error("missing channel value: "+t)})),this.dx=+u,this.dy=+c,this.marginTop=+h,this.marginRight=+d,this.marginBottom=+p,this.marginLeft=+f,this.clip=be(y),this.tip=!0===(i=g)?"xy":!1===i||null==i?null:"string"==typeof i?R(i,"tip",["x","y","xy"]):i,this.className=I(m),"super"===this.facet){if(l||o)throw new Error("super-faceting cannot use fx or fy");for(let e in this.channels){let t=r[e].scale;if("x"===t||"y"===t)throw new Error("super-faceting cannot use x or y")}}null!=x&&(this.render=Fi(x,this.render))}initialize(t,e,r){let n=Tt(this.data);var i=t=void 0===t&&null!=n?[Ht(n)]:t,r=(null!=this.transform&&({facets:t,data:n}=this.transform(n,t,r),n=Tt(n)),void 0!==t&&(t.original=i),$r(this.channels,n));if(null!=this.sort){var u=n,c=t,f=r,h=e,d=this.sort,p,{order:m,reverse:y,reduce:v=!0,limit:g}=d;for(p in d){if(!V.has(p))continue;let{value:t,order:n=m,reverse:i=y,reduce:a=v,limit:e=g}=oe(d[p]);var x=t?.startsWith("-");if(x&&(t=t.slice(1)),n=void 0===n?x!==("width"===t||"height"===t)?Cr:Rr:(t=>{if(null==t||"function"==typeof t)return t;switch((""+t).toLowerCase()){case"ascending":return Rr;case"descending":return Cr}throw new Error("invalid order: "+t)})(n),null==a||!1===a)continue;x="fx"===p||"fy"===p?((r,t)=>{let n=r.original;if(n!==r){var i=t.value,a=t.value=[];for(let e=0;e<n.length;++e){var l=i[n[e][0]];for(let t of r[e])a[t]=l}}return t})(c,h[p]):((t,e)=>{for(var r in t){r=t[r];if(r.scale===e)return r}})(f,p);if(!x)throw new Error("missing channel for scale: "+p);let l=x.value,[o=0,s=1/0]=se(e)?e:e<0?[e]:[0,e];if(null==t)x.domain=()=>{let t=Array.from(new G.InternSet(l));return i&&(t=t.reverse()),t=0===o&&s===1/0?t:t.slice(o,s)};else{let e="data"===t?u:"height"===t?Or(f,"y1","y2"):"width"===t?Or(f,"x1","x2"):Er(f,t,"y"===t?"y2":"x"===t?"x2":void 0),r=nr(!0===a?"max":a,e);x.domain=()=>{let t=G.rollups(Ht(l),t=>r.reduceIndex(t,e),t=>l[t]);return n&&t.sort(n),i&&t.reverse(),(t=0===o&&s===1/0?t:t.slice(o,s)).map($t)}}}}return{data:n,facets:t,channels:r}}filter(t,e,n){for(var i in e){let{filter:r=y}=e[i];if(null!==r){let e=n[i];t=t.filter(t=>r(e[t]))}}return t}project(t,e,r){for(var n in t){var i;"x"===t[n].scale&&/^x|x$/.test(n)&&(i=n.replace(/^x|x$/,"y"))in t&&"y"===t[i].scale&&si(n,i,e,r.projection)}}scale(t,e,r){e=Sr(t,e);return r.projection&&this.project(t,e,r),e}}function K(...t){return t.plot=r.prototype.plot,t}function Fi(l,o){if(null==l)return null===o?void 0:o;if(null==o)return null===l?void 0:l;if("function"!=typeof l)throw new TypeError("invalid render transform: "+l);if("function"!=typeof o)throw new TypeError("invalid render transform: "+o);return function(t,e,r,n,i,a){return l.call(this,t,e,r,n,i,(t,e,r,n,i)=>o.call(this,t,e,r,n,i,a))}}function qi(t,e){return!0===t?.tip?{...t,tip:e}:x(t?.tip)&&void 0===t.tip.pointer?{...t,tip:{...t.tip,pointer:e}}:t}function Di({x:n,y:i,fy:a,fx:l},{projection:t,aspectRatio:o},{width:s,marginTopDefault:u,marginRightDefault:c,marginBottomDefault:f,marginLeftDefault:h}){let r=a&&a.scale.domain().length||1,d=(r=>{if("function"==typeof r?.stream)return ei;if(x(r)){let t,e;var n,i,a,l;if({domain:t,type:r,...e}=r,null!=t&&null!=r)return n="string"==typeof r?ni(r).type:r,[[n,i],[a,l]]=G.geoPath(n({...e,width:100,height:100})).bounds(t),(l=(l-i)/(a-n))&&isFinite(l)?l<.2?.2:5<l?5:l:ei}if(null!=r){if("function"!=typeof r){let t=ni(r).aspectRatio;if(t)return t}return ei}})(t);if(d){let t=(1.1*r-.1)/(1.1*(l?l.scale.domain().length:1)-.1)*d,e=Math.max(.1,Math.min(10,t));return Math.round((s-h-c)*e+u+f)}t=i?Tn(i)?i.scale.domain().length||1:Math.max(7,17/r):1;if(null==o)return!(!i&&!a)*Math.max(1,Math.min(60,t*r))*20+30*!!l+60;{if(o=+o,!(isFinite(o)&&0<o))throw new Error("invalid aspectRatio: "+o);let t=Yi("y",i)/(Yi("x",n)*o),e=l?l.scale.bandwidth():1,r=a?a.scale.bandwidth():1;return(t*(e*(s-h-c)-n.insetLeft-n.insetRight)+i.insetTop+i.insetBottom)/r+u+f}}function Yi(t,r){if(!r)throw new Error(`aspectRatio requires ${t} scale`);var{type:e,domain:n}=r;let i;switch(e){case"linear":case"utc":case"time":i=Number;break;case"pow":{let e=r.scale.exponent();i=t=>Math.pow(t,e);break}case"log":i=Math.log;break;case"point":case"band":return n.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: `+e)}var[a,l]=G.extent(n);return Math.abs(i(l)-i(a))}let _i=new WeakMap;function Gi(R,C,{x:t,y:e,px:r,py:n,maxRadius:N=40,channels:i,render:a,...l}={}){return N=+N,null!=r&&(t??=null,i={...i,px:{value:r,scale:"x"}}),null!=n&&(e??=null,i={...i,py:{value:n,scale:"y"}}),{x:t,y:e,channels:i,...l,render:Fi(function(c,r,i,f,a,l){let t=(a={...a,pointerSticky:!1}).ownerSVGElement,o=a.getMarkState(this).data,h=_i.get(t),s=(h||_i.set(t,h={sticky:!1,roots:[],renders:[]}),h.renders.push(O)-1);var{x:e,y:n,fx:u,fy:d}=r;let p=u?u(c.fx)-f.marginLeft:0,m=d?d(c.fy)-f.marginTop:0,y=(e?.bandwidth&&(p+=e.bandwidth()/2),n?.bandwidth&&(m+=n.bandwidth()/2),null!=c.fi),v;if(y){let t=h.facetStates;t||(h.facetStates=t=new Map),(v=t.get(this))||t.set(this,v=new Map)}let[g,x]=ji(this,f),{px:w,py:b}=i,k=w?t=>w[t]:Vi(i,g),M=b?t=>b[t]:Zi(i,x),A,L,$,S;function z(r,n){if(y){if(S=S&&cancelAnimationFrame(S),null!=r)return v.set(c.fi,n),S=requestAnimationFrame(()=>{S=null;for(var[t,e]of v)if(e<n||e===n&&t<c.fi){r=null;break}O(r)});v.delete(c.fi)}O(r)}function O(e){if(A!==e||$!==h.sticky){A=e,$=a.pointerSticky=h.sticky;let t=null==A?[]:[A];y&&(t.fx=c.fx,t.fy=c.fy,t.fi=c.fi);var n=l(t,r,i,f,a);if(L){if(y){let t=L.parentNode,e=L.getAttribute("transform"),r=n.getAttribute("transform");e?n.setAttribute("transform",e):n.removeAttribute("transform"),r?t.setAttribute("transform",r):t.removeAttribute("transform"),n.removeAttribute("aria-label"),n.removeAttribute("aria-description"),n.removeAttribute("aria-hidden")}L.replaceWith(n)}if(h.roots[s]=L=n,!(null==A&&1<v?.size)){let t=null==A?null:pt(o)?o[A]:o.get(A);a.dispatchValue(t)}return n}}function E(t){if(!(h.sticky||"mouse"===t.pointerType&&1===t.buttons)){var[l,o]=G.pointer(t),s=(l-=p,o-=m,l<f.marginLeft||l>f.width-f.marginRight?1:R),u=o<f.marginTop||o>f.height-f.marginBottom?1:C;let i=null,a=N*N;for(let n of c){let t=s*(k(n)-l),e=u*(M(n)-o),r=t*t+e*e;r<=a&&(i=n,a=r)}if(null!=i&&(1!==R||1!==C)){let t=k(i)-l,e=M(i)-o;a=t*t+e*e}z(i,a)}}return t.addEventListener("pointerenter",E),t.addEventListener("pointermove",E),t.addEventListener("pointerdown",function(e){"mouse"!==e.pointerType||null==A||h.sticky&&h.roots.some(t=>t?.contains(e.target))||(h.sticky?(h.sticky=!1,h.renders.forEach(t=>t(null))):(h.sticky=!0,O(A)),e.stopImmediatePropagation())}),t.addEventListener("pointerleave",function(t){"mouse"!==t.pointerType||h.sticky||z(null)}),O(null)},a)}}function Xi(t){return Gi(1,1,t)}function Hi(t){return Gi(1,.01,t)}function Ui(t){return Gi(.01,1,t)}function Vi({x1:e,x2:r,x:n=e},t){return e&&r?t=>(e[t]+r[t])/2:n?t=>n[t]:()=>t}function Zi({y1:e,y2:r,y:n=e},t){return e&&r?t=>(e[t]+r[t])/2:n?t=>n[t]:()=>t}function Ji(t){return Tn(t)&&void 0===t.interval?void 0:"tabular-nums"}let Qi=Math.PI/180;function Ki(t,{marker:e,markerStart:r=e,markerMid:n=e,markerEnd:i=e}={}){t.markerStart=ta(r),t.markerMid=ta(n),t.markerEnd=ta(i)}function ta(t){if(null==t||!1===t)return null;if(!0===t)return na;if("function"==typeof t)return t;switch((""+t).toLowerCase()){case"none":return null;case"arrow":return ea("auto");case"arrow-reverse":return ea("auto-start-reverse");case"dot":return ra;case"circle":case"circle-fill":return na;case"circle-stroke":return ia;case"tick":return aa("auto");case"tick-x":return aa(90);case"tick-y":return aa(0)}throw new Error("invalid marker: "+t)}function ea(r){return(t,e)=>F("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",r).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(t=>t.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function ra(t,e){return F("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(t=>t.append("circle").attr("r",2.5)).node()}function na(t,e){return F("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(t=>t.append("circle").attr("r",3)).node()}function ia(t,e){return F("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(t=>t.append("circle").attr("r",3)).node()}function aa(r){return(t,e)=>F("svg:marker",e).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",r).attr("stroke",t).call(t=>t.append("path").attr("d","M0,-3v6")).node()}let la=0;function oa(t,e,{stroke:r},n){return fa(t,e,r&&(t=>r[t]),null,n)}function sa(t,e,{stroke:r,z:n},i){return fa(t,e,r&&(([t])=>r[t]),n,i)}let ua=1,ca=2;function fa(t,{markerStart:r,markerMid:n,markerEnd:i,stroke:e},o=()=>e,a,s){if(r||n||i){let l=new Map,e=a&&((t,n)=>{let i=new Uint8Array(n.length),a=t.data().filter(t=>1<t.length),e=a.length;for(let t=0,r=fi;t<e;++t){let e=a[t];if(1<e.length){let t=e[0];r!==(r=Jt(n[t]))&&(i[t]|=ua)}}for(let t=e-1,r=fi;0<=t;--t){let e=a[t];if(1<e.length){let t=e[0];r!==(r=Jt(n[t]))&&(i[t]|=ca)}}return([t])=>i[t]})(t,a);function u(t,a,e){return function(i){if(!e||e(i)){i=o(i);let r=l.get(a),n=(r||l.set(a,r=new Map),r.get(i));if(!n){let t=this.parentNode.insertBefore(a(i,s),this),e="plot-marker-"+ ++la;t.setAttribute("id",e),r.set(i,n=`url(#${e})`)}this.setAttribute(t,n)}}}r&&t.each(u("marker-start",r,e&&(t=>e(t)&ua))),n&&e&&t.each(u("marker-start",n,t=>!(e(t)&ua))),n&&t.each(u("marker-mid",n)),i&&t.each(u("marker-end",i,e&&(t=>e(t)&ca)))}}function ha({inset:t,insetLeft:e,insetRight:r,...n}={}){return[e,r]=pa(t,e,r),{inset:t,insetLeft:e,insetRight:r,...n}}function da({inset:t,insetTop:e,insetBottom:r,...n}={}){return[e,r]=pa(t,e,r),{inset:t,insetTop:e,insetBottom:r,...n}}function pa(t,e,r){return void 0===t&&void 0===e&&void 0===r?J?[1,0]:[.5,.5]:[e,r]}function ma(t,{interval:e}){return(t={...oe(t)}).interval=ne(void 0===t.interval?e:t.interval),t}function ya(r,t,n,i){let{[r]:e,[r+"1"]:a,[r+"2"]:l}=n,{value:o,interval:s}=ma(e,n);if(null==o||null==s&&!i)return n;var u=Kt(e);if(null==s){let e,t={transform:t=>e=e||_(t,o),label:u};return{...n,[r]:void 0,[r+"1"]:void 0===a?t:a,[r+"2"]:void 0!==l||a===l&&i?l:t}}let c,f;function h(t){return void 0!==f&&t===c?f:f=C(_(c=t,o),t=>s.floor(t))}return t({...n,[r]:void 0,[r+"1"]:void 0===a?{transform:h,label:u}:a,[r+"2"]:void 0===l?{transform:t=>h(t).map(t=>s.offset(t)),label:u}:l})}function va(t,e,r){let{[t]:n}=r,{value:i,interval:a}=ma(n,r);return null==i||null==a?r:e({...r,[t]:{label:Kt(n),transform:t=>{let e=C(_(t,i),t=>a.floor(t)),r=e.map(t=>a.offset(t));return e.map(q(e)?(t,e)=>null==t||isNaN(t=+t)||null==(e=r[e])||isNaN(e=+e)?void 0:new Date((t+e)/2):(t,e)=>null==t||null==(e=r[e])?NaN:(+t+ +e)/2)}}})}function ga(t={}){return ya("x",ha,t,!0)}function xa(t={}){return ya("y",da,t,!0)}function wa(t={}){return ya("x",ha,t)}function ba(t={}){return ya("y",da,t)}function ka(t={}){return va("x",ha,t)}function Ma(t={}){return va("y",da,t)}let Aa={ariaLabel:"rule",fill:null,stroke:"currentColor"};class La extends r{constructor(t,e={}){var{x:r,y1:n,y2:i,inset:a=0,insetTop:l=a,insetBottom:a=a}=e;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:n,scale:"y",optional:!0},y2:{value:i,scale:"y",optional:!0}},qi(e,"x"),Aa),this.insetTop=O(l),this.insetBottom=O(a),Ki(this,e)}render(e,t,r,n,i){let{x:a,y:l}=t,{x:o,y1:s,y2:u}=r,{width:c,height:f,marginTop:h,marginRight:d,marginLeft:p,marginBottom:m}=n,{insetTop:y,insetBottom:v}=this;return F("svg:g",i).call(D,this,n,i).call(Q,this,{x:o&&a},J,0).call(t=>t.selectAll().data(e).enter().append("line").call(Y,this).attr("x1",o?t=>o[t]:(p+c-d)/2).attr("x2",o?t=>o[t]:(p+c-d)/2).attr("y1",s&&!In(l)?t=>s[t]+y:h+y).attr("y2",u&&!In(l)?l.bandwidth?t=>u[t]+l.bandwidth()-v:t=>u[t]-v:f-m-v).call(N,this,r).call(oa,this,r,i)).node()}}class $a extends r{constructor(t,e={}){var{x1:r,x2:n,y:i,inset:a=0,insetRight:l=a,insetLeft:a=a}=e;super(t,{y:{value:i,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:n,scale:"x",optional:!0}},qi(e,"y"),Aa),this.insetRight=O(l),this.insetLeft=O(a),Ki(this,e)}render(e,t,r,n,i){let{x:a,y:l}=t,{y:o,x1:s,x2:u}=r,{width:c,height:f,marginTop:h,marginRight:d,marginLeft:p,marginBottom:m}=n,{insetLeft:y,insetRight:v}=this;return F("svg:g",i).call(D,this,n,i).call(Q,this,{y:o&&l},0,J).call(t=>t.selectAll().data(e).enter().append("line").call(Y,this).attr("x1",s&&!In(a)?t=>s[t]+y:p+y).attr("x2",u&&!In(a)?a.bandwidth?t=>u[t]+a.bandwidth()-v:t=>u[t]-v:c-d-v).attr("y1",o?t=>o[t]:(h+f-m)/2).attr("y2",o?t=>o[t]:(h+f-m)/2).call(N,this,r).call(oa,this,r,i)).node()}}function Sa(t,e){let{x:r=X,y:n,y1:i,y2:a,...l}=ba(e);return[i,a]=Oa(n,i,a),new La(t,{...l,x:r,y1:i,y2:a})}function za(t,e){let{y:r=X,x:n,x1:i,x2:a,...l}=wa(e);return[i,a]=Oa(n,i,a),new $a(t,{...l,y:r,x1:i,x2:a})}function Oa(t,e,r){if(null==t){if(void 0===e){if(void 0!==r)return[0,r]}else if(void 0===r)return[0,e]}else{if(void 0===e)return void 0===r?[0,t]:[t,r];if(void 0===r)return[t,e]}return[e,r]}function Ea(n,...i){let a=i.length;for(let t=0,e=!0;t<a;++t)"function"!=typeof i[t]&&(e&&(n=n.slice(),e=!1),n.splice(t,2,n[t]+i[t]+n[t+1]),i.splice(t,1),--t,--a);return e=>{let r=n[0];for(let t=0;t<a;++t)r+=i[t](e)+n[t+1];return r}}let Ra={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Ca="­";class Na extends r{constructor(t,e={}){var r,{x:n,y:i,text:a=se(t)&&ue(t)?X:b,frameAnchor:l,textAnchor:o=/right$/i.test(l)?"end":/left$/i.test(l)?"start":"middle",lineAnchor:s=/^top/i.test(l)?"top":/^bottom/i.test(l)?"bottom":"middle",lineHeight:u=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:y,fontWeight:v,rotate:g}=e,[g,x]=P(g,0),[p,w]=null==(p=p)||"number"==typeof p||"string"==typeof p&&(p=p.trim().toLowerCase(),Fa.has(p)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(p))?[void 0,p]:[p,void 0];if(super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:p,optional:!0},rotate:{value:null==(r=g)?null:{transform:t=>_(t,r,Float64Array),label:Kt(r)},optional:!0},text:{value:a,filter:k,optional:!0}},e,Ra),this.rotate=x,this.textAnchor=j(o,"middle"),this.lineAnchor=R(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+c,this.textOverflow=Ta(f),this.monospace=!!h,this.fontFamily=I(d),this.fontSize=w,this.fontStyle=I(m),this.fontVariant=I(y),this.fontWeight=I(v),this.frameAnchor=xe(l),!(0<=this.lineWidth))throw new Error("invalid lineWidth: "+c);this.splitLines=_a(this),this.clipLine=Ga(this)}render(e,t,r,n,i){let{x:a,y:l}=t,{x:o,y:s,rotate:u,text:c,title:f,fontSize:h}=r,d=this.rotate,[p,m]=ji(this,n);return F("svg:g",i).call(D,this,n,i).call(ja,this,c,n).call(Q,this,{x:o&&a,y:s&&l}).call(t=>t.selectAll().data(e).enter().append("text").call(Y,this).call(Ba,this,c,f).attr("transform",Ea`translate(${o?t=>o[t]:p},${s?t=>s[t]:m})${u?t=>` rotate(${u[t]})`:d?` rotate(${d})`:""}`).call(B,"font-size",h&&(t=>h[t])).call(N,this,r)).node()}}function Ta(t){return null==t?null:R(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Ba(t,e,u,c){if(u){let{lineAnchor:r,lineHeight:a,textOverflow:l,splitLines:o,clipLine:s}=e;t.each(function(e){let n=o(wi(u[e])??"").map(s),t=n.length,i="top"===r?.71:"bottom"===r?1-t:(164-100*t)/200;if(1<t){let r=0;for(let e=0;e<t;++e)if(++r,n[e]){let t=this.ownerDocument.createElementNS(G.namespaces.svg,"tspan");t.setAttribute("x",0),e===r-1?t.setAttribute("y",(i+e)*a+"em"):t.setAttribute("dy",r*a+"em"),t.textContent=n[e],this.appendChild(t),r=0}}else i&&this.setAttribute("y",i*a+"em"),this.textContent=n[0];if(l&&!c&&n[0]!==u[e]){let t=this.ownerDocument.createElementNS(G.namespaces.svg,"title");t.textContent=u[e],this.appendChild(t)}})}}function Ia(t,{x:e,y:r,...n}={}){return void 0===n.frameAnchor&&([e,r]=a(e,r)),new Na(t,{...n,x:e,y:r})}function Pa(t,{x:e=X,...r}={}){return new Na(t,Ma({...r,x:e}))}function Wa(t,{y:e=X,...r}={}){return new Na(t,ka({...r,y:e}))}function ja(t,e,r){B(t,"text-anchor",e.textAnchor),B(t,"font-family",e.fontFamily),B(t,"font-size",e.fontSize),B(t,"font-style",e.fontStyle),B(t,"font-variant",void 0===e.fontVariant?(r=r)&&(he(r)||q(r))?"tabular-nums":void 0:e.fontVariant),B(t,"font-weight",e.fontWeight)}let Fa=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);let qa={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Da(e,r=0,n=e.length){let i=0;for(let t=r;t<n;t=Qa(e,t))i+=qa[e[t]]??(tl(e,t)?120:qa.e);return i}function Ya(e,r=0,n=e.length){let i=0;for(let t=r;t<n;t=Qa(e,t))i+=tl(e,t)?126:63;return i}function _a({monospace:t,lineWidth:e,textOverflow:r}){if(null!=r||e==1/0)return t=>t.split(/\r\n?|\n/g);let c=t?Ya:Da,f=100*e;return r=>{{var n=r,i=f,a=c,l,o,s,u=[];let t,e=0;for([l,o,s]of function*(e){let r=0,n=0;for(var t=e.length;n<t;){let t=1;switch(e[n]){case Ca:case"-":++n,yield[r,n,!1],r=n;break;case" ":for(yield[r,n,!1];" "===e[++n];);r=n;break;case"\r":"\n"===e[n+1]&&++t;case"\n":yield[r,n,!0],n+=t,r=n;break;default:++n}}yield[r,n,!0]}(n))void 0===t&&(t=l),e>t&&a(n,t,o)>i&&(u.push(n.slice(t,e)+(n[e-1]===Ca?"-":"")),t=l),s?(u.push(n.slice(t,o)),t=void 0):e=o;return u}}}function Ga({monospace:t,lineWidth:e,textOverflow:r}){if(null==r||e==1/0)return t=>t;let s=t?Ya:Da,u=100*e;switch(r){case"clip-start":return t=>Va(t,u,s,"");case"clip-end":return t=>Ua(t,u,s,"");case"ellipsis-start":return t=>Va(t,u,s,Xa);case"ellipsis-middle":return t=>{return t=t,e=u,r=s,n=Xa,(o=r(t=t.trim()))<=e?t:(i=r(n)/2,[a,l]=Ha(t,e/2,r,i),[o]=Ha(t,o-e/2-l+i,r,-i),o<0?n:t.slice(0,a).trimEnd()+n+t.slice(Qa(t,o)).trimStart());var e,r,n,i,a,l,o};case"ellipsis-end":return t=>Ua(t,u,s,Xa)}}let Xa="…";function Ha(n,i,a,l){var o=[];let s=0;for(let t=0,e=0,r=n.length;t<r;t=e){e=Qa(n,t);var u=a(n,t,e);if(s+u>i){for(s+=l;s>i&&0<t;)e=t,t=o.pop(),s-=a(n,t,e);return[t,i-s]}s+=u,o.push(t)}return[-1,0]}function Ua(t,e,r,n){t=t.trim();var i=r(n),[e]=Ha(t,e,r,i);return e<0?t:t.slice(0,e).trimEnd()+n}function Va(t,e,r,n){var i=r(t=t.trim());return i<=e?t:([e]=Ha(t,i-e+(i=r(n)),r,-i),e<0?n:n+t.slice(Qa(t,e)).trimStart())}let Za=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Ja=/\p{Extended_Pictographic}/uy;function Qa(t,e){return e+=((e,r)=>{let t=e.charCodeAt(r);if(55296<=t&&t<56320){let t=e.charCodeAt(r+1);return 56320<=t&&t<57344}})(t,e)?2:1,!Ka(r=t,n=e)&&(Za.lastIndex=n,Za.test(r))&&(e=Za.lastIndex),n=e,8205===t.charCodeAt(n)?Qa(t,e+1):e;var r,n}function Ka(t,e){return t.charCodeAt(e)<128}function tl(t,e){return!Ka(t,e)&&(Ja.lastIndex=e,Ja.test(t))}let el={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},rl={draw(t,e,r){r=e*r/17.5;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},nl={draw(t,e,r){t.moveTo(-r,0),t.lineTo(0,-e),t.lineTo(r,0)}},il=new Map([["arrow",rl],["spike",nl]]);class al extends r{constructor(t,e={}){var{x:r,y:n,r:i=3.5,length:a,rotate:l,shape:o=rl,anchor:s="middle",frameAnchor:u}=e,[a,c]=P(a,12),[l,f]=P(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},length:{value:a,scale:"length",optional:!0},rotate:{value:l,optional:!0}},e,el),this.r=+i,this.length=c,this.rotate=f,this.shape=(t=>{if(t&&"function"==typeof t.draw)return t;var e=il.get((""+t).toLowerCase());if(e)return e;throw new Error("invalid shape: "+t)})(o),this.anchor=R(s,"anchor",["start","middle","end"]),this.frameAnchor=xe(u)}render(e,t,r,n,i){let{x:a,y:l}=t,{x:o,y:s,length:u,rotate:c}=r,{length:f,rotate:h,anchor:d,shape:p,r:m}=this,[y,v]=ji(this,n);return F("svg:g",i).call(D,this,n,i).call(Q,this,{x:o&&a,y:s&&l}).call(t=>t.selectAll().data(e).enter().append("path").call(Y,this).attr("transform",Ea`translate(${o?t=>o[t]:y},${s?t=>s[t]:v})${c?t=>` rotate(${c[t]})`:h?` rotate(${h})`:""}${"start"===d?"":"end"===d?u?t=>` translate(0,${u[t]})`:` translate(0,${f})`:u?t=>` translate(0,${u[t]/2})`:` translate(0,${f/2})`}`).attr("d",u?t=>{var e=G.pathRound();return p.draw(e,u[t],m),e}:(t=G.pathRound(),p.draw(t,f,m),t)).call(N,this,r)).node()}}function ll(t,e={}){let{x:r,y:n,...i}=e;return void 0===e.frameAnchor&&([r,n]=a(r,n)),new al(t,{...i,x:r,y:n})}function ol(t,e={}){let{x:r=X,...n}=e;return new al(t,{...n,x:r})}function sl(t,e={}){let{y:r=X,...n}=e;return new al(t,{...n,y:r})}function ul(t,e){return arguments.length<2&&!se(t)&&(e=t,t=null),[t,e=void 0===e?{}:e]}function cl({anchor:t}={},e){return void 0===t?e[0]:R(t,"anchor",e)}function fl(t){return cl(t,["left","right"])}function hl(t){return cl(t,["right","left"])}function dl(t){return cl(t,["bottom","top"])}function pl(t){return cl(t,["top","bottom"])}function ml(){var[t,e]=ul(...arguments);return xl("y",fl(e),t,e)}function yl(){var[t,e]=ul(...arguments);return xl("fy",hl(e),t,e)}function vl(){var[t,e]=ul(...arguments);return wl("x",dl(e),t,e)}function gl(){var[t,e]=ul(...arguments);return wl("fx",pl(e),t,e)}function xl(u,c,t,{color:e="currentColor",opacity:r=1,stroke:n=e,strokeOpacity:i=r,strokeWidth:a=1,fill:l=e,fillOpacity:o=r,textAnchor:s,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p="y"===u?6:0,tickPadding:m,tickRotate:y,x:v,margin:g,marginTop:x=void 0===g?20:g,marginRight:w=void 0===g?"right"===c?40:0:g,marginBottom:b=void 0===g?20:g,marginLeft:k=void 0===g?"left"===c?40:0:g,label:M,labelAnchor:A,labelArrow:L,labelOffset:$,ariaLabel:S=u+"-axis",...z}){return p=O(p),m=O(m),y=O(y),void 0!==A&&(A=R(A,"labelAnchor",["center","top","bottom"])),L=jl(L),K(p&&!W(n)?((t,e,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:l=e+("y"===t?"-empty":""),frameAnchor:o=e,tickSize:s,inset:u=0,insetLeft:c=u,insetRight:f=u,dx:h=0,y:d="y"===t?void 0:null,ariaLabel:p,...m})=>Ol(sl,t,r,{ariaLabel:p+" tick",ariaHidden:!0},{strokeWidth:n,strokeLinecap:i,strokeLinejoin:a,facetAnchor:l,frameAnchor:o,y:d,...m,dx:"left"===e?+h-J+ +c:+h+J-f,anchor:"start",length:s,shape:"left"===e?Bl:Il}))(u,c,t,{stroke:n,strokeOpacity:i,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,x:v,ariaLabel:S,...z}):null,W(l)?null:((t,a,e,{facetAnchor:r=a+("y"===t?"-empty":""),frameAnchor:n=a,tickSize:i,tickRotate:l=0,tickPadding:o=Math.max(3,9-i)+(60<Math.abs(l)?4*Math.cos(l*Qi):0),text:s,textAnchor:u=60<Math.abs(l)?"middle":"left"===a?"end":"start",lineAnchor:c=60<l?"top":l<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:p=h,dx:m=0,ariaLabel:y,y:v="y"===t?void 0:null,...g})=>Ol(Wa,t,e,{ariaLabel:y+" tick label"},{facetAnchor:r,frameAnchor:n,text:s,textAnchor:u,lineAnchor:c,fontVariant:f,rotate:l,y:v,...g,dx:"left"===a?+m-i-o+ +d:+m+ +i+ +o-p},function(t,e,r,n,i){void 0===f&&(this.fontVariant=Pl(t)),void 0===s&&(i.text=El(t,e,r,n,a))}))(u,c,t,{fill:l,fillOpacity:o,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:s,tickSize:p,tickPadding:m,tickRotate:y,x:v,marginTop:x,marginRight:w,marginBottom:b,marginLeft:k,ariaLabel:S,...z}),W(l)||null===M?null:Ia([],zl({fill:l,fillOpacity:o,...z},function(t,e,r,n,i){var n=n[u],{marginTop:i,marginRight:a,marginBottom:l,marginLeft:o}="y"===u&&i.inset||i,s=A??(n.bandwidth?"center":"top"),a=$??("right"===c?a:o)-3;return"center"===s?(this.textAnchor=void 0,this.lineAnchor="right"===c?"bottom":"top",this.frameAnchor=c,this.rotate=-90):(this.textAnchor="right"===c?"end":"start",this.lineAnchor=s,this.frameAnchor=s+"-"+c,this.rotate=0),this.dy="top"===s?3-i:"bottom"===s?l-3:0,this.dx="right"===c?a:-a,this.ariaLabel=S+" label",{facets:[[0]],channels:{text:{value:[Wl(u,n,{anchor:c,label:M,labelAnchor:s,labelArrow:L})]}}}})))}function wl(u,c,t,{color:e="currentColor",opacity:r=1,stroke:n=e,strokeOpacity:i=r,strokeWidth:a=1,fill:l=e,fillOpacity:o=r,textAnchor:s,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p="x"===u?6:0,tickPadding:m,tickRotate:y,y:v,margin:g,marginTop:x=void 0===g?"top"===c?30:0:g,marginRight:w=void 0===g?20:g,marginBottom:b=void 0===g?"bottom"===c?30:0:g,marginLeft:k=void 0===g?20:g,label:M,labelAnchor:A,labelArrow:L,labelOffset:$,ariaLabel:S=u+"-axis",...z}){return p=O(p),m=O(m),y=O(y),void 0!==A&&(A=R(A,"labelAnchor",["center","left","right"])),L=jl(L),K(p&&!W(n)?((t,e,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:l=e+("x"===t?"-empty":""),frameAnchor:o=e,tickSize:s,inset:u=0,insetTop:c=u,insetBottom:f=u,dy:h=0,x:d="x"===t?void 0:null,ariaLabel:p,...m})=>Ol(ol,t,r,{ariaLabel:p+" tick",ariaHidden:!0},{strokeWidth:n,strokeLinejoin:a,strokeLinecap:i,facetAnchor:l,frameAnchor:o,x:d,...m,dy:"bottom"===e?+h-J-f:+h+J+ +c,anchor:"start",length:s,shape:"bottom"===e?Nl:Tl}))(u,c,t,{stroke:n,strokeOpacity:i,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:y,y:v,ariaLabel:S,...z}):null,W(l)?null:((t,a,e,{facetAnchor:r=a+("x"===t?"-empty":""),frameAnchor:n=a,tickSize:i,tickRotate:l=0,tickPadding:o=Math.max(3,9-i)+(10<=Math.abs(l)?4*Math.cos(l*Qi):0),text:s,textAnchor:u=10<=Math.abs(l)?l<0^"bottom"===a?"start":"end":"middle",lineAnchor:c=10<=Math.abs(l)?"middle":"bottom"===a?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:p=h,dy:m=0,x:y="x"===t?void 0:null,ariaLabel:v,...g})=>Ol(Pa,t,e,{ariaLabel:v+" tick label"},{facetAnchor:r,frameAnchor:n,text:void 0===s?null:s,textAnchor:u,lineAnchor:c,fontVariant:f,rotate:l,x:y,...g,dy:"bottom"===a?+m+ +i+ +o-p:+m-i-o+ +d},function(t,e,r,n,i){void 0===f&&(this.fontVariant=Pl(t)),void 0===s&&(i.text=El(t,e,r,n,a))}))(u,c,t,{fill:l,fillOpacity:o,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:s,tickSize:p,tickPadding:m,tickRotate:y,y:v,marginTop:x,marginRight:w,marginBottom:b,marginLeft:k,ariaLabel:S,...z}),W(l)||null===M?null:Ia([],zl({fill:l,fillOpacity:o,...z},function(t,e,r,n,i){var n=n[u],{marginTop:i,marginRight:a,marginBottom:l,marginLeft:o}="x"===u&&i.inset||i,s=A??(n.bandwidth?"center":"right"),i=$??("top"===c?i:l)-3;return"center"===s?(this.frameAnchor=c,this.textAnchor=void 0):(this.frameAnchor=c+"-"+s,this.textAnchor="right"===s?"end":"start"),this.lineAnchor=c,this.dy="top"===c?-i:i,this.dx="right"===s?a-3:"left"===s?3-o:0,this.ariaLabel=S+" label",{facets:[[0]],channels:{text:{value:[Wl(u,n,{anchor:c,label:M,labelAnchor:s,labelArrow:L})]}}}})))}function bl(){var[t,e]=ul(...arguments);return Ll("y",fl(e),t,e)}function kl(){var[t,e]=ul(...arguments);return Ll("fy",hl(e),t,e)}function Ml(){var[t,e]=ul(...arguments);return $l("x",dl(e),t,e)}function Al(){var[t,e]=ul(...arguments);return $l("fx",pl(e),t,e)}function Ll(t,e,r,{y:n="y"===t?void 0:null,x:i=null,x1:a="left"===e?i:null,x2:l="right"===e?i:null,ariaLabel:o=t+"-grid",ariaHidden:s=!0,...u}){return Ol(za,t,r,{ariaLabel:o,ariaHidden:s},{y:n,x1:a,x2:l,...Sl(u)})}function $l(t,e,r,{x:n="x"===t?void 0:null,y:i=null,y1:a="top"===e?i:null,y2:l="bottom"===e?i:null,ariaLabel:o=t+"-grid",ariaHidden:s=!0,...u}){return Ol(Sa,t,r,{ariaLabel:o,ariaHidden:s},{x:n,y1:a,y2:l,...Sl(u)})}function Sl({color:t="currentColor",opacity:e=.1,stroke:r=t,strokeOpacity:n=e,strokeWidth:i=1,...a}){return{stroke:r,strokeOpacity:n,strokeWidth:i,...a}}function zl({fill:t,fillOpacity:e,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:a,fontWeight:l,monospace:o,pointerEvents:s,shapeRendering:u,clip:c=!1},f){return[,t]=H(t),[,e]=P(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:a,fontWeight:l,monospace:o,pointerEvents:s,shapeRendering:u,clip:c,initializer:f}}function Ol(t,h,e,r,d,p){let m;var n=Z(d).initializer,t=t(e,Z({...d,initializer:function(n,t,e,i,r,a){var l=null==n&&("fx"===h||"fy"===h),{[h]:i}=i;if(!i)throw new Error("missing scale: "+h);var o=i.domain();let{interval:s,ticks:u,tickFormat:c,tickSpacing:f="x"===h?80:35}=d;if("string"==typeof u&&Fl(i)&&(s=u,u=void 0),void 0===u&&(u=ae(s,i.type)??((t,e)=>{var[t,r]=G.extent(t.range());return(r-t)/e})(i,f)),null==n){if(se(u))n=Bt(u);else if(le(u))n=Cl(u,...G.extent(o));else if(i.interval){let r=i.interval;if(i.ticks){let[t,e]=G.extent(o);r=ut(r,(e-t)/r[z]/u)??r,n=Cl(r,t,e)}else(r=ut(r,(n=o).length/u)??r)!==i.interval&&(n=Cl(r,...G.extent(n)));if(r===i.interval){let r=Math.round(n.length/u);1<r&&(n=n.filter((t,e)=>e%r==0))}}else n=i.ticks?i.ticks(u):o;if(!i.ticks&&n.length&&n!==o){let e=new G.InternSet(o);(n=n.filter(t=>e.has(t))).length||ln(`Warning: the ${h}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}"y"===h||"x"===h?t=[Ht(n)]:m[h]={scale:h,value:X}}p?.call(this,i,n,u,c,m);o=Object.fromEntries(Object.entries(m).map(([t,e])=>[t,{...e,value:_(n,e.value)}]));return l&&(t=a.filterFacets(n,o)),{data:n,facets:t,channels:o}}},n));return null==e?(m=t.channels,t.channels={}):m={},void 0!==r&&Object.assign(t,r),void 0===t.clip&&(t.clip=!1),t}function El(t,e,r,n,i){return{value:Rl(t,e,r,n,i)}}function Rl(t,e,r,n,i){return"function"!=typeof n||"log"===t.type&&t.tickFormat?void 0===n&&e&&q(e)?((i,a,l)=>{var o=G.max(G.pairs(a,(t,e)=>Math.abs(e-t)));if(o<1e3)return ct("millisecond","utc",l);for(let[t,e,r,n]of"time"===(i=i)?rt:"utc"===i?et:nt){if(o>n)break;if("hour"===t&&!o)break;if(a.every(t=>e.floor(t)>=t))return ct(t,r,l)}})(t.type,e,i)??wi:t.tickFormat?t.tickFormat("number"==typeof r?r:null,n):"string"==typeof n&&0<t.domain().length?(q(t.domain())?G.utcFormat:G.format)(n):void 0===n?wi:E(n):n}function Cl(t,e,r){return t.range(e,t.offset(t.floor(r)))}let Nl={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},Tl={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},Bl={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},Il={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function Pl(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function Wl(e,r,{anchor:t,label:n=r.label,labelAnchor:i,labelArrow:a}={}){if(!(null==n||n.inferred&&Fl(r)&&/^(date|time|year)$/i.test(n))){if(n=String(n),a="auto"===a?(!r.bandwidth||r.interval)&&!/[↑↓→←]/.test(n):a){if(!0===a){let t=bn(r);t&&(a=/x$/.test(e)||"center"===i?/x$/.test(e)===t<0?"left":"right":t<0?"up":"down")}switch(a){case"left":return"← "+n;case"right":return n+" →";case"up":return"right"===t?n+" ↑":"↑ "+n;case"down":return"right"===t?n+" ↓":"↓ "+n}}return n}}function jl(t="auto"){return!W(t)&&("boolean"==typeof t?t:R(t,"labelArrow",["auto","up","right","down","left"]))}function Fl(t){return q(t.domain())}function ql(t,e){if(null==e)return e;t=t(e);if(t)return t;throw new Error("scale not found: "+e)}function Dl(t,e={},r){let{columns:n,tickFormat:i,fontVariant:a=Ji(t),swatchSize:l=15,swatchWidth:o=l,swatchHeight:s=l,marginLeft:u=0,className:c,style:f,width:h}=e;e=ci(e),c=Pi(c),i=Rl(t.scale,t.domain,void 0,i),e=F("div",e).attr("class",`${c}-swatches ${c}-swatches-`+(null!=n?"columns":"wrap"));let d;return null!=n?(d=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,e.style("columns",n).selectAll().data(t.domain).enter().append("div").attr("class",c+"-swatch").call(r,t,o,s).call(t=>t.append("div").attr("class",c+"-swatch-label").attr("title",i).text(i))):(d=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,e.selectAll().data(t.domain).enter().append("span").attr("class",c+"-swatch").call(r,t,o,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),e.call(t=>t.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
`+d)).style("margin-left",u?+u+"px":null).style("width",void 0===h?null:+h+"px").style("font-variant",j(a,"normal")).call(Wi,f).node()}let Yl=new Map([["symbol",function(i,{fill:t=void 0!==i.hint?.fill?i.hint.fill:"none",fillOpacity:a=1,stroke:e=void 0!==i.hint?.stroke?i.hint.stroke:W(t)?"currentColor":"none",strokeOpacity:l=1,strokeWidth:o=1.5,r=4.5,...n}={},s){let[u,c]=H(t),[f,h]=H(e),d=ql(s,u),p=ql(s,f),m=r*r*Math.PI;return a=P(a)[1],l=P(l)[1],o=P(o)[1],Dl(i,n,(t,e,r,n)=>t.append("svg").attr("viewBox","-8 -8 16 16").attr("width",r).attr("height",n).attr("fill","color"===u?t=>d.scale(t):c).attr("fill-opacity",a).attr("stroke","color"===f?t=>p.scale(t):h).attr("stroke-opacity",l).attr("stroke-width",o).append("path").attr("d",t=>{var e=G.pathRound();return i.scale(t).draw(e,m),e}))}],["color",Gl],["opacity",function({type:t,interpolate:e,...r},{legend:n=!0,color:i=G.rgb(0,0,0),...a}){if(!e)throw new Error(t+" opacity scales are not supported");if("ramp"!==(""+(n=!0===n?"ramp":n)).toLowerCase())throw new Error(n+" opacity legends are not supported");return Gl({type:t,...r,interpolate:(t=>{let{r:e,g:r,b:n}=G.rgb(t)||G.rgb(0,0,0);return t=>`rgba(${e},${r},${n},${t})`})(i)},{legend:n,...a})}]]);function _l({className:t,...r},{label:n,ticks:i,tickFormat:a}={},l){{var[o={},s]=[l,[{className:t,...r},{label:n,ticks:i,tickFormat:a}]],u,c;let e=o;for(u of s)for(let t in u)void 0===e[t]&&(c=u[t],e===o?e={...e,[t]:c}:e[t]=c);return e}}function Gl(v,{legend:t=!0,...g}){if(!0===t&&(t="ordinal"===v.type?"swatches":"ramp"),void 0!==v.domain)switch((""+t).toLowerCase()){case"swatches":var[x,{opacity:i,...w}={}]=[v,g];if(Tn(x)||Bn(x))return Dl(x,w,(t,e,r,n)=>t.append("svg").attr("width",r).attr("height",n).attr("fill",e.scale).attr("fill-opacity",P(i)[1]).append("rect").attr("width","100%").attr("height","100%"));throw new Error(`swatches legend requires ordinal or threshold color scale (not ${x.type})`);case"ramp":{var b=v;var k=g;let{label:t=b.label,tickSize:e=6,width:n=240,height:i=44+e,marginTop:a=18,marginRight:l=0,marginBottom:o=16+e,marginLeft:s=0,style:r,ticks:u=(n-s-l)/64,tickFormat:c,fontVariant:f=Ji(b),round:h=!0,opacity:d,className:p}=k;w=ci(k),x=(p=Pi(p),d=P(d)[1],null===c&&(c=()=>null),F("svg",w).attr("class",p+"-ramp").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} `+i).call(t=>t.append("style").text(`:where(.${p}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${p}-ramp text) {
  white-space: pre;
}`)).call(Wi,r));let m,y=t=>t.selectAll(".tick line").attr("y1",a+o-i);var M=h?(t,e)=>t.rangeRound(e):(t,e)=>t.range(e),{type:k,domain:A,range:L,interpolate:$,scale:S,pivot:z}=b;if($){let e=void 0===L?$:G.piecewise(1===$.length?rn($):$,L),t=(m=M(S.copy(),G.quantize(G.interpolateNumber(s,n-l),Math.min(A.length+(void 0!==z),void 0===L?1/0:L.length))),w.document.createElement("canvas")),r=(t.width=256,t.height=1,t.getContext("2d"));for(let t=0;t<256;++t)r.fillStyle=e(t/255),r.fillRect(t,0,1,1);x.append("image").attr("opacity",d).attr("x",s).attr("y",a).attr("width",n-s-l).attr("height",i-a-o).attr("preserveAspectRatio","none").attr("xlink:href",t.toDataURL())}else if("threshold"===k){let e=A,r=void 0===c?t=>t:"string"==typeof c?G.format(c):c;m=M(G.scaleLinear().domain([-1,L.length-1]),[s,n-l]),x.append("g").attr("fill-opacity",d).selectAll().data(L).enter().append("rect").attr("x",(t,e)=>m(e-1)).attr("y",a).attr("width",(t,e)=>m(e)-m(e-1)).attr("height",i-a-o).attr("fill",t=>t),u=C(e,(t,e)=>e),c=t=>r(e[t],t)}else m=M(G.scaleBand().domain(A),[s,n-l]),x.append("g").attr("fill-opacity",d).selectAll().data(A).enter().append("rect").attr("x",m).attr("y",a).attr("width",Math.max(0,m.bandwidth()-1)).attr("height",i-a-o).attr("fill",S),y=()=>{};return x.append("g").attr("transform",`translate(0,${i-o})`).call(G.axisBottom(m).ticks(Array.isArray(u)?null:u,"string"==typeof c?c:void 0).tickFormat("function"==typeof c?c:void 0).tickSize(e).tickValues(Array.isArray(u)?u:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",j(f,"normal")).call(y).call(t=>t.select(".domain").remove()),void 0!==t&&x.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(t),x.node();return}default:throw new Error("unknown legend type: "+t)}}function Xl(t={},e="x"){return Wt(t)?t:{...t,[e]:X}}function Hl(t={},e="y"){return jt(t)?t:{...t,[e]:X}}function Ul(a,l){if(1!==l.length){let t=Xt(a),i=new Uint8Array(t),r=0;for(let e of l)for(let t of e)i[t]&&++r,i[t]=1;if(0!==r){var o=(a=Pt(a))[vt]=new Uint32Array(t+r);l=l.map(t=>Pt(t,Uint32Array));let n=t;i.fill(0);for(let r of l)for(let e=0,t=r.length;e<t;++e){let t=r[e];i[t]?(a[r[e]=n]=a[t],o[n]=t,++n):o[t]=t,i[t]=1}}}return{data:a,facets:l}}function Vl(t={},e={}){1===arguments.length&&([t,e]=Kl(t));let{y1:r,y:n=r,x:i,...a}=e,[l,o,s,u]=eo(n,i,"y","x",t,a);return{...l,y1:r,y:o,x1:s,x2:u,x:te(s,u)}}function Zl(t={},e={}){1===arguments.length&&([t,e]=Kl(t));let{x1:r,x:n=r,y:i,...a}=e,[l,o,s,u]=eo(n,i,"x","y",t,a);return{...l,x1:r,x:o,y1:s,y2:u,y:te(s,u)}}function Jl({x:t,x1:e,x2:r,...n}={}){return n=qi(n,"y"),void 0===e&&void 0===r?Vl({x:t,...n}):([e,r]=_t(t,e,r),{...n,x1:e,x2:r})}function Ql({y:t,y1:e,y2:r,...n}={}){return n=qi(n,"x"),void 0===e&&void 0===r?Zl({y:t,...n}):([e,r]=_t(t,e,r),{...n,y1:e,y2:r})}function Kl(t){let{offset:e,order:r,reverse:n,...i}=t;return[{offset:e,order:r,reverse:n},i]}let to={length:!0};function eo(f,h=At,d,t,{offset:p,order:m,reverse:y},e){if(null===h)throw new Error("stack requires "+t);let v=Gt(e),[r,g]=U(f),[n,x]=L(h),[i,w]=L(h);return n.hint=i.hint=to,p=(t=>{if(null!=t){if("function"==typeof t)return t;switch((""+t).toLowerCase()){case"expand":case"normalize":return no;case"center":case"silhouette":return io;case"wiggle":return ao}throw new Error("unknown offset: "+t)}})(p),m=((r,t,n)=>{if(void 0===r&&t===ao)return so(s);if(null!=r){if("string"==typeof r){let t=r.startsWith("-"),e=t?u:s;switch((t?r.slice(1):r).toLowerCase()){case"value":case n:return a=e,(t,e,r)=>(t,e)=>a(r[t],r[e]);case"z":return i=e,(t,e,r,n)=>(t,e)=>i(n[t],n[e]);case"sum":return co(e,(t,e,r,n)=>G.groupSort(Ht(t),t=>G.sum(t,t=>r[t]),t=>n[t]));case"appearance":return co(e,(t,e,r,n)=>G.groupSort(Ht(t),t=>e[G.greatest(t,t=>r[t])],t=>n[t]));case"inside-out":return so(e)}return uo(Mt(r))}var i,a,e;if("function"==typeof r)return(1===r.length?uo:function(n){return r=>pt(r)?(t,e)=>n(r[t],r[e]):(t,e)=>n(r.get(t),r.get(e))})(r);if(pt(r))return e=r,co(s,()=>e);throw new Error("invalid order: "+r)}})(m,p,t),[We(e,(t,e,r)=>{({data:t,facets:e}=Ul(t,e));let n=null==f?void 0:g(ee(_(t,f),r?.[d])),i=_(t,h,Float64Array),a=_(t,v),l=m&&m(t,n,i,a),o=Xt(t),s=x(new Float64Array(o)),u=w(new Float64Array(o)),c=[];for(let t of e){let e=n?Array.from(G.group(t,t=>n[t]).values()):[t];if(l)for(let t of e)t.sort(l);for(let t of e){let r=0,n=0;y&&t.reverse();for(let e of t){let t=i[e];t<0?r=u[e]=(s[e]=r)+t:0<t?n=u[e]=(s[e]=n)+t:u[e]=s[e]=n}}c.push(e)}return p&&p(c,s,u,a),{data:t,facets:e}}),r,n,i]}function ro(t,e){let r=0,n=0;for(var i of t){let t=e[i];t<r&&(r=t),t>n&&(n=t)}return[r,n]}function no(t,e,r){for(var n of t)for(let t of n){var i,[a,l]=ro(t,r);for(i of t){let t=1/(l-a||1);e[i]=t*(e[i]-a),r[i]=t*(r[i]-a)}}}function io(t,e,r){for(var n of t){for(let t of n){var i,[a,l]=ro(t,r);for(i of t){let t=(l+a)/2;e[i]-=t,r[i]-=t}}lo(n,e,r)}oo(t,e,r)}function ao(t,l,o,s){for(var r of t){let a=new G.InternMap,e=0;for(var u of r){let r=-1,t=u.map(t=>Math.abs(o[t]-l[t])),n=u.map(t=>{r=s?s[t]:++r;var t=o[t]-l[t],e=a.has(r)?t-a.get(r):0;return a.set(r,t),e}),i=[0,...G.cumsum(n)];for(let t of u)l[t]+=e,o[t]+=e;u=G.sum(t);u&&(e-=G.sum(t,(t,e)=>(n[e]/2+i[e])*t)/u)}lo(r,l,o)}oo(t,l,o)}function lo(t,r,n){var i=G.min(t,t=>G.min(t,t=>r[t]));for(let e of t)for(let t of e)r[t]-=i,n[t]-=i}function oo(t,n,i){let e=t.length;if(1!==e){var a=t.map(t=>t.flat()),l=a.map(t=>(G.min(t,t=>n[t])+G.max(t,t=>i[t]))/2),o=G.min(l);for(let r=0;r<e;r++){let e=o-l[r];for(let t of a[r])n[t]+=e,i[t]+=e}}}function so(t){return co(t,(t,e,r,n)=>{var t=Ht(t),i=G.groupSort(t,t=>e[G.greatest(t,t=>r[t])],t=>n[t]),a=G.rollup(t,t=>G.sum(t,t=>r[t]),t=>n[t]),l=[],o=[];let s=0;for(let t of i)(s<0?(s+=a.get(t),l):(s-=a.get(t),o)).push(t);return o.reverse().concat(l)})}function uo(e){return t=>{let r=_(t,e);return(t,e)=>s(r[t],r[e])}}function co(a,l){return(t,e,r,n)=>{if(!n)throw new Error("missing channel: z");let i=new G.InternMap(l(t,e,r,n).map((t,e)=>[t,e]));return(t,e)=>a(i.get(n[t]),i.get(n[e]))}}let fo={ariaLabel:"rect"};class ho extends r{constructor(t,e={}){var{x1:r,y1:n,x2:i,y2:a}=e;super(t,{x1:{value:r,scale:"x",type:null!=r&&null==i?"band":void 0,optional:!0},y1:{value:n,scale:"y",type:null!=n&&null==a?"band":void 0,optional:!0},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},e,fo),po(this,e),mo(this,e)}render(e,t,r,n,i){var{x:t,y:a}=t;let{x1:l,y1:o,x2:s,y2:u}=r,{marginTop:c,marginRight:f,marginBottom:h,marginLeft:d,width:p,height:m}=n,y=i.projection,{insetTop:v,insetRight:g,insetBottom:x,insetLeft:w}=this,{rx:b,ry:k,rx1y1:M,rx1y2:A,rx2y1:L,rx2y2:$}=this,S=((l||s)&&!y&&In(t)&&(l=s=null),(o||u)&&!y&&In(a)&&(o=u=null),t?.bandwidth?t.bandwidth():0),z=a?.bandwidth?a.bandwidth():0;return F("svg:g",i).call(D,this,n,i).call(Q,this,{},0,0).call(t=>t.selectAll().data(e).enter().call(M||A||L||$?t=>t.append("path").call(Y,this).call(yo,l&&s?t=>l[t]+(s[t]<l[t]?-g:w):l?t=>l[t]+w:d+w,o&&u?t=>o[t]+(u[t]<o[t]?-x:v):o?t=>o[t]+v:c+v,l&&s?t=>s[t]-(s[t]<l[t]?-w:g):l?t=>l[t]+S-g:p-f-g,o&&u?t=>u[t]-(u[t]<o[t]?-v:x):o?t=>o[t]+z-x:m-h-x,this).call(N,this,r):t=>t.append("rect").call(Y,this).attr("x",l?s?t=>Math.min(l[t],s[t])+w:t=>l[t]+w:d+w).attr("y",o?u?t=>Math.min(o[t],u[t])+v:t=>o[t]+v:c+v).attr("width",l?s?t=>Math.max(0,Math.abs(s[t]-l[t])+S-w-g):S-w-g:p-f-d-g-w).attr("height",o?u?t=>Math.max(0,Math.abs(o[t]-u[t])+z-v-x):z-v-x:m-c-h-v-x).call(B,"rx",b).call(B,"ry",k).call(N,this,r))).node()}}function po(t,{inset:e=0,insetTop:r=e,insetRight:n=e,insetBottom:i=e,insetLeft:a=e}={}){t.insetTop=O(r),t.insetRight=O(n),t.insetBottom=O(i),t.insetLeft=O(a)}function mo(t,{r:e,rx:r,ry:n,rx1:i=e,ry1:a=e,rx2:l=e,ry2:o=e,rx1y1:s=void 0!==i?+i:void 0!==a?+a:0,rx1y2:u=void 0!==i?+i:void 0!==o?+o:0,rx2y1:c=void 0!==l?+l:void 0!==a?+a:0,rx2y2:f=void 0!==l?+l:void 0!==o?+o:0}={}){s||u||c||f?(t.rx1y1=s,t.rx1y2=u,t.rx2y1=c,t.rx2y2=f):(t.rx=j(r,"auto"),t.ry=j(n,"auto"))}function yo(t,c,f,h,d,e){let{rx1y1:p,rx1y2:m,rx2y1:y,rx2y2:v}=e,g=("function"!=typeof c&&(c=E(c)),"function"!=typeof f&&(f=E(f)),"function"!=typeof h&&(h=E(h)),"function"!=typeof d&&(d=E(d)),Math.max(Math.abs(p+y),Math.abs(m+v))),x=Math.max(Math.abs(p+m),Math.abs(y+v));t.attr("d",t=>{var e=c(t),r=f(t),n=h(t),t=d(t),i=n<e,a=t<r,l=i?n:e,e=i?e:n,n=a?t:r,r=a?r:t,t=Math.min(1,(e-l)/g,(r-n)/x),o=t*(i?a?v:y:a?m:p),s=t*(i?a?m:p:a?v:y),u=t*(i?a?p:m:a?y:v),t=t*(i?a?y:v:a?p:m);return`M${l},${n+go(o,t)}A${o},${o} 0 0 ${o<0?0:1} ${l+vo(o,t)},${n}H${e-vo(s,u)}A${s},${s} 0 0 ${s<0?0:1} ${e},${n+go(s,u)}V${r-go(u,s)}A${u},${u} 0 0 ${u<0?0:1} ${e-vo(u,s)},${r}H${l+vo(t,o)}A${t},${t} 0 0 ${t<0?0:1} ${l},${r-go(t,o)}Z`})}function vo(t,e){return e<0?t:Math.abs(t)}function go(t,e){return e<0?Math.abs(t):t}function xo(t,e){return new ho(t,ga(xa(e)))}function wo(t,e={}){return Ft(e)||(e={...e,y:b,x2:X,interval:1}),new ho(t,Jl(xa(Xl(e))))}function bo(t,e={}){return Ft(e)||(e={...e,x:b,y2:X,interval:1}),new ho(t,Ql(ga(Hl(e))))}let ko={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Mo={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Ao extends r{constructor(t={}){var{anchor:e=null}=t;super(kt,void 0,t,null==e?ko:Mo),this.anchor=Nt(e,"anchor",["top","right","bottom","left"]),po(this,t),e||mo(this,t)}render(t,e,r,n,i){let{marginTop:a,marginRight:l,marginBottom:o,marginLeft:s,width:u,height:c}=n,{anchor:f,insetTop:h,insetRight:d,insetBottom:p,insetLeft:m}=this,{rx:y,ry:v,rx1y1:g,rx1y2:x,rx2y1:w,rx2y2:b}=this,k=s+m,M=u-l-d,A=a+h,L=c-o-p;return F(f?"svg:line":g||x||w||b?"svg:path":"svg:rect",i).datum(0).call(D,this,n,i).call(Y,this).call(N,this,r).call(Q,this,{}).call("left"===f?t=>t.attr("x1",k).attr("x2",k).attr("y1",A).attr("y2",L):"right"===f?t=>t.attr("x1",M).attr("x2",M).attr("y1",A).attr("y2",L):"top"===f?t=>t.attr("x1",k).attr("x2",M).attr("y1",A).attr("y2",A):"bottom"===f?t=>t.attr("x1",k).attr("x2",M).attr("y1",L).attr("y2",L):g||x||w||b?t=>t.call(yo,k,A,M,L,this):t=>t.attr("x",k).attr("y",A).attr("width",M-k).attr("height",L-A).attr("rx",y).attr("ry",v)).node()}}function Lo(t){return new Ao(t)}let $o={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},So=new Set(["geometry","href","src","ariaLabel","scales"]);class zo extends r{constructor(t,e={}){var{x:r,y:n,x1:i,x2:a,y1:l,y2:o,anchor:s,preferredAnchor:u="bottom",monospace:c,fontFamily:f=c?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:d,fontVariant:p,fontWeight:m,lineHeight:y=1,lineWidth:v=20,frameAnchor:g,format:x,textAnchor:w="start",textOverflow:b,textPadding:k=8,title:M,pointerSize:A=12,pathFilter:L="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=e=void 0===(e=e.tip?{...e,tip:!1}:e).title&&se(t)&&ue(t)?{...e,title:X}:e;super(t,{x:{value:null!=i&&null!=a?null:r,scale:"x",optional:!0},y:{value:null!=l&&null!=o?null:n,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:null==a},y1:{value:l,scale:"y",optional:null==o},x2:{value:a,scale:"x",optional:null==i},y2:{value:o,scale:"y",optional:null==l},title:{value:M,optional:!0}},e,$o),this.anchor=ge(s,"anchor"),this.preferredAnchor=ge(u,"preferredAnchor"),this.frameAnchor=xe(g),this.textAnchor=j(w,"middle"),this.textPadding=+k,this.pointerSize=+A,this.pathFilter=I(L),this.lineHeight=+y,this.lineWidth=+v,this.textOverflow=Ta(b),this.monospace=!!c,this.fontFamily=I(f),this.fontSize=O(h),this.fontStyle=I(d),this.fontVariant=I(p),this.fontWeight=I(m);for(let t in $o)t in this.channels&&(this[t]=$o[t]);this.splitLines=_a(this),this.clipLine=Ga(this),this.format="string"==typeof x||"function"==typeof x?{title:x}:{...x}}render(e,r,a,t,n){let h=this,{x:i,y:l,fx:o,fy:s}=r,{ownerSVGElement:u,document:c}=n,{anchor:d,monospace:f,lineHeight:p,lineWidth:m}=this,{textPadding:y,pointerSize:v,pathFilter:g}=this,{marginTop:x,marginLeft:w}=t,{x1:b,y1:k,x2:M,y2:A,x:L=b??M,y:$=k??A}=a,I=o?o(e.fx)-w:0,P=s?s(e.fy)-x:0,[W,j]=ji(this,t),S=Vi(a,W),z=Zi(a,j),O=f?Ya:Da,E=O(Xa),R,C,N=(C="title"in a?(R=Eo.call(this,{title:a.channels.title},r),Co):(R=Eo.call(this,a.channels,r),No),F("svg:g",n).call(D,this,t,n).call(ja,this).call(Q,this,{x:L&&i,y:$&&l}).call(t=>t.selectAll().data(e).enter().append("g").attr("transform",t=>`translate(${Math.round(S(t))},${Math.round(z(t))})`).call(Y,this).call(t=>t.append("path").attr("filter",g)).call(t=>t.append("text").each(function(n){var i=G.select(this),n=(this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none"),C.call(h,n,e,R,r,a));if("string"==typeof n)for(let t of h.splitLines(n))T(i,{value:h.clipLine(t)});else{let r=new Set;for(let e of n){let{label:t=""}=e;t&&r.has(t)||(r.add(t),T(i,e))}}}))));function T(t,{label:e,value:r,color:n,opacity:i}){e??="",r??="";var a=null!=n||null!=i;let l,o=100*m;var[s]=Ha(e,o,O,E);if(0<=s)e=e.slice(0,s).trimEnd()+Xa,l=r.trim(),r="";else{let[t]=Ha(r=!e&&(r||a)?r:" "+r,o-O(e),O,E);0<=t&&(l=r.trim(),r=r.slice(0,t).trimEnd()+Xa)}s=t.append("tspan").attr("x",0).attr("dy",p+"em").text("​");e&&s.append("tspan").attr("font-weight","bold").text(e),r&&s.append(()=>c.createTextNode(r)),a&&s.append("tspan").text(" ■").attr("fill",n).attr("fill-opacity",i).style("user-select","none"),l&&s.append("title").text(l)}function B(){let{width:c,height:f}=t.facet??t;N.selectChildren().each(function(l){let{x:e,width:o,height:s}=this.getBBox(),u=(o=Math.round(o),s=Math.round(s),d);if(void 0===u){let t=S(l)+I,e=z(l)+P,r=t+o+v+2*y<c,n=0<t-o-v-2*y,i=e+s+v+2*y<f,a=0<e-s-v-2*y;u=r&&n?i&&a?h.preferredAnchor:a?"bottom":"top":i&&a?r?"left":"right":(r||n)&&(i||a)?`${a?"bottom":"top"}-`+(r?"left":"right"):h.preferredAnchor}let t=this.firstChild,r=this.lastChild;if(t.setAttribute("d",((t,e,r)=>{var n=o+2*r,i=s+2*r;switch(t){case"middle":return`M${-n/2},${-i/2}h${n}v${i}h${-n}z`;case"top-left":return`M0,0l${e},${e}h${n-e}v${i}h${-n}z`;case"top":return`M0,0l${e/2},${e/2}h${(n-e)/2}v${i}h${-n}v${-i}h${(n-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-n}v${i}h${n}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-i/2}h${-n}v${i}h${n}v${e/2-i/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${n-e}v${-i}h${-n}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(n-e)/2}v${-i}h${-n}v${i}h${(n-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-n}v${-i}h${n}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-i/2}h${n}v${i}h${-n}v${e/2-i/2}z`}})(u,v,y)),e)for(let t of r.childNodes)t.setAttribute("x",-e);var n,i;r.setAttribute("y",(l=u,n=r.childNodes.length,i=p,+(/^top(?:-|$)/.test(l)?.94-i:-.29-n*i).toFixed(6)+"em")),r.setAttribute("transform",`translate(${((t,e,r,n,i)=>{switch(t){case"middle":return[-n/2,i/2];case"top-left":return[r,e+r];case"top":return[-n/2,e/2+r];case"top-right":return[-n-r,e+r];case"right":return[-e/2-n-r,i/2];case"bottom-left":return[r,-e-r];case"bottom":return[-n/2,-e/2-r];case"bottom-right":return[-n-r,-e-r];case"left":return[r+e/2,i/2]}})(u,v,y,o,s)})`)}),N.attr("visibility",null)}return e.length&&(N.attr("visibility","hidden"),u.isConnected?Promise.resolve().then(B):"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(B)),N.node()}}function Oo(t,{x:e,y:r,...n}={}){return void 0===n.frameAnchor&&([e,r]=a(e,r)),new zo(t,{...n,x:e,y:r})}function Eo(r,n){var i={};let a=this.format;a=Ro(a,r,"x"),a=Ro(a,r,"y");for(let e in this.format=a){let t=a[e];if(null!==t&&!1!==t)if("fx"===e||"fy"===e)i[e]=!0;else{let t=Nr(r,e);t&&(i[e]=t)}}for(let e in r)if(!(e in i||e in a||So.has(e)||("x"===e||"y"===e)&&r.geometry)){let t=Nr(r,e);!t||null==t.scale&&"color"===t.defaultScale||(i[e]=t)}!this.facet||(!n.fx||"fx"in a||(i.fx=!0),!n.fy)||"fy"in a||(i.fy=!0);for(let e in i){let t=this.format[e];if("string"==typeof t){var l=i[e]?.value??n[e]?.domain()??[];this.format[e]=(q(l)?G.utcFormat:G.format)(t)}else if(void 0===t||!0===t){let t=n[e];this.format[e]=t?.bandwidth?Rl(t,t.domain()):wi}}return i}function Ro(t,e,r){var n,i,a;return r in t&&(i=r+"2",!((n=r+"1")in t)&&n in e||!(i in t)&&i in e)?(e=Object.entries(t),a=t[r],e.splice(e.findIndex(([t])=>t===r)+1,0,[n,a],[i,a]),Object.fromEntries(e)):t}function Co(t,e,{title:r}){return this.format.title(r.value[t],t)}function*No(r,t,n,i,a){for(var l in n)if("fx"===l||"fy"===l)yield{label:Io(i,n,l),value:this.format[l](t[l],r)};else if(!("x1"===l&&"x2"in n||"y1"===l&&"y2"in n)){var o=n[l];if("x2"===l&&"x1"in n)yield{label:Bo(i,n,"x"),value:To(this.format.x2,n.x1,o,r)};else if("y2"===l&&"y1"in n)yield{label:Bo(i,n,"y"),value:To(this.format.y2,n.y1,o,r)};else{let t=o.value[r],e=o.scale;!y(t)&&null==e||(yield{label:Io(i,n,l),value:this.format[l](t,r),color:"color"===e?a[l][r]:null,opacity:"opacity"===e?a[l][r]:null})}}}function To(t,e,r,n){return r.hint?.length?""+t(r.value[n]-e.value[n],n):t(e.value[n],n)+"–"+t(r.value[n],n)}function Bo(t,e,r){var n=Io(t,e,r+"1",r),t=Io(t,e,r+"2",r);return n===t?n:n+"–"+t}function Io(t,e,r,n=r){e=e[r],t=t[e?.scale??r];return String(t?.label??e?.label??n)}function Po(l={}){let{facet:I,style:P,title:t,subtitle:e,caption:r,ariaLabel:W,ariaDescription:j}=l,n=Pi(l.className),o=void 0===l.marks?[]:jo(l.marks),i=(o.push(...(()=>{var e,r,n,i=[];for(e of o){let t=e.tip;t&&(!0===t?t={}:"string"==typeof t&&(t={pointer:t}),{pointer:r,preferredAnchor:n}=t,r=/^x$/i.test(r)?Hi:/^y$/i.test(r)?Ui:Xi,(t=r(((l,t={})=>Z({...t,x:null,y:null},(t,e,r,n,i,a)=>a.getMarkState(l)))(e,t))).title=null,void 0===n&&(t.preferredAnchor=r===Ui?"left":"bottom"),(n=Oo(e.data,t)).facet=e.facet,n.facetAnchor=e.facetAnchor,i.push(n))}return i})()),((t,e)=>{if(null!=t){var{x:r,y:n}=t;if(null!=r||null!=n){var i=Tt(t.data);if(null==i)throw new Error("missing facet data");var a={},r=(null!=r&&(a.fx=Lr(i,{value:r,scale:"fx"})),null!=n&&(a.fy=Lr(i,{value:n,scale:"fy"})),Do(a,e),Fn(i,a));return{channels:a,groups:r,data:t.data}}}})(I,l)),u=new Map;for(let e of o){let t=Xo(e,i,l);t&&u.set(e,t)}var a=new Map,s=(i&&_o(a,[i],l),_o(a,u,l),jo(((t,e,r)=>{let{projection:n,x:i={},y:a={},fx:l={},fy:o={},axis:s,grid:u,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:p=null===d?null:u}=i,y:{axis:m=s,grid:y=null===m?null:u}=a,fx:{axis:v=f,grid:g=null===v?null:h}=l,fy:{axis:x=f,grid:w=null===x?null:h}=o}=r;return!n&&(qt(i)||Zo("x",t))||(d=p=null),!n&&(qt(a)||Zo("y",t))||(m=y=null),e.has("fx")||(v=g=null),e.has("fy")||(x=w=null),void 0===d&&(d=!Vo(t,"x")),void 0===m&&(m=!Vo(t,"y")),void 0===v&&(v=!Vo(t,"fx")),void 0===x&&(x=!Vo(t,"fy")),!0===d&&(d="bottom"),!0===m&&(m="left"),!0===v&&(v="top"===d||null===d?"bottom":"top"),!0===x&&(x="right"===m||null===m?"left":"right"),Uo(e=[],w,kl,o),Ho(e,x,yl,"right","left",c,o),Uo(e,g,Al,l),Ho(e,v,gl,"top","bottom",c,l),Uo(e,y,bl,a),Ho(e,m,ml,"left","right",r,a),Uo(e,p,Ml,i),Ho(e,d,vl,"bottom","top",r,i),e})(o,a,l)));for(let e of s){let t=Xo(e,i,l);t&&u.set(e,t)}o.unshift(...s);let c=(()=>{var{fx:t,fy:e}=xn(a,l),t=t?.scale.domain(),e=e?.scale.domain();return t&&e?G.cross(t,e).map(([t,e],r)=>({x:t,y:e,i:r})):t?t.map((t,e)=>({x:t,i:e})):e?e.map((t,e)=>({y:t,i:e})):void 0})();if(void 0!==c){let r=i?Qn(c,i):void 0;for(let e of o)if(null!==e.facet&&"super"!==e.facet){let t=u.get(e);void 0!==t&&(t.facetsIndex=null!=e.fx||null!=e.fy?Qn(c,t):r)}let n=new Set;for(let{facetsIndex:t}of u.values())t?.forEach((t,e)=>{0<t?.length&&n.add(e)});c.forEach(0<n.size&&n.size<c.length?(t,e)=>t.empty=!n.has(e):t=>t.empty=!1);for(let e of o)if("exclude"===e.facet){let t=u.get(e);void 0!==t&&(t.facetsIndex=qn(t.facetsIndex))}}for(let t of V.keys())qt(l[t])&&"fx"!==t&&"fy"!==t&&a.set(t,[]);let f=new Map;for(let a of o){if(f.has(a))throw new Error("duplicate mark; each mark must be unique");let{facetsIndex:t,channels:e}=u.get(a)??{},{data:r,facets:n,channels:i}=a.initialize(t,e,l);Do(i,l),f.set(a,{data:r,facets:n,channels:i})}var h,d,p,s=xn(_o(a,f,l),l),m=((t,i,e={})=>{let a=.5-J,l=.5+J,o=.5+J,s=.5-J;for(let{marginTop:t,marginRight:e,marginBottom:r,marginLeft:n}of i)t>a&&(a=t),e>l&&(l=e),r>o&&(o=r),n>s&&(s=n);let{margin:r,marginTop:n=void 0!==r?r:a,marginRight:u=void 0!==r?r:l,marginBottom:c=void 0!==r?r:o,marginLeft:f=void 0!==r?r:s}=e;n=+n,u=+u,c=+c,f=+f;var h,{width:i=640,height:d=Di(t,e,{width:i,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:o,marginLeftDefault:s})+Math.max(0,n-a+c-o)}=e,i={width:+i,height:+d,marginTop:n,marginRight:u,marginBottom:c,marginLeft:f};return(t.fx||t.fy)&&({margin:d,marginTop:t=void 0!==d?d:n,marginRight:e=void 0!==d?d:u,marginBottom:h=void 0!==d?d:c,marginLeft:d=void 0!==d?d:f}=e.facet??{},i.facet={marginTop:t=+t,marginRight:e=+e,marginBottom:h=+h,marginLeft:d=+d}),i})(s,o,l),y=s,v=m,{x:g,y:x,fx:w,fy:b}=y,k=w||b?kn(v):v,k=(w&&An(w,k),b&&Ln(b,k),w||b?Mn(y,v):v);g&&An(g,k),x&&Ln(x,k);let M=wn(s),{fx:A,fy:L}=M,$=A||L?Mn(s,m):m,F=A||L?(({fx:t,fy:e},r)=>{var{marginTop:n,marginRight:i,marginBottom:a,marginLeft:l,width:o,height:s}=kn(r),u=t&&Jo(t),c=e&&Jo(e);return{marginTop:e?c[0]:n,marginRight:t?o-u[1]:i,marginBottom:e?s-c[1]:a,marginLeft:t?u[0]:l,inset:{marginTop:r.marginTop,marginRight:r.marginRight,marginBottom:r.marginBottom,marginLeft:r.marginLeft},width:o,height:s}})(M,m):m,S=ci(l),z=S.document,O=G.creator("svg").call(z.documentElement),E=O,R=(S.ownerSVGElement=O,S.className=n,S.projection=ri(l,$),S.filterFacets=(t,e)=>Qn(c,{channels:e,groups:Fn(t,e)}),S.getMarkState=t=>{var e=f.get(t),t=u.get(t);return{...e,channels:{...e.channels,...t?.channels}}},S.dispatchValue=t=>{E.value!==t&&(E.value=t,E.dispatchEvent(new S.document.defaultView.Event("input",{bubbles:!0})))},new Set);for(let[i,a]of f)if(null!=i.initializer){let t="super"===i.facet?F:$,n=i.initializer(a.data,a.facets,a.channels,M,t,S);if(void 0!==n.data&&(a.data=n.data),void 0!==n.facets&&(a.facets=n.facets),void 0!==n.channels){let{fx:t,fy:e,...r}=n.channels;C=N=void 0;var C,N=r;for(C in N)zr(C,N[C]);Object.assign(a.channels,r);for(let e of Object.values(r)){let t=e.scale;null!=t&&(h=V.get(t))!==Ae&&h!==Ee&&(Yo(e,l),R.add(t))}null==t&&null==e||u.set(i,!0)}}if(R.size){let t=new Map,e=(_o(t,f,l,t=>R.has(t)),_o(a,f,l,t=>R.has(t)),((t,e)=>{for(var r in t){var n=t[r],r=e[r];void 0===n.label&&r&&(n.label=r.label)}return t})(xn(t,l),s)),{scales:r,...n}=wn(e);Object.assign(s,e),Object.assign(M,n),Object.assign(M.scales,r)}let T,q;void 0!==c&&(T={x:A?.domain(),y:L?.domain()},c=([w,{x:d,y:p}]=[c,T],d&&=_n(d),p&&=_n(p),w.filter(d&&p?t=>d.has(t.x)&&p.has(t.y):d?t=>d.has(t.x):t=>p.has(t.y)).sort(d&&p?(t,e)=>d.get(t.x)-d.get(e.x)||p.get(t.y)-p.get(e.y):d?(t,e)=>d.get(t.x)-d.get(e.x):(t,e)=>p.get(t.y)-p.get(e.y))),q=((e,r,{marginTop:n,marginLeft:i})=>{let a=e?({x:t})=>e(t)-i:()=>0,l=r?({y:t})=>r(t)-n:()=>0;return function(t){"svg"===this.tagName?(this.setAttribute("x",a(t)),this.setAttribute("y",l(t))):this.setAttribute("transform",`translate(${a(t)},${l(t)})`)}})(A,L,m)),S.path=function(){return G.geoPath(this.projection??(({x:r,y:n})=>{if(r||n)return r??=t=>t,n??=t=>t,G.geoTransform({point(t,e){this.stream.point(r(t),n(e))}})})(M))};for(let[t,e]of f)e.values=t.scale(e.channels,M,S);var{width:b,height:y}=m;G.select(O).attr("class",n).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",b).attr("height",y).attr("viewBox",`0 0 ${b} `+y).attr("aria-label",W).attr("aria-description",j).call(t=>t.append("style").text(`:where(.${n}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${n} text),
:where(.${n} tspan) {
  white-space: pre;
}`)).call(Wi,P);for(let s of o){let{channels:a,values:l,facets:o}=f.get(s);if(void 0===c||"super"===s.facet){let e=null;if(!o||(e=o[0],0!==(e=s.filter(e,a,l)).length)){let t=s.render(e,M,l,F,S);null!=t&&O.appendChild(t)}}else{let i;for(let n of c)if(s.facetAnchor?.(c,T,n)??!n.empty){let e=null;if(o){let t=u.has(s);if(e=o[t?n.i:0],0===(e=s.filter(e,a,l)).length)continue;(e=t||e!==o[0]?e:Zt(e)).fx=n.x,e.fy=n.y,e.fi=n.i}let r=s.render(e,M,l,$,S);if(null!=r){(i??=G.select(O).append("g")).append(()=>r).datum(n);for(let t of["aria-label","aria-description","aria-hidden","transform"])r.hasAttribute(t)&&(i.attr(t,r.getAttribute(t)),r.removeAttribute(t))}}i?.selectChildren().each(q)}}var B,D,Y,_,v=((e,r,t)=>{var n,i,a=[];for([n,i]of Yl){var l=t[n];if(l?.legend&&n in e){let t=i(e[n],_l(r,e[n],l),t=>e[t]);null!=t&&a.push(t)}}return a})(s,S,l),{figure:g=null!=t||null!=e||null!=r||0<v.length}=l,k=(g&&((E=z.createElement("figure")).className=n+"-figure",E.style.maxWidth="initial",null!=t&&E.append(Wo(z,t,"h2")),null!=e&&E.append(Wo(z,e,"h3")),E.append(...v,O),null!=r&&E.append(((t,e)=>((t=t.createElement("figcaption")).append(e),t))(z,r)),"value"in O)&&(E.value=O.value,delete O.value),E.scale=(_=M.scales,t=>{if(V.has(t=""+t))return _[t];throw new Error("unknown scale: "+t)}),E.legend=([B,D,Y={}]=[s,S,l],(t,e)=>{if(!Yl.has(t))throw new Error("unknown legend type: "+t);if(t in B)return Yl.get(t)(B[t],_l(D,Y[t],e),t=>B[t])}),x=an,an=0,nn=void 0,x);return 0<k&&G.select(O).append("text").attr("x",b).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(k.toLocaleString("en-US")+` warning${1===k?"":"s"}. Please check the console.`),E}function Wo(t,e,r){return e.ownerDocument?e:((t=t.createElement(r)).append(e),t)}function jo(t){return t.flat(1/0).filter(t=>null!=t).map(Fo)}function Fo(t){return"function"==typeof t.render?t:new qo(t)}class qo extends r{constructor(t){if("function"!=typeof t)throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Do(t,e){for(var r in t)Yo(t[r],e)}function Yo(t,e){var{scale:r,transform:n=!0}=t;null!=r&&n&&({type:n,percent:e,interval:r,transform:e=e?t=>null==t?NaN:100*t:re(r,n)}=e[r]??{},null!=e)&&(t.value=C(t.value,e),t.transform=!1)}function _o(i,t,e,r=Lt){for(var{channels:n}of t.values())for(let t in n){var a=n[t],l=a.scale;if(null!=l&&r(l))if("projection"===l){if([{projection:o}={}]=[e],null==o||"function"!=typeof o.stream&&null==(o=x(o)?o.type:o)){let r=void 0===e.x?.domain,n=void 0===e.y?.domain;if(r||n){let[t,e]=(e=>{let r=[],n=[],t={scale:"x",value:r},i={scale:"y",value:n},a={point(t,e){r.push(t),n.push(e)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(let t of e.value)G.geoStream(t,a);return[t,i]})(a);r&&Go(i,"x",t),n&&Go(i,"y",e)}}}else Go(i,l,a)}var o;return i}function Go(t,e,r){var n=t.get(e);void 0!==n?n.push(r):t.set(e,[r])}function Xo(n,i,r){if(null!==n.facet&&"super"!==n.facet){var{fx:a,fy:l}=n;if(null!=a||null!=l){let t=Tt(n.data??a??l);if(void 0===t)throw new Error("missing facet data in "+n.ariaLabel);if(null===t)return;let e={};return null!=a&&(e.fx=Lr(t,{value:a,scale:"fx"})),null!=l&&(e.fy=Lr(t,{value:l,scale:"fy"})),Do(e,r),{channels:e,groups:Fn(t,e)}}if(void 0!==i){let{channels:t,groups:e,data:r}=i;if("auto"!==n.facet||n.data===r)return{channels:t,groups:e};0<r.length&&(1<e.size||1===e.size&&t.fx&&t.fy&&1<[...e][0][1].size)&&Xt(Tt(n.data))===Xt(r)&&ln(`Warning: the ${n.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}}}function Ho(t,e,r,n,i,a,l){var o;e&&(o=/^\s*both\s*$/i.test(e),n=(l=((t,e,{line:r=e.line,ticks:n,tickSize:i,tickSpacing:a,tickPadding:l,tickFormat:o,tickRotate:s,fontVariant:u,ariaLabel:c,ariaDescription:f,label:h=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m})=>({anchor:t,line:r,ticks:n,tickSize:i,tickSpacing:a,tickPadding:l,tickFormat:o,tickRotate:s,fontVariant:u,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:p,labelOffset:m}))(o?n:e,a,l)).line,r!==ml&&r!==vl||!n||ve(n)||t.push(Lo((()=>{var{anchor:t,line:e}=l;return{anchor:t,facetAnchor:t+"-empty",stroke:!0===e?void 0:e}})())),t.push(r(l)),o)&&t.push(r({...l,anchor:i,label:null}))}function Uo(t,e,r,n){e&&!ve(e)&&t.push(r(((t,{stroke:e=me(t)?t:void 0,ticks:r=(t=>{switch(typeof t){case"number":return 1;case"string":return!me(t)}return se(t)||"function"==typeof t?.range})(t)?t:void 0,tickSpacing:n,ariaLabel:i,ariaDescription:a})=>({stroke:e,ticks:r,tickSpacing:n,ariaLabel:i,ariaDescription:a}))(e,n)))}function Vo(t,e){let r=e+"-axis ";return t.some(t=>t.ariaLabel?.startsWith(r))}function Zo(e,t){for(var r of t)for(let t in r.channels){var n=r.channels[t].scale;if(n===e||"projection"===n)return 1}}function Jo(t){var e=t.domain();if(0===e.length)return[0,t.bandwidth()];let r=t(e[0]),n=t(e[e.length-1]);return n<r&&([r,n]=[n,r]),[r,n+t.bandwidth()]}let Qo=new Map([["basis",G.curveBasis],["basis-closed",G.curveBasisClosed],["basis-open",G.curveBasisOpen],["bundle",G.curveBundle],["bump-x",G.curveBumpX],["bump-y",G.curveBumpY],["cardinal",G.curveCardinal],["cardinal-closed",G.curveCardinalClosed],["cardinal-open",G.curveCardinalOpen],["catmull-rom",G.curveCatmullRom],["catmull-rom-closed",G.curveCatmullRomClosed],["catmull-rom-open",G.curveCatmullRomOpen],["linear",G.curveLinear],["linear-closed",G.curveLinearClosed],["monotone-x",G.curveMonotoneX],["monotone-y",G.curveMonotoneY],["natural",G.curveNatural],["step",G.curveStep],["step-after",G.curveStepAfter],["step-before",G.curveStepBefore]]);function Ko(t=G.curveLinear,e){if("function"==typeof t)return t;var r=Qo.get((""+t).toLowerCase());if(!r)throw new Error("unknown curve: "+t);if(void 0!==e){if("beta"in r)return r.beta(e);if("tension"in r)return r.tension(e);if("alpha"in r)return r.alpha(e)}return r}function ts(t=es,e){return"function"!=typeof t&&"auto"===(""+t).toLowerCase()?es:Ko(t,e)}function es(t){return G.curveLinear(t)}function rs(t={y:"count"},e={}){[t,e]=us(t,e);var{x:r,y:n}=e;return ss(cs(r,e,X),null,null,n,t,ha(e))}function ns(t={x:"count"},e={}){[t,e]=us(t,e);var{x:r,y:n}=e;return ss(null,cs(n,e,X),r,null,t,da(e))}function is(t={fill:"count"},e={}){[t,e]=us(t,e);var{x:r,y:n}=(t=>{var{x:e,y:r}=t,e=cs(e,t),r=cs(r,t);return[e.value,r.value]=a(e.value,r.value),{x:e,y:r}})(e);return ss(r,n,null,null,t,ha(da(e)))}function as(t,e,r={}){var n,i;return null==r?.interval?r:({reduce:n=mr}=r,i={filter:null},null!=r[e]&&(i[e]=n),null!=r[e+"1"]&&(i[e+"1"]=n),null!=r[e+"2"]&&(i[e+"2"]=n),t(i,r))}function ls(t={}){return as(rs,"y",qi(t,"x"))}function os(t={}){return as(ns,"x",qi(t,"y"))}function ss(r,i,t,e,{data:M=pr,filter:A=gr,sort:L,reverse:a,...$}={},n={}){r=fs(r),i=fs(i),$=Ke($,n,ds),M=ms(M,X),L=null==L?void 0:ds("sort",L,n),A=null==A?void 0:ps("filter",A,n),null!=t&&Qe($,"x","x1","x2")&&(t=null),null!=e&&Qe($,"y","y1","y2")&&(e=null);let[l,S]=U(r),[o,z]=U(r),[s,O]=U(i),[u,E]=U(i),[R,C]=null!=t?[t,"x"]:null!=e?[e,"y"]:[],[c,N]=U(R),{x:f,y:h,z:T,fill:d,stroke:p,x1:m,x2:y,y1:v,y2:g,domain:b,cumulative:k,thresholds:W,interval:j,...x}=n,[w,B]=U(T),[I]=H(d),[P]=H(p),[F,q]=U(I),[D,Y]=U(P);return{..."z"in n&&{z:w||T},..."fill"in n&&{fill:F||d},..."stroke"in n&&{stroke:D||p},...We(x,(l,t,e)=>{var o=ee(_(l,R),e?.[C]),s=_(l,T),u=_(l,I),c=_(l,P),f=cr($,{z:s,fill:u,stroke:c}),n=[],h=[],d=o&&N([]),p=s&&B([]),m=u&&q([]),y=c&&Y([]),v=r&&S([]),g=r&&z([]),x=i&&O([]),w=i&&E([]),b=((t,l)=>{let o=r?.(l),s=t?.(l);return o&&s?function*(t){let e=o.bin(t);for(let[t,[i,a]]of o.entries()){let n=s.bin(e[t]);for(let[t,[e,r]]of s.entries())yield[n[t],{data:l,x1:i,y1:e,x2:a,y2:r}]}}:o?function*(t){var n=o.bin(t);for(let[t,[e,r]]of o.entries())yield[n[t],{data:l,x1:e,x2:r}]}:function*(t){var n=s.bin(t);for(let[t,[e,r]]of s.entries())yield[n[t],{data:l,y1:e,y2:r}]}})(i,l);let k=0;for(let t of $)t.initialize(l);L&&L.initialize(l),A&&A.initialize(l);for(let r of t){let a=[];for(let t of $)t.scope("facet",r);L&&L.scope("facet",r),A&&A.scope("facet",r);for(let[i,e]of rr(r,f))for(let[t,n]of rr(e,o))for(let[e,r]of b(n))if(f&&(r.z=i),!A||A.reduce(e,r)){a.push(k++),h.push(M.reduceIndex(e,l,r)),o&&d.push(t),s&&p.push(f===s?i:s[(0<e.length?e:n)[0]]),u&&m.push(f===u?i:u[(0<e.length?e:n)[0]]),c&&y.push(f===c?i:c[(0<e.length?e:n)[0]]),v&&(v.push(r.x1),g.push(r.x2)),x&&(x.push(r.y1),w.push(r.y2));for(let t of $)t.reduce(e,r);L&&L.reduce(e,r)}n.push(a)}return fr(n,L,a),{data:h,facets:n}}),...!Qe($,"x")&&(l?{x1:l,x2:o,x:te(l,o)}:{x:f,x1:m,x2:y}),...!Qe($,"y")&&(s?{y1:s,y2:u,y:te(s,u)}:{y:h,y1:v,y2:g}),...c&&{[C]:c},...Object.fromEntries($.map(({name:t,output:e})=>[t,e]))}}function us({cumulative:t,domain:e,thresholds:r,interval:n,...i},a){return[i,{cumulative:t,domain:e,thresholds:r,interval:n,...a}]}function cs(t,{cumulative:e,domain:r,thresholds:n,interval:i},a){return void 0===(t={...oe(t)}).domain&&(t.domain=r),void 0===t.cumulative&&(t.cumulative=e),void 0===t.thresholds&&(t.thresholds=n),void 0===t.interval&&(t.interval=i),void 0===t.value&&(t.value=a),t.thresholds=hs(t.thresholds,t.interval),t}function fs(t){if(null==t)return;let{value:n,cumulative:i,domain:c=G.extent,thresholds:f}=t,e=t=>{let l,o=_(t,n);if(q(o)||le(e=t=f)&&"function"==typeof e?.floor&&e.floor()instanceof Date||se(t)&&q(t)){o=C(o,Ct,Float64Array);let[t,e]="function"==typeof c?c(o):c,r="function"!=typeof f||le(f)?f:f(o,t,e);le(r="number"==typeof r?G.utcTickInterval(t,e,r):r)&&(c===G.extent&&(t=r.floor(t),e=r.offset(r.floor(e))),r=r.range(t,r.offset(e))),l=r}else{o=S(o);let[n,i]="function"==typeof c?c(o):c,a="function"!=typeof f||le(f)?f:f(o,n,i);if("number"==typeof a)if(c===G.extent){let r=G.tickIncrement(n,i,a);if(isFinite(r))if(0<r){let e=Math.round(n/r),t=Math.round(i/r);e*r<=n||--e,t*r>i||++t;var s=t-e+1;a=new Float64Array(s);for(let t=0;t<s;++t)a[t]=(e+t)*r}else if(r<0){r=-r;let e=Math.round(n*r),t=Math.round(i*r);e/r<=n||--e,t/r>i||++t;var u=t-e+1;a=new Float64Array(u);for(let t=0;t<u;++t)a[t]=(e+t)/r}else a=[n];else a=[n]}else a=G.ticks(n,i,a);else le(a)&&(c===G.extent&&(n=a.floor(n),i=a.offset(a.floor(i))),a=a.range(n,a.offset(i)));l=a}var e,r=[];if(1===l.length)r.push([l[0],l[0]]);else for(let t=1;t<l.length;++t)r.push([l[t-1],l[t]]);return r.bin=(i<0?function(t,e,r){let i=gs(t,e,r);return t=>{var n=i(t);for(let t=n.length-2;0<=t;--t){let e=n[t+1],r=n[t];for(let t of e)r.push(t)}return n}}:0<i?function(t,e,r){let i=gs(t,e,r);return t=>{var n=i(t);for(let t=1,e=n.length;t<e;++t){let e=n[t-1],r=n[t];for(let t of e)r.push(t)}return n}}:gs)(r,l,o),r};return e.label=Kt(n),e}function hs(t,e,r=vs){if(void 0===t)return void 0===e?r:ae(e);if("string"!=typeof t)return t;switch(t.toLowerCase()){case"freedman-diaconis":return G.thresholdFreedmanDiaconis;case"scott":return G.thresholdScott;case"sturges":return G.thresholdSturges;case"auto":return vs}return ot(t)}function ds(t,e,r){return tr(t,e,r,ps)}function ps(t,e,r){return er(t,e,r,ms)}function ms(t,e){return nr(t,e,ys)}function ys(t){switch((""+t).toLowerCase()){case"x":return ws;case"x1":return ks;case"x2":return Ms;case"y":return bs;case"y1":return As;case"y2":return Ls;case"z":return Ar}throw new Error("invalid bin reduce: "+t)}function vs(t,e,r){return Math.min(200,G.thresholdScott(t,e,r))}function gs(t,n,i){return n=S(n),e=>{var r=t.map(()=>[]);for(let t of e)r[G.bisect(n,i[t])-1]?.push(t);return r}}function xs(t,e){e=(+t+ +e)/2;return t instanceof Date?new Date(e):e}let ws={reduceIndex:(t,e,{x1:r,x2:n})=>xs(r,n)},bs={reduceIndex:(t,e,{y1:r,y2:n})=>xs(r,n)},ks={reduceIndex:(t,e,{x1:r})=>r},Ms={reduceIndex:(t,e,{x2:r})=>r},As={reduceIndex:(t,e,{y1:r})=>r},Ls={reduceIndex:(t,e,{y2:r})=>r},$s={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ss extends r{constructor(t,e={}){var{x1:r,y1:n,x2:i,y2:a,z:l,curve:o,tension:s}=e;super(t,{x1:{value:r,scale:"x"},y1:{value:n,scale:"y"},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:Gt(e),optional:!0}},e,$s),this.z=l,this.curve=Ko(o,s)}filter(t){return t}render(e,t,r,n,i){let{x1:a,y1:l,x2:o=a,y2:s=l}=r;return F("svg:g",i).call(D,this,n,i).call(Q,this,t,0,0).call(t=>t.selectAll().data(Oi(e,[a,l,o,s],this,r)).enter().append("path").call(Y,this).call(Si,this,r).attr("d",G.area().curve(this.curve).defined(t=>0<=t).x0(t=>a[t]).y0(t=>l[t]).x1(t=>o[t]).y1(t=>s[t]))).node()}}function zs(t,e){return void 0===e?Es(t,{x:$t,y:St}):new Ss(t,e)}function Os(t,e){let{y:r=b,...n}=os(e);return new Ss(t,Jl(Xl({...n,y1:r,y2:void 0},r===b?"x2":"x")))}function Es(t,e){let{x:r=b,...n}=ls(e);return new Ss(t,Ql(Hl({...n,x1:r,x2:void 0},r===b?"y2":"y")))}let Rs={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Cs extends r{constructor(t,e={}){var{x1:r,y1:n,x2:i,y2:a,curve:l,tension:o}=e;super(t,{x1:{value:r,scale:"x"},y1:{value:n,scale:"y"},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},e,Rs),this.curve=ts(l,o),Ki(this,e)}project(t,e,r){this.curve!==es&&super.project(t,e,r)}render(e,t,r,n,i){let{x1:a,y1:l,x2:o=a,y2:s=l}=r,u=this.curve;return F("svg:g",i).call(D,this,n,i).call(Q,this,t).call(t=>t.selectAll().data(e).enter().append("path").call(Y,this).attr("d",u===es&&i.projection?((t,e,r,n,i)=>{let a=G.geoPath(t);return e=S(e),r=S(r),n=S(n),i=S(i),t=>a({type:"LineString",coordinates:[[e[t],r[t]],[n[t],i[t]]]})})(i.projection,a,l,o,s):t=>{var e=G.pathRound(),r=u(e);return r.lineStart(),r.point(a[t],l[t]),r.point(o[t],s[t]),r.lineEnd(),e}).call(N,this,r).call(oa,this,r,i)).node()}}function Ns(t,{x:e,x1:r,x2:n,y:i,y1:a,y2:l,...o}={}){return[r,n]=Ts(e,r,n),[a,l]=Ts(i,a,l),new Cs(t,{...o,x1:r,x2:n,y1:a,y2:l})}function Ts(t,e,r){if(void 0===t){if(void 0===e){if(void 0!==r)return[r]}else if(void 0===r)return[e]}else{if(void 0===e)return void 0===r?[t]:[t,r];if(void 0===r)return[t,e]}return[e,r]}let Bs={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class Is extends r{constructor(t,e={}){var{x1:r,y1:n,x2:i,y2:a,bend:l=0,headAngle:o=60,headLength:s=8,inset:u=0,insetStart:c=u,insetEnd:u=u,sweep:f}=e;super(t,{x1:{value:r,scale:"x"},y1:{value:n,scale:"y"},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},e,Bs),this.bend=!0===l?22.5:Math.max(-90,Math.min(90,l)),this.headAngle=+o,this.headLength=+s,this.insetStart=+c,this.insetEnd=+u,this.sweep=((i=1)=>{if("number"==typeof i)return E(Math.sign(i));if("function"==typeof i)return(t,e,r,n)=>Math.sign(i(t,e,r,n));switch(R(i,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,e,r)=>G.ascending(t,r);case"-x":return(t,e,r)=>G.descending(t,r);case"+y":return(t,e,r,n)=>G.ascending(e,n);case"-y":return(t,e,r,n)=>G.descending(e,n)}})(f)}render(e,t,r,n,i){let{x1:w,y1:b,x2:k=w,y2:M=b,SW:a}=r,{strokeWidth:l,bend:A,headAngle:o,headLength:s,insetStart:L,insetEnd:$}=this,S=a?t=>a[t]:E(void 0===l?1:l),z=o*Qi/2,O=s/1.5;return F("svg:g",i).call(D,this,n,i).call(Q,this,t).call(t=>t.selectAll().data(e).enter().append("path").call(Y,this).attr("d",t=>{let a=w[t],l=b[t],o=k[t],s=M[t];var u=Math.hypot(o-a,s-l);if(u<=L+$)return null;let c=Math.atan2(s-l,o-a);var e,f,t=Math.min(O*S(t),u/3),h=this.sweep(a,l,o,s)*A*Qi,u=Math.hypot(u/Math.tan(h),u)/2;if(L||$)if(u<1e5){let r=Math.sign(h),[n,i]=([[m,g],[y,x],d,e]=[[a,l],[o,s],u,r],f=y-m,v=x-g,p=Math.hypot(f,v),e=e*Math.sqrt(d*d-p*p/4)/p,[(m+y)/2-v*e,(g+x)/2+f*e]);if(L&&([a,l]=Ps([n,i,u],[a,l,L],-r*Math.sign(L))),$){let[t,e]=Ps([n,i,u],[o,s,$],r*Math.sign($));c+=Math.atan2(e-i,t-n)-Math.atan2(s-i,o-n),o=t,s=e}}else{let t=o-a,e=s-l,r=Math.hypot(t,e);L&&(a+=t/r*L,l+=e/r*L),$&&(o-=t/r*$,s-=e/r*$)}var d=c+h,p=d+z,m=d-z,y=o-t*Math.cos(p),v=s-t*Math.sin(p),g=o-t*Math.cos(m),x=s-t*Math.sin(m);return`M${a},${l}${u<1e5?`A${u},${u} 0,0,${0<h?1:0} `:"L"}${o},`+s+(t?`M${y},${v}L${o},${s}L${g},`+x:"")}).call(N,this,r)).node()}}function Ps([t,e,r],[n,i,a],l){var n=n-t,i=i-e,o=Math.hypot(n,i),a=(n*n+i*i-a*a+r*r)/(2*o),l=l*Math.sqrt(r*r-a*a);return[t+(n*a+i*l)/o,e+(i*a-n*l)/o]}let Ws={ariaLabel:"bar"};class js extends r{constructor(t,e,r={},n=Ws){super(t,e,r,n),po(this,r),mo(this,r)}render(e,t,r,n,i){let{rx:a,ry:l,rx1y1:o,rx1y2:s,rx2y1:u,rx2y2:c}=this,f=this._x(t,r,n),h=this._y(t,r,n),d=this._width(t,r,n),p=this._height(t,r,n);return F("svg:g",i).call(D,this,n,i).call(this._transform,this,t).call(t=>t.selectAll().data(e).enter().call(o||s||u||c?t=>t.append("path").call(Y,this).call(yo,f,h,Fs(f,d),Fs(h,p),this).call(N,this,r):t=>t.append("rect").call(Y,this).attr("x",f).attr("width",d).attr("y",h).attr("height",p).call(B,"rx",a).call(B,"ry",l).call(N,this,r))).node()}_x(t,{x:e},{marginLeft:r}){let n=this.insetLeft;return e?t=>e[t]+n:r+n}_y(t,{y:e},{marginTop:r}){let n=this.insetTop;return e?t=>e[t]+n:r+n}_width({x:t},{x:e},{marginRight:r,marginLeft:n,width:i}){var{insetLeft:a,insetRight:l}=this,e=e&&t?t.bandwidth():i-r-n;return Math.max(0,e-a-l)}_height({y:t},{y:e},{marginTop:r,marginBottom:n,height:i}){var{insetTop:a,insetBottom:l}=this,e=e&&t?t.bandwidth():i-r-n;return Math.max(0,e-a-l)}}function Fs(e,r){return"function"==typeof e&&"function"==typeof r?t=>e(t)+r(t):"function"==typeof e?t=>e(t)+r:"function"==typeof r?t=>e+r(t):e+r}class qs extends js{constructor(t,e={},r){var{x1:n,x2:i,y:a}=e;super(t,{x1:{value:n,scale:"x"},x2:{value:i,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},e,r)}_transform(t,e,{x:r}){t.call(Q,e,{x:r},0,0)}_x({x:t},{x1:e,x2:r},{marginLeft:n}){let i=this.insetLeft;return In(t)?n+i:t=>Math.min(e[t],r[t])+i}_width({x:t},{x1:e,x2:r},{marginRight:n,marginLeft:i,width:a}){let{insetLeft:l,insetRight:o}=this;return In(t)?a-n-i-l-o:t=>Math.max(0,Math.abs(r[t]-e[t])-l-o)}}class Ds extends js{constructor(t,e={},r){var{x:n,y1:i,y2:a}=e;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:n,scale:"x",type:"band",optional:!0}},e,r)}_transform(t,e,{y:r}){t.call(Q,e,{y:r},0,0)}_y({y:t},{y1:e,y2:r},{marginTop:n}){let i=this.insetTop;return In(t)?n+i:t=>Math.min(e[t],r[t])+i}_height({y:t},{y1:e,y2:r},{marginTop:n,marginBottom:i,height:a}){let{insetTop:l,insetBottom:o}=this;return In(t)?a-n-i-l-o:t=>Math.max(0,Math.abs(r[t]-e[t])-l-o)}}function Ys(t,e={}){return Ft(e)||(e={...e,y:b,x2:X}),new qs(t,Jl(wa(Xl(e))))}function _s(t,e={}){return Ft(e)||(e={...e,x:b,y2:X}),new Ds(t,Ql(ba(Hl(e))))}let Gs={ariaLabel:"cell"};class Xs extends js{constructor(t,{x:e,y:r,...n}={}){super(t,{x:{value:e,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},n,Gs)}_transform(t,e){t.call(Q,e,{},0,0)}}function Hs(t,{x:e,y:r,...n}={}){return[e,r]=a(e,r),new Xs(t,{...n,x:e,y:r})}let Us={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Vs(t){return void 0===t.sort&&void 0===t.reverse?_e({channel:"-r"},t):t}class Zs extends r{constructor(t,e={}){var{x:r,y:n,r:i,rotate:a,symbol:l=G.symbolCircle,frameAnchor:o}=e,[a,s]=P(a,0),[l,u]=(t=>{if(null==t||Be(t))return[void 0,t];if("string"==typeof t){var e=Te.get((""+t).toLowerCase());if(e)return[void 0,e]}return[t,void 0]})(l),[i,c]=P(i,null==l?3:4.5),r=(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},r:{value:i,scale:"r",filter:M,optional:!0},rotate:{value:a,optional:!0},symbol:{value:l,scale:"auto",optional:!0}},Vs(e),Us),this.r=c,this.rotate=s,this.symbol=u,this.frameAnchor=xe(o),this).channels,n=r.symbol;if(n){let{fill:t,stroke:e}=r;n.hint={fill:t?t.value===n.value?"color":"currentColor":this.fill??"currentColor",stroke:e?e.value===n.value?"color":"currentColor":this.stroke??"none"}}}render(e,t,r,n,i){let{x:a,y:l}=t,{x:o,y:s,r:u,rotate:c,symbol:f}=r,{r:h,rotate:d,symbol:p}=this,[m,y]=ji(this,n),v=p===G.symbolCircle,g=u?void 0:h*h*Math.PI;return A(h)&&(e=[]),F("svg:g",i).call(D,this,n,i).call(Q,this,{x:o&&a,y:s&&l}).call(t=>t.selectAll().data(e).enter().append(v?"circle":"path").call(Y,this).call(v?t=>{t.attr("cx",o?t=>o[t]:m).attr("cy",s?t=>s[t]:y).attr("r",u?t=>u[t]:h)}:t=>{t.attr("transform",Ea`translate(${o?t=>o[t]:m},${s?t=>s[t]:y})${c?t=>` rotate(${c[t]})`:d?` rotate(${d})`:""}`).attr("d",u&&f?t=>{var e=G.pathRound();return f[t].draw(e,u[t]*u[t]*Math.PI),e}:u?t=>{var e=G.pathRound();return p.draw(e,u[t]*u[t]*Math.PI),e}:f?t=>{var e=G.pathRound();return f[t].draw(e,g),e}:(t=G.pathRound(),p.draw(t,g),t))}).call(N,this,r)).node()}}function Js(t,{x:e,y:r,...n}={}){return void 0===n.frameAnchor&&([e,r]=a(e,r)),new Zs(t,{...n,x:e,y:r})}let Qs={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ks extends r{constructor(t,e={}){var{x:r,y:n,z:i,curve:a,tension:l}=e;super(t,{x:{value:r,scale:"x"},y:{value:n,scale:"y"},z:{value:Gt(e),optional:!0}},e,Qs),this.z=i,this.curve=ts(a,l),Ki(this,e)}filter(t){return t}project(t,e,r){this.curve!==es&&super.project(t,e,r)}render(e,t,r,n,i){let{x:a,y:l}=r,o=this.curve;return F("svg:g",i).call(D,this,n,i).call(Q,this,t).call(t=>t.selectAll().data(Oi(e,[a,l],this,r)).enter().append("path").call(Y,this).call(Si,this,r).call(sa,this,r,i).attr("d",o===es&&i.projection?((t,i,a)=>{let l=G.geoPath(t);return i=S(i),a=S(a),e=>{let r=[];var n=[r];for(let t of e)-1===t?(r=[],n.push(r)):r.push([i[t],a[t]]);return l({type:"MultiLineString",coordinates:n})}})(i.projection,a,l):G.line().curve(o).defined(t=>0<=t).x(t=>a[t]).y(t=>l[t]))).node()}}function tu(t,{x:e,y:r,...n}={}){return[e,r]=a(e,r),new Ks(t,{...n,x:e,y:r})}function eu(t,{x:e=X,y:r=b,...n}={}){return new Ks(t,os({...n,x:e,y:r}))}function ru(t,{x:e=b,y:r=X,...n}={}){return new Ks(t,ls({...n,x:e,y:r}))}function nu(t,e){[{x:i,y:a,color:l,size:o,fx:f,fy:r,mark:n}={}]=[e],Dt(i)||(i=lu(i)),Dt(a)||(a=lu(a)),Dt(l)||(l=me(l)?{color:l}:lu(l)),Dt(o)||(o=lu(o)),Dt(f)&&(f=lu(f).value),Dt(r)&&(r=lu(r).value);var r,n,{x:i,y:a,color:l,size:o}=e={x:i,y:a,color:l,size:o,fx:f,fy:r,mark:n=null!=n?(""+n).toLowerCase():n},s=au(t,i),u=au(t,a),c=au(t,l),f=au(t,o);let h,d,p,{fx:m,fy:y,x:{value:v,reduce:g,zero:x,...w},y:{value:b,reduce:k,zero:M,...A},color:{value:L,color:$,reduce:S},size:{value:z,reduce:O},mark:E}=e;if(void 0===g&&(g=null==k&&null==v&&null==z&&null!=b?"count":null),void 0===k&&(k=null==g&&null==b&&null==z&&null!=v?"count":null),void 0!==O||null!=z||null!=S||null!=g||null!=k||null!=v&&!T(s)||null!=b&&!T(u)||(O="count"),void 0===x&&(x=!!ou(g)||void 0),void 0===M&&(M=!!ou(k)||void 0),null==v&&null==b)throw new Error("must specify x or y");if(null!=g&&null==b)throw new Error("reducing x requires y");if(null!=k&&null==v)throw new Error("reducing y requires x");switch(E=void 0===E?null!=z||null!=O?"dot":ou(g)||ou(k)||null!=S?"bar":null!=v&&null!=b?T(s)||T(u)||null==g&&null==k&&!iu(s)&&!iu(u)?"dot":"line":null!=v||null!=b?"rule":null:E){case"dot":p=Js,d="stroke";break;case"line":p=s&&u||null!=g||null!=k?M||null!=k||s&&iu(s)?ru:x||null!=g||u&&iu(u)?eu:tu:s?eu:ru,d="stroke",uu(c)&&(h=null);break;case"area":p=!M&&null==k&&(x||null!=g||u&&iu(u))?Os:Es,d="fill",uu(c)&&(h=null);break;case"rule":p=s?Sa:za,d="stroke";break;case"bar":p=null!=g?T(u)?su(g)&&s&&T(s)?Hs:Ys:wo:null!=k?T(s)?su(k)&&u&&T(u)?Hs:_s:bo:null!=S||null!=O?s&&T(s)&&u&&T(u)?Hs:s&&T(s)?_s:u&&T(u)?Ys:xo:!s||!he(s)||u&&he(u)?!u||!he(u)||s&&he(s)?Hs:_s:Ys,d="fill";break;default:throw new Error("invalid mark: "+E)}let R,C={fx:m,fy:y,x:s??void 0,y:u??void 0,[d]:c??$,z:h,r:f??void 0,tip:!0},N={[d]:S??void 0,r:O??void 0};if(null!=g&&null!=k)throw new Error("cannot reduce both x and y");return null!=k?(N.y=k,R=T(s)?Ue:rs):null!=g?(N.x=g,R=T(u)?Ve:ns):null==S&&null==O||(s&&u?R=T(s)&&T(u)?Ze:T(s)?ns:T(u)?rs:is:s?R=T(s)?Ue:rs:u&&(R=T(u)?Ve:ns)),R!==is&&R!==rs||(C.x={value:s,...w}),R!==is&&R!==ns||(C.y={value:u,...A}),void 0===x&&(x=s&&!(R===is||R===rs)&&(p===Ys||p===Os||p===wo||p===za)),void 0===M&&(M=u&&!(R===is||R===ns)&&(p===_s||p===Es||p===bo||p===Sa)),{fx:m??null,fy:y??null,x:{value:v??null,reduce:g??null,zero:!!x,...w},y:{value:b??null,reduce:k??null,zero:!!M,...A},color:{value:L??null,reduce:S??null,...void 0!==$&&{color:$}},size:{value:z??null,reduce:O??null},mark:E,markImpl:fu[p],markOptions:C,transformImpl:fu[R],transformOptions:N,colorMode:d}}function iu(t){let e,r;for(var n of t)if(null!=n)if(void 0===e)e=n;else{let t=Math.sign(G.ascending(e,n));if(t){if(void 0!==r&&t!==r)return;e=n,r=t}}return 1}function au(t,e){t=_(t,e.value);return t&&(t.label=Kt(e.value)),t}function lu(t){return(t=>{if(null!=t){if("function"==typeof t.reduceIndex)return 1;if("function"==typeof t.reduce&&x(t))return 1;if(/^p\d{2}$/i.test(t))return 1;switch((""+t).toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return 1}}})(t)?{reduce:t}:{value:t}}function ou(t){return/^(?:distinct|count|sum|proportion)$/i.test(t)}function su(t){return/^(?:first|last|mode)$/i.test(t)}function uu(t){return t&&new G.InternSet(t).size>t.length>>1}let cu={dot:Js,line:tu,lineX:eu,lineY:ru,areaX:Os,areaY:Es,ruleX:Sa,ruleY:za,barX:Ys,barY:_s,rect:xo,rectX:wo,rectY:bo,cell:Hs,bin:is,binX:rs,binY:ns,group:Ze,groupX:Ue,groupY:Ve},fu=Object.fromEntries(Object.entries(cu).map(([t,e])=>[e,t]));function hu(t,e={}){let{x:r,x1:n,x2:i}=e;void 0===r&&void 0===n&&void 0===i&&(e={...e,x:r=X});var a={};return null!=r&&(a.x=t),null!=n&&(a.x1=t),null!=i&&(a.x2=t),pu(a,e)}function du(t,e={}){let{y:r,y1:n,y2:i}=e;void 0===r&&void 0===n&&void 0===i&&(e={...e,y:r=X});var a={};return null!=r&&(a.y=t),null!=n&&(a.y1=t),null!=i&&(a.y2=t),pu(a,e)}function pu(t={},a={}){let l=Gt(a),o=Object.entries(t).map(([t,e])=>{var r=Qt(t,a);if(null==r)throw new Error("missing channel: "+t);var[n,i]=L(r);return{key:t,input:r,output:n,setOutput:i,map:(t=>{if(null==t)throw new Error("missing map");if("function"==typeof t.mapIndex)return t;var e;if("function"==typeof t.map&&x(t))return e=t,console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)};if("function"==typeof t)return mu(Vt(t));switch((""+t).toLowerCase()){case"cumsum":return yu;case"rank":return mu((t,e)=>G.rank(t,t=>e[t]));case"quantile":return mu((t,r)=>{{var n=t=>r[t];let e=G.count(t,n)-1;return G.rank(t,n).map(t=>t/e)}})}throw new Error("invalid map: "+t)})(e)}});return{...We(a,(e,r)=>{let n=_(e,l),i=o.map(({input:t})=>_(e,t)),a=o.map(({setOutput:t})=>t(new Array(e.length)));for(let t of r)for(let r of n?G.group(t,t=>n[t]).values():[t])o.forEach(({map:t},e)=>t.mapIndex(r,i[e],a[e]));return{data:e,facets:r}}),...Object.fromEntries(o.map(({key:t,output:e})=>[t,e]))}}function mu(e){return{mapIndex(r,t,n){var i=e(r,t);if(i.length!==r.length)throw new Error("map function returned a mismatched length");for(let t=0,e=r.length;t<e;++t)n[r[t]]=i[t]}}}let yu={mapIndex(t,e,r){let n=0;for(var i of t)r[i]=n+=e[i]}};function vu(t={}){let{k:e,reduce:r,shift:n,anchor:i,strict:a}=t="number"==typeof t?{k:t}:t;if(void 0===i&&void 0!==n&&ln(`Warning: the shift option is deprecated; please use anchor "${i=(t=>{switch((""+t).toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error("invalid shift: "+t)})(n)}" instead.`),0<(e=Math.floor(e)))return((t="mean")=>{if("string"==typeof t){if(/^p\d{2}$/i.test(t))return gu(Ot(t));switch(t.toLowerCase()){case"deviation":return gu(G.deviation);case"max":return xu((t,e)=>G.max(t,t=>e[t]));case"mean":return bu;case"median":return gu(G.median);case"min":return xu((t,e)=>G.min(t,t=>e[t]));case"mode":return xu((t,e)=>G.mode(t,t=>e[t]));case"sum":return wu;case"variance":return gu(G.variance);case"difference":return Au;case"ratio":return Lu;case"first":return $u;case"last":return Su}}if("function"!=typeof t)throw new Error("invalid reduce: "+t);return xu(Vt(t))})(r)(e,((t="middle",e)=>{switch((""+t).toLowerCase()){case"middle":return e-1>>1;case"start":return 0;case"end":return e-1}throw new Error("invalid anchor: "+t)})(i,e),a);throw new Error("invalid k: "+e)}function gu(s){return(l,o,t)=>t?{mapIndex(r,e,n){var i=t=>null==e[t]?NaN:+e[t];let a=0;for(let t=0;t<l-1;++t)isNaN(i(t))&&++a;for(let t=0,e=r.length-l+1;t<e;++t)isNaN(i(t+l-1))&&++a,n[r[t+o]]=0===a?s(Zt(r,t,t+l),i):NaN,isNaN(i(t))&&--a}}:{mapIndex(r,e,n){var i=t=>null==e[t]?NaN:+e[t];for(let t=-o;t<0;++t)n[r[t+o]]=s(Zt(r,0,t+l),i);for(let t=0,e=r.length-o;t<e;++t)n[r[t+o]]=s(Zt(r,t,t+l),i)}}}function xu(s){return(l,o,t)=>t?{mapIndex(r,n,i){let a=0;for(let t=0;t<l-1;++t)a+=y(n[r[t]]);for(let t=0,e=r.length-l+1;t<e;++t)(a+=y(n[r[t+l-1]]))===l&&(i[r[t+o]]=s(Zt(r,t,t+l),n)),a-=y(n[r[t]])}}:{mapIndex(r,n,i){for(let t=-o;t<0;++t)i[r[t+o]]=s(Zt(r,0,t+l),n);for(let t=0,e=r.length-o;t<e;++t)i[r[t+o]]=s(Zt(r,t,t+l),n)}}}function wu(u,c,t){return t?{mapIndex(r,n,i){let a=0,l=0;for(let e=0;e<u-1;++e){let t=n[r[e]];null===t||isNaN(t)?++a:l+=+t}for(let t=0,e=r.length-u+1;t<e;++t){var o=n[r[t]],s=n[r[t+u-1]];null===s||isNaN(s)?++a:l+=+s,i[r[t+c]]=0===a?l:NaN,null===o||isNaN(o)?--a:l-=+o}}}:{mapIndex(r,n,i){let a=0;var l=r.length;for(let t=0,e=Math.min(l,u-c-1);t<e;++t)a+=+n[r[t]]||0;for(let t=-c,e=l-c;t<e;++t)a+=+n[r[t+u-1]]||0,i[r[t+c]]=a,a-=+n[r[t]]||0}}}function bu(u,c,t){if(t){let e=wu(u,c,t);return{mapIndex(r,t,n){e.mapIndex(r,t,n);for(let t=0,e=r.length-u+1;t<e;++t)n[r[t+c]]/=u}}}return{mapIndex(n,i,a){let l=0,o=0;var s=n.length;for(let e=0,t=Math.min(s,u-c-1);e<t;++e){let t=i[n[e]];null===t||isNaN(t=+t)||(l+=t,++o)}for(let r=-c,t=s-c;r<t;++r){let t=i[n[r+u-1]],e=i[n[r]];null===t||isNaN(t=+t)||(l+=t,++o),a[n[r+c]]=l/o,null===e||isNaN(e=+e)||(l-=e,--o)}}}}function ku(e,r,n,t){for(var i=n+t;n<i;++n){let t=e[r[n]];if(null!==t&&!isNaN(t=+t))return t}}function Mu(r,n,t,i){for(let e=t+i-1;e>=t;--e){let t=r[n[e]];if(null!==t&&!isNaN(t=+t))return t}}function Au(o,s,t){return t?{mapIndex(r,n,i){for(let t=0,e=r.length-o;t<e;++t){var a=n[r[t]],l=n[r[t+o-1]];i[r[t+s]]=null===a||null===l?NaN:l-a}}}:{mapIndex(r,n,i){for(let t=-s,e=r.length-o+s+1;t<e;++t)i[r[t+s]]=Mu(n,r,t,o)-ku(n,r,t,o)}}}function Lu(o,s,t){return t?{mapIndex(r,n,i){for(let t=0,e=r.length-o;t<e;++t){var a=n[r[t]],l=n[r[t+o-1]];i[r[t+s]]=null===a||null===l?NaN:l/a}}}:{mapIndex(r,n,i){for(let t=-s,e=r.length-o+s+1;t<e;++t)i[r[t+s]]=Mu(n,r,t,o)/ku(n,r,t,o)}}}function $u(a,l,t){return t?{mapIndex(r,n,i){for(let t=0,e=r.length-a;t<e;++t)i[r[t+l]]=n[r[t]]}}:{mapIndex(r,n,i){for(let t=-l,e=r.length-a+l+1;t<e;++t)i[r[t+l]]=((e,r,n,t)=>{for(var i=n+t;n<i;++n){let t=e[r[n]];if(y(t))return t}})(n,r,t,a)}}}function Su(a,l,t){return t?{mapIndex(r,n,i){for(let t=0,e=r.length-a;t<e;++t)i[r[t+l]]=n[r[t+a-1]]}}:{mapIndex(r,n,i){for(let t=-l,e=r.length-a+l+1;t<e;++t)i[r[t+l]]=((r,n,t,i)=>{for(let e=t+i-1;e>=t;--e){let t=r[n[e]];if(y(t))return t}})(n,r,t,a)}}}let zu={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function Ou({n:t=zu.n,k:e=0,strict:r=zu.strict,anchor:n=zu.anchor}={}){return vu({k:t,reduce:t=>G.mean(t)+e*(G.deviation(t)||0),strict:r,anchor:n})}let Eu={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Ru extends r{constructor(t,e,r){super(t,e,r,Eu),Ki(this,r)}render(e,r,n,i,a){return F("svg:g",a).call(D,this,i,a).call(this._transform,this,r).call(t=>t.selectAll().data(e).enter().append("line").call(Y,this).attr("x1",this._x1(r,n,i)).attr("x2",this._x2(r,n,i)).attr("y1",this._y1(r,n,i)).attr("y2",this._y2(r,n,i)).call(N,this,n).call(oa,this,n,a)).node()}}class Cu extends Ru{constructor(t,e={}){var{x:r,y:n,inset:i=0,insetTop:a=i,insetBottom:i=i}=e;super(t,{x:{value:r,scale:"x"},y:{value:n,scale:"y",type:"band",optional:!0}},e),this.insetTop=O(a),this.insetBottom=O(i)}_transform(t,e,{x:r}){t.call(Q,e,{x:r},J,0)}_x1(t,{x:e}){return t=>e[t]}_x2(t,{x:e}){return t=>e[t]}_y1({y:t},{y:e},{marginTop:r}){let n=this.insetTop;return e&&t?t=>e[t]+n:r+n}_y2({y:e},{y:r},{height:t,marginBottom:n}){let i=this.insetBottom;return r&&e?t=>r[t]+e.bandwidth()-i:t-n-i}}class Nu extends Ru{constructor(t,e={}){var{x:r,y:n,inset:i=0,insetRight:a=i,insetLeft:i=i}=e;super(t,{y:{value:n,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},e),this.insetRight=O(a),this.insetLeft=O(i)}_transform(t,e,{y:r}){t.call(Q,e,{y:r},0,J)}_x1({x:t},{x:e},{marginLeft:r}){let n=this.insetLeft;return e&&t?t=>e[t]+n:r+n}_x2({x:e},{x:r},{width:t,marginRight:n}){let i=this.insetRight;return r&&e?t=>r[t]+e.bandwidth()-i:t-n-i}_y1(t,{y:e}){return t=>e[t]}_y2(t,{y:e}){return t=>e[t]}}function Tu(t,{x:e=X,...r}={}){return new Cu(t,{...r,x:e})}function Bu(t,{y:e=X,...r}={}){return new Nu(t,{...r,y:e})}function Iu(t){let e=Pu(t),r=Wu(t);return t.map(t=>t<e||t>r?t:NaN)}function Pu(t){let e=2.5*ju(t)-1.5*Fu(t);return G.min(t,t=>t>=e?t:NaN)}function Wu(t){let e=2.5*Fu(t)-1.5*ju(t);return G.max(t,t=>t<=e?t:NaN)}function ju(t){return G.quantile(t,.25)}function Fu(t){return G.quantile(t,.75)}let qu={ariaLabel:"raster",stroke:null,pixelSize:1};function Du(t,e){var r=+t;if(isNaN(r))throw new Error(`invalid ${e}: `+t);return r}function Yu(t,e){var r=Math.floor(t);if(isNaN(r))throw new Error(`invalid ${e}: `+t);return r}class _u extends r{constructor(t,e,r={},n){let{width:i,height:a,x:l,y:o,x1:s=null==l?0:void 0,y1:u=null==o?0:void 0,x2:c=null==l?i:void 0,y2:f=null==o?a:void 0,pixelSize:h=n.pixelSize,blur:d=0,interpolate:p}=r;if(null!=i&&(i=Yu(i,"width")),null!=a&&(a=Yu(a,"height")),null!=s&&(s=Du(s,"x1")),null!=u&&(u=Du(u,"y1")),null!=c&&(c=Du(c,"x2")),null!=f&&(f=Du(f,"y2")),null==l&&(null==s||null==c))throw new Error("missing x");if(null==o&&(null==u||null==f))throw new Error("missing y");var m,y,v,g,x,w,b;null!=t&&null!=i&&null!=a&&(void 0===l&&null!=s&&null!=c&&(l=(x=s,w=c,b=i,{transform(t){var e=t.length,r=new Float64Array(e),n=(w-x)/b,i=x+n/2;for(let t=0;t<e;++t)r[t]=t%b*n+i;return r}})),void 0===o)&&null!=u&&null!=f&&(o=(m=u,y=f,v=i,g=a,{transform(t){var e=t.length,r=new Float64Array(e),n=(y-m)/g,i=m+n/2;for(let t=0;t<e;++t)r[t]=Math.floor(t/v)%g*n+i;return r}})),super(t,{x:{value:l,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},x1:{value:null==s?null:[s],scale:"x",optional:!0,filter:null},y1:{value:null==u?null:[u],scale:"y",optional:!0,filter:null},x2:{value:null==c?null:[c],scale:"x",optional:!0,filter:null},y2:{value:null==f?null:[f],scale:"y",optional:!0,filter:null},...e},r,n),this.width=i,this.height=a,this.pixelSize=Du(h,"pixelSize"),this.blur=Du(d,"blur"),this.interpolate=null==l||null==o?null:(t=>{if("function"==typeof t)return t;if(null==t)return Zu;switch((""+t).toLowerCase()){case"none":return Zu;case"nearest":return Ku;case"barycentric":return Ju();case"random-walk":return tc()}throw new Error("invalid interpolate: "+t)})(p)}}class Gu extends _u{constructor(t,r={}){let e=r.imageRendering;if(null==t){let{fill:t,fillOpacity:e}=r;void 0!==P(e)[0]&&(r=Vu("fillOpacity",r)),void 0!==H(t)[0]&&(r=Vu("fill",r))}super(t,void 0,r,qu),this.imageRendering=j(e,"auto")}scale(t,{color:e,...r},n){return super.scale(t,r,n)}render(i,t,e,r,n){let a=t[e.channels.fill?.scale]??(t=>t),{x:l,y:o}=e,s=n.document,[u,c,f,h]=Hu(e,r,n),d=f-u,p=h-c,{pixelSize:m,width:y=Math.round(Math.abs(d)/m),height:v=Math.round(Math.abs(p)/m)}=this,g=y*v,{fill:x,fillOpacity:w}=e,b=0;if(this.interpolate){let e=y/d,r=v/p,t=C(l,t=>(t-u)*e,Float64Array),n=C(o,t=>(t-c)*r,Float64Array);x=x&&this.interpolate(i,y,v,t,n,x),w=w&&this.interpolate(i,y,v,t,n,w)}else null==this.data&&i&&(b=i.fi*g);let k=s.createElement("canvas");k.width=y,k.height=v;var e=k.getContext("2d"),i=e.createImageData(y,v),M=i.data;let{r:A,g:L,b:$}=G.rgb(this.fill)??{r:0,g:0,b:0},S=255*(this.fillOpacity??1);for(let r=0;r<g;++r){let e=r<<2;if(x){let t=a(x[r+b]);if(null==t){M[3+e]=0;continue}({r:A,g:L,b:$}=G.rgb(t))}w&&(S=255*w[r+b]),M[e]=A,M[1+e]=L,M[2+e]=$,M[3+e]=S}return 0<this.blur&&G.blurImage(i,this.blur),e.putImageData(i,0,0),F("svg:g",n).call(D,this,r,n).call(Q,this,t).call(t=>t.append("image").attr("transform",`translate(${u},${c}) scale(${Math.sign(f-u)},${Math.sign(h-c)})`).attr("width",Math.abs(d)).attr("height",Math.abs(p)).attr("preserveAspectRatio","none").call(B,"image-rendering",this.imageRendering).call(Y,this).attr("xlink:href",k.toDataURL())).node()}}function Xu(t,e,r){arguments.length<3&&(r=e,e=null);let{x:n,y:i,[t]:a,...l}=r;return void 0===n&&void 0===i&&(t=>{if(se(t))for(var e of t)if(null!=e)return"object"==typeof e&&"0"in e&&"1"in e})(e)&&(n=$t,i=St,void 0===a)&&(a=zt),[e,{...l,x:n,y:i,[t]:a}]}function Hu({x1:t,y1:e,x2:r,y2:n},i,{projection:a}){var{width:i,height:l,marginTop:o,marginRight:s,marginBottom:u,marginLeft:c}=i;return[t&&null==a?t[0]:c,e&&null==a?e[0]:o,r&&null==a?r[0]:i-s,n&&null==a?n[0]:l-u]}function Uu({x1:t,y1:e,x2:r,y2:n},i,a,l){var o={};return t&&(o.x1=t),e&&(o.y1=e),r&&(o.x2=r),n&&(o.y2=n),Hu(Sr(o,i),a,l)}function Vu(y,v={}){let{[y]:g}=v;if("function"!=typeof g)throw new Error(`invalid ${y}: not a function`);return Z({...v,[y]:void 0},function(t,e,r,n,i,a){var{x:l,y:o}=n;if(!l)throw new Error("missing scale: x");if(!o)throw new Error("missing scale: y");var[s,u,r,n]=Uu(r,n,i,a),i=r-s,a=n-u,r=this.pixelSize,{width:c=Math.round(Math.abs(i)/r),height:f=Math.round(Math.abs(a)/r)}=v,h=new Array(c*f*(e?e.length:1)),d=i/c,p=a/f;let m=0;for(let r of e??[void 0])for(let e=.5;e<f;++e)for(let t=.5;t<c;++t,++m)h[m]=g(l.invert(s+t*d),o.invert(u+e*p),r);return{data:h,facets:e,channels:{[y]:{value:h,scale:"auto"}}}})}function Zu(t,e,r,n,i,a){var l,o=new Array(e*r);for(l of t)n[l]<0||n[l]>=e||i[l]<0||i[l]>=r||(o[Math.floor(i[l])*e+Math.floor(n[l])]=a[l]);return o}function Ju({random:a=G.randomLcg(42)}={}){return(l,y,v,e,r,g)=>{let{points:x,triangles:w,hull:t}=G.Delaunay.from(l,t=>e[t],t=>r[t]),b=new g.constructor(y*v).fill(NaN),k=new Uint8Array(y*v),M=(n=a,he(i=g)||q(i)?ec:(s=n,(t,e,r,n,i,a,l,o)=>{l=s(l,o);return l<e?t:l<e+n?r:i}));var n,s;for(let a=0;a<w.length;a+=3){let t=w[a],e=w[a+1],r=w[a+2],o=x[2*t],s=x[2*e],u=x[2*r],c=x[2*t+1],f=x[2*e+1],h=x[2*r+1],n=Math.min(o,s,u),i=Math.max(o,s,u),d=Math.min(c,f,h),p=Math.max(c,f,h),m=(f-h)*(o-u)+(c-h)*(u-s);if(m){var A,L=g[l[t]],$=g[l[e]],S=g[l[r]];for(let l=Math.floor(n);l<i;++l)for(let a=Math.floor(d);a<p;++a)if(!(l<0||l>=y||a<0||a>=v)){let t=l+.5,r=a+.5,n=Math.sign(m),i=(f-h)*(t-u)+(r-h)*(u-s);if(!(i*n<0)){let e=(h-c)*(t-u)+(r-h)*(o-u);if(!(e*n<0)){let t=m-(i+e);t*n<0||(A=l+y*a,b[A]=M(L,i/m,$,e/m,S,t/m,l,a),k[A]=1)}}}}}{var o=b,P=k,z=e,O=r,u=g,c=y,W=v,i=t,f=l,j=M;z=Float64Array.from(i,t=>z[f[t]]),O=Float64Array.from(i,t=>O[f[t]]),u=Array.from(i,t=>u[f[t]]);var h,d,p,m,E,R,C,N,T=z.length,F=Array.from({length:T},(t,g)=>{{var x=z,w=O;let t=x.length,e=x.at(g-2),r=w.at(g-2),i=x.at(g-1),a=w.at(g-1),l=x[g],o=w[g],n=x.at(g+1-t),s=w.at(g+1-t),u=i-l,c=a-o,f=e-i,h=r-a,d=l-n,p=o-s,m=Math.hypot(u,c),y=Math.hypot(f,h),v=Math.hypot(d,p);return(t,e)=>{var r=t-i,n=e-a,t=t-l,e=e-o;return-1e-6<r*e-t*n&&-1e-6<Qu(r,n,u,c)*y-Qu(r,n,f,h)*m&&Qu(t,e,d,p)*m-Qu(t,e,u,c)*v<=0}}});let a=0;for(let i=0;i<W;++i){let n=i+.5;for(let r=0;r<c;++r){var B=r+c*i;if(!P[B]){let e=r+.5;for(let t=0;t<T;++t){var I=(T+a+(t%2?(t+1)/2:-t/2))%T;if(F[I](e,n)){h=z.at(I-1),d=O.at(I-1),p=z[I],m=O[I],E=e,R=n,N=C=void 0,p=(C=p-h)*(p-E)+(N=m-d)*(m-R),m=C*(E-h)+N*(R-d);let t=0<p&&0<m?p/(p+m):+(m<p);o[B]=j(u.at(I-1),t,u[I],1-t,u[I],0,r,i),a=I;break}}}}}}return b}}function Qu(t,e,r,n){return t*n-r*e}function Ku(n,i,t,e,r,a){var l=new a.constructor(i*t),o=G.Delaunay.from(n,t=>e[t],t=>r[t]);let s,u;for(let e=.5,r=0;e<t;++e){u=s;for(let t=.5;t<i;++t,++r)u=o.find(t,e,u),.5===t&&(s=u),l[r]=a[n[u]]}return l}function tc({random:y=G.randomLcg(42),minDistance:v=.5,maxSteps:g=2}={}){return(o,e,r,s,u,c)=>{var f=new c.constructor(e*r),h=G.Delaunay.from(o,t=>s[t],t=>u[t]);let d,p,m;for(let l=.5,t=0;l<r;++l){p=d;for(let a=.5;a<e;++a,++t){let e,r=a,n=l,i=(m=p=h.find(r,n,p),.5===a&&(d=p),0);for(;(e=Math.hypot(s[o[m]]-r,u[o[m]]-n))>v&&i<g;){let t=2*y(a,l,i)*Math.PI;r+=Math.cos(t)*e,n+=Math.sin(t)*e,m=h.find(r,n,m),++i}f[t]=c[o[m]]}}return f}}function ec(t,e,r,n,i,a){return e*t+n*r+a*i}let rc={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class nc extends _u{constructor(t,{smooth:e=!0,value:r,...n}={}){var M,i=Ai({},n,rc);if(void 0===r)for(let t in i)if(null!=i[t].value){if(void 0!==r)throw new Error("ambiguous contour value");r=n[t],n[t]="value"}if(null!=r){let e={transform:t=>t.map(t=>t.value),label:Kt(r)};for(let t in i)"value"===n[t]&&(n[t]=e)}if(null==t){if(null==r)throw new Error("missing contour value");n=Vu("value",{value:r,...n}),r=null}else{var a=n.interpolate;void 0===r&&(r=X),void 0===a&&(n.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},({thresholds:M,interval:a,...t}=[n][0],M=hs(M,a,G.thresholdSturges),Z(t,function(t,l,o,s,e,u){let[c,f,r,n]=Uu(o,s,e,u),i=r-c,a=n-f,{pixelSize:h,width:d=Math.round(Math.abs(i)/h),height:p=Math.round(Math.abs(a)/h)}=this,m=d/i,y=p/a,v=o.value.value,g=[];if(this.interpolate){let{x:t,y:e}=ui(o,s,u),r=C(t,t=>(t-c)*m,Float64Array),n=C(e,t=>(t-f)*y,Float64Array),i=[o.x,o.y,o.value],a=[r,n,v];for(let e of l){let t=this.filter(e,i,a);g.push(this.interpolate(t,d,p,r,n,v))}}else if(l){let e=d*p,r=l.length;for(let t=0;t<r;++t)g.push(v.slice(t*e,t*e+e))}else g.push(v);if(0<this.blur)for(let t of g)G.blur2({data:t,width:d,height:p},this.blur);var x=((t,e,r,n)=>{if("function"==typeof t?.range)return t.range(t.floor(r),n);if("number"!=typeof(t="function"==typeof t?t(e,r,n):t))return Bt(t);for(var i=G.ticks(...G.nice(r,n,t),t);i[i.length-1]>=n;)i.pop();for(;i[1]<r;)i.shift();return i})(M,v,...(e=g,[G.min(e,t=>G.min(t,ic)),G.max(e,t=>G.max(t,ic))]));if(null===x)throw new Error("unsupported thresholds: "+M);let w=G.contours().size([d,p]).smooth(this.smooth).contour,b=[],k=[];for(let e of g)k.push(G.range(b.length,b.push(...C(x,t=>w(e,t)))));for(let{coordinates:e}of b)for(let t of e)for(let e of t)for(let t of e)t[0]=t[0]/m+c,t[1]=t[1]/y+f;return{data:b,facets:k,channels:$r(this.contourChannels,b)}})),rc);var l={geometry:{value:X}};for(let r in this.channels){let t=this.channels[r],e=t.scale;"x"!==e&&"y"!==e&&"value"!==r&&(l[r]=t,delete this.channels[r])}this.contourChannels=l,this.smooth=!!e}filter(t,{x:e,y:r,value:n,...i},a){return super.filter(t,i,a)}render(e,t,r,n,i){let a=r.geometry,l=G.geoPath();return F("svg:g",i).call(D,this,n,i).call(Q,this,t).call(t=>{t.selectAll().data(e).enter().append("path").call(Y,this).attr("d",t=>l(a[t])).call(N,this,r)}).node()}}function ic(t){return isFinite(t)?t:NaN}function ac(t,e,r={}){var{x:n,y:i,maxRadius:a}=r,t=t({px:n,py:i,maxRadius:a}),a=[];null!=n&&a.push(Sa(e,oc("x",{...t,inset:-6},r))),null!=i&&a.push(za(e,oc("y",{...t,inset:-6},r))),null!=n&&a.push(Ia(e,sc("x",{...t,dy:9,frameAnchor:"bottom",lineAnchor:"top"},r))),null!=i&&a.push(Ia(e,sc("y",{...t,dx:-9,frameAnchor:"left",textAnchor:"end"},r)));for(let t of a)t.ariaLabel="crosshair "+t.ariaLabel;return K(...a)}function lc(t,{channels:e,...r},{facet:n,facetAnchor:i,fx:a,fy:l,[t]:o,channels:s,transform:u,initializer:c}){return{...r,facet:n,facetAnchor:i,fx:a,fy:l,[t]:o,channels:{...e,...s},transform:u,initializer:(h=t,null==(d=c)?d:function(t,e,{x:r,y:n,px:i,py:a,...l},...o){let{channels:{x:s,y:u,...c}={},...f}=d.call(this,t,e,{...l,x:i,y:a},...o);return{channels:{...c,...s&&{px:s,..."x"===h&&{x:s}},...u&&{py:u,..."y"===h&&{y:u}}},...f}})};var h,d}function oc(t,e,r){var{color:n="currentColor",opacity:i=.2,ruleStroke:n=n,ruleStrokeOpacity:i=i,ruleStrokeWidth:a}=r;return{...lc(t,e,r),stroke:n,strokeOpacity:i,strokeWidth:a}}function sc(t,e,r){var n,{color:i="currentColor",textFill:i=i,textFillOpacity:a,textStroke:l="var(--plot-background)",textStrokeOpacity:o,textStrokeWidth:s=5}=r;return{...lc(t,e,(n=t,e=r,Z(e,(t,e,r)=>({channels:{text:{value:Nr(r,n)?.value}}})))),fill:i,fillOpacity:a,stroke:l,strokeOpacity:o,strokeWidth:s}}let uc={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},cc={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},fc={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},hc={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},dc={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class pc extends r{constructor(t,e={}){var{x:r,y:n,z:i,curve:a,tension:l}=e;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},z:{value:i,optional:!0}},e,uc),this.curve=Ko(a,l),Ki(this,e)}render(e,t,d,r,p){let{x:n,y:i}=t,{x:a,y:l,z:o}=d,m=this.curve,[s,u]=ji(this,r),y=a?t=>a[t]:E(s),v=l?t=>l[t]:E(u),g=this;function c(r){let n=-1,i=[],a={};for(let t in d)a[t]=[];let l=[],o=[],s=[],u=[];function c(t,e){t=r[t],e=r[e],i.push(++n),l[n]=y(t),s[n]=v(t),o[n]=y(e),u[n]=v(e);for(let t in d)a[t].push(d[t][e])}var{halfedges:f,hull:e,triangles:h}=G.Delaunay.from(r,y,v);for(let e=0;e<f.length;++e){let t=f[e];t>e&&c(h[e],h[t])}for(let t=0;t<e.length;++t)c(e[t],e[(t+1)%e.length]);G.select(this).selectAll().data(i).enter().append("path").call(Y,g).attr("d",t=>{var e=G.pathRound(),r=m(e);return r.lineStart(),r.point(l[t],s[t]),r.point(o[t],u[t]),r.lineEnd(),e}).call(N,g,a).call(oa,g,a,p)}return F("svg:g",p).call(D,this,r,p).call(Q,this,{x:a&&n,y:l&&i}).call(o?t=>t.selectAll().data(G.group(e,t=>o[t]).values()).enter().append("g").each(c):t=>t.datum(e).each(c)).node()}}class mc extends r{constructor(t,e={},r,n=({z:t})=>t){var{x:i,y:a}=e;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},z:{value:n(e),optional:!0}},e,r)}render(e,t,r,n,i){let{x:a,y:l}=t,{x:o,y:s,z:u}=r,[c,f]=ji(this,n),h=o?t=>o[t]:E(c),d=s?t=>s[t]:E(f),p=this;function m(t){var e=G.Delaunay.from(t,h,d);G.select(this).append("path").datum(t[0]).call(Y,p).attr("d",p._render(e,n)).call(N,p,r)}return F("svg:g",i).call(D,this,n,i).call(Q,this,{x:o&&a,y:s&&l}).call(u?t=>t.selectAll().data(G.group(e,t=>u[t]).values()).enter().append("g").each(m):t=>t.datum(e).each(m)).node()}}class yc extends mc{constructor(t,e={}){super(t,e,cc),this.fill="none"}_render(t){return t.render()}}class vc extends mc{constructor(t,e={}){super(t,e,fc,Gt)}_render(t){return t.renderHull()}}class gc extends r{constructor(t,e={}){var{x:r,y:n,z:i}=e;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},z:{value:i,optional:!0}},Z(e,function(t,e,r,n,i,a){let{x:l,y:o,z:s}=r,u=({x:l,y:o}=ui(r,n,a),s=s?.value,new Array((l??o).length).fill(null)),[c,f]=ji(this,i),h=l?t=>l[t]:E(c),d=o?t=>o[t]:E(f);for(var p of e){l&&(p=p.filter(t=>y(h(t)))),o&&(p=p.filter(t=>y(d(t))));for(let[,n]of rr(p,s)){let r=wc(G.Delaunay.from(n,h,d),i);for(let t=0,e=n.length;t<e;++t)u[n[t]]=r.renderCell(t)}}return{data:t,facets:e,channels:{cells:{value:u}}}}),hc)}render(e,t,r,n,i){let{x:a,y:l}=t,{x:o,y:s,cells:u}=r;return F("svg:g",i).call(D,this,n,i).call(Q,this,{x:o&&a,y:s&&l}).call(t=>{t.selectAll().data(e).enter().append("path").call(Y,this).attr("d",t=>u[t]).call(N,this,r)}).node()}}class xc extends mc{constructor(t,e){super(t,e,dc),this.fill="none"}_render(t,e){return wc(t,e).render()}}function wc(t,e){var{width:e,height:r,marginTop:n,marginRight:i,marginBottom:a,marginLeft:l}=e;return t.voronoi([l,n,e-i,r-a])}function bc(t,e,{x:r,y:n,...i}={}){return[r,n]=a(r,n),new t(e,{...i,x:r,y:n})}let kc={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Mc extends r{constructor(t,{x:e,y:r,z:n,weight:i,fill:a,stroke:l,...o}={}){var s=Lc(a)&&(a="currentColor",!0),u=Lc(l)&&(l="currentColor",!0);super(t,{x:{value:e,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:Gt({z:n,fill:a,stroke:l}),optional:!0},weight:{value:i,optional:!0}},((t,M,A)=>{let{bandwidth:L,thresholds:$}=t;return L=void 0===L?20:+L,$=void 0===$?20:"function"==typeof $?.[Symbol.iterator]?S($):+$,Z(t,function(t,e,i,r,n,a){let l=i.weight?S(i.weight.value):null,o=i.z?.value,s=this.z,[u,c]=ji(this,n),{width:f,height:h}=n,{x:d,y:p}=ui(i,r,a),m=Object.fromEntries(Object.entries(i).filter(([t])=>!Ac.has(t)).map(([t,e])=>[t,{...e,value:[]}])),y=M&&[],v=A&&[],g=G.contourDensity().x(d?t=>d[t]:u).y(p?t=>p[t]:c).weight(l?t=>l[t]:1).size([f,h]).bandwidth(L),x=[];for(let t of e){let r=[];x.push(r);for(let e of o?zi(t,o,s):[t]){let t=g.contours(e);r.push([e,t])}}let w=$;if(!(w instanceof ht)){let r=0;for(let t of x)for(let[,e]of t){let t=e.max;t>r&&(r=t)}w=Float64Array.from({length:$-1},(t,e)=>100*r*(e+1)/$)}var b=[],k=[];for(let t of x){let n=[];b.push(n);for(let[e,r]of t)for(let t of w){n.push(k.length),k.push(r(t/100)),y&&y.push(t),v&&v.push(t);for(let t in m)m[t].value.push(i[t].value[e[0]])}}return y&&y.push(0),v&&v.push(0),{data:t,facets:b,channels:{...m,...y&&{fill:{value:y,scale:"color"}},...v&&{stroke:{value:v,scale:"color"}},contours:{value:k}}}})})({...o,fill:a,stroke:l},s,u),kc),s&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=n}filter(t){return t}render(e,t,r,n,i){let a=r.contours,l=G.geoPath();return F("svg:g",i).call(D,this,n,i).call(Q,this,{}).call(t=>t.selectAll().data(e).enter().append("path").call(Y,this).call(N,this,r).attr("d",t=>l(a[t]))).node()}}let Ac=new Set(["x","y","z","weight"]);function Lc(t){return/^density$/i.test(t)}function $c(t,e,{x1:r,x2:n,y1:i,y2:a,x:l=void 0===r&&void 0===n?"y"===t?b:X:void 0,y:o=void 0===i&&void 0===a?"x"===t?b:X:void 0,fill:s,positiveFill:u="#3ca951",negativeFill:c="#4269d0",fillOpacity:f=1,positiveFillOpacity:h=f,negativeFillOpacity:d=f,stroke:p,strokeOpacity:m,z:y=H(p)[0],clip:v,tip:g,render:x,...w}={}){return[r,n]=Sc(l,r,n),[i,a]=Sc(o,i,a),r===n&&i===a&&("y"===t?i=zc(0):r=zc(0)),g=qi({tip:g},"y"===t?"x":"y").tip,K(W(u)?null:Object.assign(zs(e,{x1:r,x2:n,y1:i,y2:a,z:y,fill:u,fillOpacity:h,render:Fi(x,Oc(t,!0)),clip:v,...w}),{ariaLabel:"positive difference"}),W(c)?null:Object.assign(zs(e,{x1:r,x2:n,y1:i,y2:a,z:y,fill:c,fillOpacity:d,render:Fi(x,Oc(t,!1)),clip:v,...w}),{ariaLabel:"negative difference"}),tu(e,{x:n,y:a,z:y,stroke:p,strokeOpacity:m,tip:g,clip:!0,...w}))}function Sc(t,e,r){return void 0===e&&void 0===r?e=r=zc(t):void 0===e?(r=zc(r),e=void 0===t?r:zc(t)):r=void 0===r?(e=zc(e),void 0===t?e:zc(t)):(e=zc(e),zc(r)),[e,r]}function zc(t){let e,{value:r,label:n=Kt(r)}=oe(t);return{transform:t=>e=e||_(t,r),label:n}}function Oc(d,p){let t="x"===d?"y":"x",m=t+"1",y=t+"2",v=d+"1",g=d+"2";return(t,e,r,n,i,a)=>{var{[m]:l,[y]:o}=r,s=new Float32Array(l.length),u=new Float32Array(o.length),c=n["y"===d?"height":"width"],c=((p===bn(e[d])<0?s:u).fill(c),a(t,e,{...r,[y]:l,[g]:u},n,i)),l=a(t,e,{...r,[m]:o,[v]:s},n,i),f=c.querySelector("g")??c,h=l.querySelector("g")??l;for(let r=0;f.firstChild;r+=2){let t=Mi(),e=F("svg:clipPath",i).attr("id",t).node();e.appendChild(f.firstChild),h.childNodes[r].setAttribute("clip-path",`url(#${t})`),h.insertBefore(e,h.childNodes[r])}return l}}function Ec({geometry:e=X,...t}={}){let f=hi(t=>_(t,e));return Z({...t,x:null,y:null,geometry:{transform:f}},(t,e,r,n,i,{projection:a})=>{var l=f(t),o=l.length,s=new Float64Array(o),u=new Float64Array(o),c=G.geoPath(a);for(let t=0;t<o;++t)[s[t],u[t]]=c.centroid(l[t]);return{data:t,facets:e,channels:{x:{value:s,scale:null==a?"x":null,source:null},y:{value:u,scale:null==a?"y":null,source:null}}}})}let Rc={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Cc extends r{constructor(t,e={}){var[r,n]=P(e.r,3);super(t,{x:{value:e.tip?e.x:null,scale:"x",optional:!0},y:{value:e.tip?e.y:null,scale:"y",optional:!0},r:{value:r,scale:"r",filter:M,optional:!0},geometry:{value:e.geometry,scale:"projection"}},Vs(e),Rc),this.r=n}render(e,t,r,n,i){let{geometry:a,r:l}=r,o=i.path(),s=this.r;return A(s)?e=[]:void 0!==s&&o.pointRadius(s),F("svg:g",i).call(D,this,n,i).call(Q,this,t).call(t=>{t.selectAll().data(e).enter().append("path").call(Y,this).attr("d",l?t=>o.pointRadius(l[t])(a[t]):t=>o(a[t])).call(N,this,r)}).node()}}function Nc(t,e={}){return e.tip&&void 0===e.x&&void 0===e.y?e=Ec(e):void 0===e.geometry&&(e={...e,geometry:X}),new Cc(t,e)}let Tc={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};class Bc extends r{constructor({binWidth:t=20,clip:e=!0,...r}={}){super(kt,void 0,{clip:e,...r},Tc),this.binWidth=O(t)}render(t,e,r,n,i){var a=this.binWidth,{marginTop:l,marginRight:o,marginBottom:s,marginLeft:u,width:c,height:f}=n,u=u-.5,c=c-o-.5,o=+l,l=f-s,h=a/2,f=h*Ce,s=f/2,d=2*h,p=1.5*f,m=Math.floor(u/d),y=Math.ceil(c/d),a=Math.floor((o+s)/p),v=Math.ceil((l-s)/p)+1,g=`m0,${Ic(-f)}l${Ic(h)},${Ic(s)}v${Ic(f)}l${Ic(-h)},`+Ic(s);let x=g;for(let e=a;e<v;++e)for(let t=m;t<y;++t)x+=`M${Ic(t*d+(1&e)*h)},`+Ic(e*p)+g;return F("svg:g",i).datum(0).call(D,this,n,i).call(Q,this,{},J+.5,J+0).call(t=>t.append("path").call(Y,this).call(N,this,r).attr("d",x)).node()}}function Ic(t){return Math.round(1e3*t)/1e3}let Pc={ariaLabel:"image",fill:null,stroke:null};class Wc extends r{constructor(t,e={}){let{x:r,y:n,r:i,width:a,height:l,rotate:o,src:s,preserveAspectRatio:u,crossOrigin:c,frameAnchor:f,imageRendering:h}=e;void 0===(i=null==i?void 0:i)&&void 0===a&&void 0===l?a=l=16:void 0===a&&void 0!==l?a=l:void 0===l&&void 0!==a&&(l=a);var[d,p]="string"==typeof(d=s)&&(/^\.*\//.test(d)||/^(blob|data|file|http|https):/i.test(d))?[void 0,d]:[d,void 0],[m,y]=P(i),[v,g]=P(a,void 0!==y?2*y:void 0),[x,w]=P(l,void 0!==y?2*y:void 0),[b,k]=P(o,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:n,scale:"y",optional:!0},r:{value:m,scale:"r",filter:M,optional:!0},width:{value:v,filter:M,optional:!0},height:{value:x,filter:M,optional:!0},rotate:{value:b,optional:!0},src:{value:d,optional:!0}},Vs(e),Pc),this.src=p,this.width=g,this.rotate=k,this.height=w,this.r=y,this.preserveAspectRatio=j(u,"xMidYMid"),this.crossOrigin=I(c),this.frameAnchor=xe(f),this.imageRendering=j(h,"auto")}render(e,t,r,n,i){let{x:a,y:l}=t,{x:o,y:s,width:u,height:c,r:f,rotate:h,src:d}=r,{r:p,width:m,height:y,rotate:v}=this,[g,x]=ji(this,n);return F("svg:g",i).call(D,this,n,i).call(Q,this,{x:o&&a,y:s&&l}).call(t=>t.selectAll().data(e).enter().append("image").call(Y,this).attr("x",jc(o,u,f,g,m,p)).attr("y",jc(s,c,f,x,y,p)).attr("width",u?t=>u[t]:void 0!==m?m:f?t=>2*f[t]:2*p).attr("height",c?t=>c[t]:void 0!==y?y:f?t=>2*f[t]:2*p).attr("transform",h?t=>`rotate(${h[t]})`:v?`rotate(${v})`:null).attr("transform-origin",h||v?Ea`${o?t=>o[t]:g}px ${s?t=>s[t]:x}px`:null).call(B,"href",d?t=>d[t]:this.src).call(B,"preserveAspectRatio",this.preserveAspectRatio).call(B,"crossorigin",this.crossOrigin).call(B,"image-rendering",this.imageRendering).call(B,"clip-path",f?t=>`circle(${f[t]}px)`:void 0!==p?`circle(${p}px)`:null).call(N,this,r)).node()}}function jc(e,r,n,i,a,l){return r&&e?t=>e[t]-r[t]/2:r?t=>i-r[t]/2:e&&void 0!==a?t=>e[t]-a/2:void 0!==a?i-a/2:n&&e?t=>e[t]-n[t]:n?t=>i-n[t]:e?t=>e[t]-l:i-l}function Fc(t,e,r){for(var n,i,a=1e-30,l=1,o=e+r,s=e+1,u=e-1,c=1,f=1-o*t/s,h=f=1/(f=Math.abs(f)<a?a:f);l<=100&&(f=1+(n=l*(r-l)*t/((u+(i=2*l))*(e+i)))*f,c=1+n/c,h*=(f=1/(f=Math.abs(f)<a?a:f))*(c=Math.abs(c)<a?a:c),f=1+(n=-(e+l)*(o+l)*t/((e+i)*(s+i)))*f,c=1+n/c,h*=i=(f=1/(f=Math.abs(f)<a?a:f))*(c=Math.abs(c)<a?a:c),!(Math.abs(i-1)<3e-7));l++);return h}function qc(t){var e,r=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015,a=(e=t=t)+5.5;for(a-=(t+.5)*Math.log(a);r<6;r++)i+=n[r]/++e;return Math.log(2.506628274631*i/t)-a}function Dc(t,e){var r=((t,e)=>{var r,n,i,a,l,o,s,u,c,f,h=e-1,d=0;if(t<=0)return 0;if(1<=t)return 1;for(l=Math.log(e/(.5+e)),r=Math.log(.5/(.5+e)),a=t<(n=Math.exp(e*l)/e)/(l=n+(i=Math.exp(.5*r)/.5))?Math.pow(e*l*t,1/e):1-Math.pow(.5*l*(1-t),2),o=-qc(e)-qc(.5)+qc(.5+e);d<10;d++){if(0===a||1===a)return a;if(1<=(a=(a-=(u=e,c=.5,f=void 0,f=0===(s=a)||1===s?0:Math.exp(qc(u+c)-qc(u)-qc(c)+u*Math.log(s)+c*Math.log(1-s)),n=(i=((!(s<0||1<s)&&(s<(u+1)/(u+c+2)?f*Fc(s,u,c)/u:1-f*Fc(1-s,c,u)/c))-t)/(n=Math.exp(h*Math.log(a)+-.5*Math.log(1-a)+o)))/(1-.5*Math.min(1,i*(h/a- -.5/(1-a))))))<=0?.5*(a+n):a)&&(a=.5*(a+n+1)),Math.abs(n)<1e-8*a&&0<d)break}return a})(2*Math.min(t,1-t),.5*e),r=Math.sqrt(e*(1-r)/r);return.5<t?r:-r}let Yc={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class _c extends r{constructor(t,e={}){var{x:r,y:n,z:i,ci:a=.95,precision:l=4}=e;if(super(t,{x:{value:r,scale:"x"},y:{value:n,scale:"y"},z:{value:Gt(e),optional:!0}},e,Yc),this.z=i,this.ci=+a,this.precision=+l,!(0<=this.ci&&this.ci<1))throw new Error("invalid ci; not in [0, 1): "+a);if(!(0<this.precision))throw new Error("invalid precision: "+l)}render(e,t,r,n,i){let{x:a,y:l,z:o}=r,s=this.ci;return F("svg:g",i).call(D,this,n,i).call(Q,this,t).call(t=>t.selectAll().data(o?zi(e,o,this.z):[e]).enter().call(t=>t.append("path").attr("fill","none").call(Y,this).call(Si,this,{...r,fill:null,fillOpacity:null}).attr("d",t=>this._renderLine(t,a,l)).call(s&&!ve(this.fill)?t=>t.select(Gc).attr("stroke","none").call(Y,this).call(Si,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",t=>this._renderBand(t,a,l)):()=>{}))).node()}}function Gc(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(G.namespaces.svg,"path"),this)}class Xc extends _c{constructor(t,e){super(t,e)}_renderBand(t,e,r){let{ci:n,precision:i}=this,[a,l]=G.extent(t,t=>r[t]),o=Uc(t,r,e),s=Vc(t,r,e,(1-n)/2,o);return G.area().y(t=>t).x0(t=>s(t,-1)).x1(t=>s(t,1))(G.range(a,l-i/2,i).concat(l))}_renderLine(t,e,r){var[n,i]=G.extent(t,t=>r[t]),t=Uc(t,r,e);return`M${t(n)},${n}L${t(i)},`+i}}class Hc extends _c{constructor(t,e){super(t,e)}_renderBand(t,e,r){let{ci:n,precision:i}=this,[a,l]=G.extent(t,t=>e[t]),o=Uc(t,e,r),s=Vc(t,e,r,(1-n)/2,o);return G.area().x(t=>t).y0(t=>s(t,-1)).y1(t=>s(t,1))(G.range(a,l-i/2,i).concat(l))}_renderLine(t,e,r){var[n,i]=G.extent(t,t=>e[t]),t=Uc(t,e,r);return`M${n},${t(n)}L${i},`+t(i)}}function Uc(t,n,i){let a=0,l=0,o=0,s=0;for(let r of t){let t=n[r],e=i[r];a+=t,l+=e,o+=t*e,s+=t*t}let e=t.length,r=(e*o-a*l)/(e*s-a*a),u=(l-r*a)/e;return t=>r*t+u}function Vc(n,e,r,t,i){let a=G.sum(n,t=>e[t])/n.length,l=0,o=0;for(let t of n)l+=(e[t]-a)**2,o+=(r[t]-i(e[t]))**2;let s=Math.sqrt(o/(n.length-2)),u=Dc(t,n.length-2);return(t,e)=>{var r=i(t),t=s*Math.sqrt(1/n.length+(t-a)**2/l);return r+e*u*t}}function Zc({path:r=X,delimiter:t,frameAnchor:e,treeLayout:h=G.tree,treeSort:d,treeSeparation:p,treeAnchor:m,treeFilter:y,...n}={}){m=Qc(m),d=ef(d),null!=y&&(y=sf(y)),void 0===e&&(e=m.frameAnchor);let v=nf(t),g=wf(n,sf),[i,x]=L(),[a,w]=L();return{x:i,y:a,frameAnchor:e,...We(n,(e,t)=>{let n=v(_(e,r)),i=x([]),a=w([]),l=-1;var o=[],s=[],u=G.stratify().path(t=>n[t]),c=pt(e)?t=>t.data=e[t.data]:t=>t.data=e.get(t.data),f=h();f.nodeSize&&f.nodeSize([1,1]),f.separation&&void 0!==p&&f.separation(p??At);for(let t of g)t[xf]=t[vf]([]);for(let e of t){let t=[],r=u(e.filter(t=>null!=n[t])).each(c);null!=d&&r.sort(d),f(r);for(let e of r.descendants())if(null==y||y(e)){t.push(++l),o[l]=e.data,m.position(e,l,i,a);for(let t of g)t[xf][l]=t[gf](e)}s.push(t)}return{data:o,facets:s}}),...Object.fromEntries(g)}}function Jc({path:e=X,delimiter:t,curve:r="bump-x",stroke:n="#555",strokeWidth:i=1.5,strokeOpacity:a=.5,treeLayout:p=G.tree,treeSort:m,treeSeparation:y,treeAnchor:v,treeFilter:g,...l}={}){v=Qc(v),m=ef(m),null!=g&&(g=uf(g)),l={curve:r,stroke:n,strokeWidth:i,strokeOpacity:a,...l};let x=nf(t),w=wf(l,uf),[o,b]=L(),[s,k]=L(),[u,M]=L(),[c,A]=L();return{x1:o,x2:s,y1:u,y2:c,...We(l,(r,t)=>{let i=x(_(r,e)),a=b([]),l=k([]),o=M([]),s=A([]),u=-1;var c=[],f=[],h=G.stratify().path(t=>i[t]),d=p();d.nodeSize&&d.nodeSize([1,1]),d.separation&&void 0!==y&&d.separation(y??At);for(let t of w)t[xf]=t[vf]([]);for(let e of t){let t=[],n=h(e.filter(t=>null!=i[t])).each(t=>t.data=r[t.data]);null!=m&&n.sort(m),d(n);for(let{source:e,target:r}of n.links())if(null==g||g(r,e)){t.push(++u),c[u]=r.data,v.position(e,u,a,o),v.position(r,u,l,s);for(let t of w)t[xf][u]=t[gf](r,e)}f.push(t)}return{data:c,facets:f}}),...Object.fromEntries(w)}}function Qc(t="left"){switch((""+t).trim().toLowerCase()){case"left":return Kc;case"right":return tf}throw new Error("invalid tree anchor: "+t)}let Kc={frameAnchor:"left",dx:6,position({x:t,y:e},r,n,i){n[r]=e,i[r]=-t}},tf={frameAnchor:"right",dx:-6,position({x:t,y:e},r,n,i){n[r]=-e,i[r]=-t}};function ef(t){return null==t||"function"==typeof t?t:(""+t).trim().toLowerCase().startsWith("node:")?rf(sf(t)):rf((e=t,t=>t.data?.[e]));var e}function rf(r){return(t,e)=>s(r(t),r(e))}function nf(t="/"){if("/"==(t=""+t))return t=>t;if(1!==t.length)throw new Error("delimiter must be exactly one character");let e=t.charCodeAt(0);return t=>t.map(t=>{{var n=t,i=e;if(i===af)throw new Error("delimiter cannot be backslash");let r=!1;for(let t=0,e=n.length;t<e;++t){switch(n.charCodeAt(t)){case af:if(r)break;r=!0;continue;case i:r?(n=n.slice(0,t-1)+n.slice(t),--t,--e):n=n.slice(0,t)+"/"+n.slice(t+1);break;case lf:r?(n=n.slice(0,t)+"\\\\"+n.slice(t),t+=2,e+=2):(n=n.slice(0,t)+"\\"+n.slice(t),++t,++e)}r=!1}return n}})}let af=92,lf=47;function of(t){return x(t)&&"function"==typeof t.node}function sf(t){if(of(t))return t.node;if((t=(""+t).trim().toLowerCase()).startsWith("node:")){switch(t){case"node:name":return ff;case"node:path":return cf;case"node:internal":return pf;case"node:external":return mf;case"node:depth":return hf;case"node:height":return df}throw new Error("invalid node value: "+t)}}function uf(t){if(of(t))return t.node;if(x(e=t)&&"function"==typeof e.link)return t.link;var e;if((t=(""+t).trim().toLowerCase()).startsWith("node:")||t.startsWith("parent:")){switch(t){case"parent:name":return yf(ff);case"parent:path":return yf(cf);case"parent:depth":return yf(hf);case"parent:height":return yf(df);case"node:name":return ff;case"node:path":return cf;case"node:internal":return pf;case"node:external":return mf;case"node:depth":return hf;case"node:height":return df}throw new Error("invalid link value: "+t)}}function cf(t){return t.id}function ff(e){{var n=e.id;let t=n.length;for(;0<--t&&!((e,r)=>{if("/"===e[r]){let t=0;for(;0<r&&"\\"===e[--r];)++t;if(!(1&t))return 1}})(n,t););{var i=n.slice(t+1);let r=!1;for(let t=0,e=i.length;t<e;++t){switch(i.charCodeAt(t)){case af:if(!r){r=!0;continue}case lf:r&&(i=i.slice(0,t-1)+i.slice(t),--t,--e)}r=!1}return i}}}function hf(t){return t.depth}function df(t){return t.height}function pf(t){return!!t.children}function mf(t){return!t.children}function yf(r){return(t,e)=>null==e?void 0:r(e)}let vf=2,gf=3,xf=4;function wf(t,e){var r,n=[];for(r in t){var i=t[r],a=e(i);void 0!==a&&n.push([r,...L(i),a])}return n}function bf(e,{fill:r,stroke:t,strokeWidth:n,strokeOpacity:i,strokeLinejoin:a,strokeLinecap:l,strokeMiterlimit:o,strokeDasharray:s,strokeDashoffset:u,marker:c,markerStart:f=c,markerEnd:h=c,dot:d=W(f)&&W(h),text:p="node:name",textStroke:m="var(--plot-background)",title:y="node:path",dx:v,dy:g,textAnchor:x,treeLayout:w=G.tree,textLayout:b=w===G.tree||w===G.cluster?"mirrored":"normal",tip:k,...M}={}){if(void 0===v&&(v=Qc(M.treeAnchor).dx),void 0!==x)throw new Error("textAnchor is not a configurable tree option");function A(t){return Ia(e,Zc({treeLayout:w,text:p,fill:void 0===r?"currentColor":r,stroke:m,dx:v,dy:g,title:y,...t,...M}))}return b=R(b,"textLayout",["mirrored","normal"]),K(Ns(e,Jc({treeLayout:w,markerStart:f,markerEnd:h,stroke:void 0!==t?t:void 0===r?"node:internal":r,strokeWidth:n,strokeOpacity:i,strokeLinejoin:a,strokeLinecap:l,strokeMiterlimit:o,strokeDasharray:s,strokeDashoffset:u,...M})),d?Js(e,Zc({treeLayout:w,fill:void 0===r?"node:internal":r,title:y,tip:k,...M})):null,null!=p?"mirrored"===b?[A({textAnchor:"start",treeFilter:"node:external"}),A({textAnchor:"end",treeFilter:"node:internal",dx:-v})]:A():null)}let kf={ariaLabel:"waffle"};class Mf extends qs{constructor(t,{unit:e=1,gap:r=1,round:n,multiple:i,...a}={}){super(t,Lf("x",a),kf),this.unit=Math.max(0,e),this.gap=+r,this.round=Sf(n),this.multiple=zf(i)}}class Af extends Ds{constructor(t,{unit:e=1,gap:r=1,round:n,multiple:i,...a}={}){super(t,Lf("y",a),kf),this.unit=Math.max(0,e),this.gap=+r,this.round=Sf(n),this.multiple=zf(i)}}function Lf(z,t){let O="y"===z?"x":"y",E=z+"1",R=z+"2";return Z(({render:t,...e}=[t][0],{...e,render:Fi(t,function(e,t,r,n,i){let{gap:a,rx:l,ry:o}=this,{channels:s,ariaLabel:u,href:c,title:f,...h}=r,d=i.document,p=s.polygon.value,[m,y]=s.cx.value,[v,g]=s.cy.value,x="plot-pattern-"+ ++ki,w=d.createElementNS(G.namespaces.svg,"pattern");w.setAttribute("width",m),w.setAttribute("height",v),w.setAttribute("patternUnits","userSpaceOnUse");r=w.appendChild(d.createElementNS(G.namespaces.svg,"rect"));return r.setAttribute("x",a/2),r.setAttribute("y",a/2),r.setAttribute("width",m-a),r.setAttribute("height",v-a),null!=l&&r.setAttribute("rx",l),null!=o&&r.setAttribute("ry",o),F("svg:g",i).call(D,this,n,i).call(this._transform,this,t).call(t=>t.selectAll().data(e).enter().append(()=>w.cloneNode(!0)).attr("id",t=>x+"-"+t).select("rect").call(Y,this).call(N,this,h)).call(t=>t.selectAll().data(e).enter().append("path").attr("transform",Ea`translate(${y},${g})`).attr("d",t=>`M${p[t].join("L")}Z`).attr("fill",t=>`url(#${x}-${t})`).attr("stroke",null==this.stroke?null:"none").call(N,this,{ariaLabel:u,href:c,title:f})).node()})}),function(t,e,r,n,i){let{round:a,unit:l}=this,o=r[E].value,s=r[R].value,u=Sr({...O in r&&{[O]:r[O]},[E]:r[E],[R]:r[R]},n),c=this["y"===z?"_width":"_height"](n,u,i),f=this["y"===z?"_x":"_y"](n,u,i),h=l*({domain:i,range:S}=[n.scales[z]][0],Of(S)/Of(i)),{multiple:d=Math.max(1,Math.floor(Math.sqrt(c/h)))}=this,p=Math.min(c/d,h*d),m=h*d,y=(c-d*p)/2,v="function"==typeof f?t=>f(t)+y:f+y,g=n[z](0),x="y"===z?([t,e])=>[t*p,-e*m]:([t,e])=>[e*m,t*p],w="function"==typeof v?t=>v(t)-c/2:()=>v,[b,k]="y"===z?[0,1]:[1,0],M=s.length,A=new Array(M),L=new Float64Array(M),$=new Float64Array(M);var S;for(let e=0;e<M;++e){A[e]=function i(t,e,r){if(e<t)return i(e,t,r);if(t<0)return((t,e,r,n)=>i(t+n*r,e+n*r,r).map(([t,e])=>[t,e-n]))(t,e,r,Math.ceil(-Math.min(t,e)/r));let n=Math.floor(t%r),a=Math.ceil(t%r),l=Math.floor(e%r),o=Math.ceil(e%r),s=Math.floor(t/r),u=Math.ceil(t/r),c=Math.floor(e/r),f=Math.ceil(e/r),h=[];return f>u&&h.push([0,u]),h.push([n,u],[n,s+t%1],[a,s+t%1]),r-1<t%r||(h.push([a,s]),c>s&&h.push([r,s])),c>s&&h.push([r,c]),h.push([o,c],[o,c+e%1],[l,c+e%1]),e%r<1||(h.push([l,f]),f>u&&h.push([0,f])),h.push(((t,e,r)=>{let n=Math.floor(e/r)-Math.floor(t/r);return 0==n?$f(t,e,r):1==n?Math.floor(e%r)>Math.ceil(t%r)?[(Math.floor(e%r)+Math.ceil(t%r))/2,Math.floor(e/r)]:r-t%r<e%r?$f(e-e%r,e,r):$f(t,r*Math.ceil(t/r),r):[r/2,(Math.round(t/r)+Math.round(e/r))/2]})(t,e,r)),h}(a(o[e]/l),a(s[e]/l),d).map(x);let t=A[e].pop();L[e]=t[b]+w(e),$[e]=t[k]+g}return{channels:{polygon:{value:A,source:null,filter:null},["c"+O]:{value:[p,v],source:null,filter:null},["c"+z]:{value:[m,g],source:null,filter:null},[O]:{value:L,scale:null,source:null},[E]:{value:$,scale:null,source:r[E]},[R]:{value:$,scale:null,source:r[R]}}}});var e}function $f(t,e,r){var n=Math.floor(e)-Math.floor(t);return 0==n?[Math.floor(t%r)+.5,Math.floor(t/r)+(t+e)/2%1]:1==n?.5<e%1-t%1?[Math.ceil(t%r),Math.floor(e/r)+(t%1+e%1)/2]:1-t%1<e%1?[Math.floor(e%r)+.5,Math.floor(e/r)+e%1/2]:[Math.floor(t%r)+.5,Math.floor(t/r)+(1+t%1)/2]:[Math.ceil(t%r)+Math.ceil(Math.floor(e)-Math.ceil(t))/2,Math.floor(t/r)+(1+t<=e?.5:(t+e)/2%1)]}function Sf(t){if(void 0===t||!1===t)return Number;if(!0===t)return Math.round;if("function"!=typeof t)throw new Error("invalid round: "+t);return t}function zf(t){return void 0===t?void 0:Math.max(1,Math.floor(t))}function Of(t){var[t,e]=G.extent(t);return e-t}function Ef(t){return!0===t?{maxRadius:1/0}:x(t)&&void 0===t.maxRadius?{...t,maxRadius:1/0}:void 0}function Rf(t,e,r,n,i){for(var a=i+1;n<=i;){var l=n+i>>>1,o=t[l];0<=(void 0!==r?r(o,e):o-e)?i=(a=l)-1:n=1+l}return a}function Cf(t,e,r,n,i,a){return"function"==typeof r?a(t,e,r,void 0===n?0:0|n,void 0===i?t.length-1:0|i):a(t,e,void 0,void 0===r?0:0|r,void 0===n?t.length-1:0|n)}var Nf=function(t,e,r,n,i){return Cf(t,e,r,n,i,Rf)};function Tf(t,e,r,n,i){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(r?r.count:0)+n.length}var n=Tf.prototype;function Bf(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function If(t,e){e=Gf(e);t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function Pf(t,e){var r=t.intervals([]);r.push(e),If(t,r)}function Wf(t,e){var r=t.intervals([]),e=r.indexOf(e);return e<0?0:(r.splice(e,1),If(t,r),1)}function jf(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var i=r(t[n]);if(i)return i}}function Ff(t,e,r){for(var n=t.length-1;0<=n&&t[n][1]>=e;--n){var i=r(t[n]);if(i)return i}}function qf(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function Df(t,e){return t-e}function Yf(t,e){return t[0]-e[0]||t[1]-e[1]}function _f(t,e){return t[1]-e[1]||t[0]-e[0]}function Gf(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(Df);for(var n=e[e.length>>1],i=[],a=[],l=[],r=0;r<t.length;++r){var o=t[r];(o[1]<n?i:n<o[0]?a:l).push(o)}var s=l,u=l.slice();return s.sort(Yf),u.sort(_f),new Tf(n,Gf(i),Gf(a),s,u)}function Xf(t){this.root=t}n.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},n.insert=function(t){var e,r=this.count-this.leftPoints.length;this.count+=1,t[1]<this.mid?this.left?4*(this.left.count+1)>3*(1+r)?Pf(this,t):this.left.insert(t):this.left=Gf([t]):t[0]>this.mid?this.right?4*(this.right.count+1)>3*(1+r)?Pf(this,t):this.right.insert(t):this.right=Gf([t]):(r=Nf(this.leftPoints,t,Yf),e=Nf(this.rightPoints,t,_f),this.leftPoints.splice(r,0,t),this.rightPoints.splice(e,0,t))},n.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?Wf(this,t):2===(n=this.left.remove(t))?(this.left=null,--this.count,1):(1===n&&--this.count,n):0;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?Wf(this,t):2===(n=this.right.remove(t))?(this.right=null,--this.count,1):(1===n&&--this.count,n):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r,n,i=this,a=this.left;a.right;)a=(i=a).right;i===this?a.right=this.right:(r=this.left,n=this.right,i.count-=a.count,i.right=a.left,a.left=r,a.right=n),Bf(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Bf(this,this.left):Bf(this,this.right);return 1}for(r=Nf(this.leftPoints,t,Yf);r<this.leftPoints.length&&this.leftPoints[r][0]===t[0];++r)if(this.leftPoints[r]===t)for(--this.count,this.leftPoints.splice(r,1),n=Nf(this.rightPoints,t,_f);n<this.rightPoints.length&&this.rightPoints[n][1]===t[1];++n)if(this.rightPoints[n]===t)return this.rightPoints.splice(n,1),1;return 0},n.queryPoint=function(t,e){var r;return t<this.mid?this.left&&(r=this.left.queryPoint(t,e))?r:jf(this.leftPoints,t,e):t>this.mid?this.right&&(r=this.right.queryPoint(t,e))?r:Ff(this.rightPoints,t,e):qf(this.leftPoints,e)},n.queryInterval=function(t,e,r){var n;return t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r))||e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,r))?n:e<this.mid?jf(this.leftPoints,e,r):t>this.mid?Ff(this.rightPoints,t,r):qf(this.leftPoints,r)};var n=Xf.prototype,Hf=(n.insert=function(t){this.root?this.root.insert(t):this.root=new Tf(t[0],null,null,[t],[t])},n.remove=function(t){return!!this.root&&(2===(t=this.root.remove(t))&&(this.root=null),0!==t)},n.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},n.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(n,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(n,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}}),(n=function(t){return t&&0!==t.length?new Xf(Gf(t)):new Xf(null)})&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n);let Uf=({marginLeft:t})=>[1,t],Vf=({width:t,marginRight:e})=>[-1,t-e],Zf=({width:t,marginLeft:e,marginRight:r})=>[0,(e+t-r)/2],Jf=({marginTop:t})=>[1,t],Qf=({height:t,marginBottom:e})=>[-1,t-e],Kf=({height:t,marginTop:e,marginBottom:r})=>[0,(e+t-r)/2];function th(t){return"string"==typeof t?{anchor:t}:t}function eh(t){let{anchor:e,padding:r,...n}=t,i=n.r;return[{anchor:e,padding:r,r:i},n]}function rh(o,s,v,g,x,t){var e,r,n;return null!=x&&"number"!=typeof x&&({channels:n,sort:e,reverse:r}=t,void 0===(n=we(n))?.r&&(t={...t,channels:{...n,r:{value:x,scale:"r"}}}),void 0===e)&&void 0===r&&(t.sort={channel:"-r"}),Z(t,function(t,r,e,n,i,a){let{[s]:u,r:c}=e;if(!e[s])throw new Error("missing channel: "+s);({[s]:u}=ui(e,n,a));let f=c?void 0:void 0!==x?O(x):void 0!==this.r?this.r:3,[h,l]=(c=c&&_(c.value,n[c.scale]||X,Float64Array),v(i)),d=h?ih:nh,p=new Float64Array(u.length),m=c?t=>c[t]:()=>f;for(var y of r){let o=Hf(),s=(y=y.filter(c?t=>w(u[t])&&M(c[t]):t=>w(u[t])),new Float64Array(2*y.length+2));for(let l of y){let t=m(l),n=h?t+g:0,e=u[l]-t,r=u[l]+t,i=2,a=(o.queryInterval(e-g,r+g,([,,t])=>{var e=p[t]-n,r=u[l]-u[t],t=g+(c?c[l]+c[t]:2*f),t=Math.sqrt(t*t-r*r);s[i++]=e-t,s[i++]=e+t}),s.slice(0,i));t:for(let e of(a=h?a.filter(t=>0<=t):a).sort(d)){for(let t=0;t<i;t+=2)if(s[t]+1e-6<e&&e<s[t+1]-1e-6)continue t;p[l]=e+n;break}o.insert([e,r,l])}}h=h||1;for(let e of r)for(let t of e)p[t]=p[t]*h+l;return{data:t,facets:r,channels:{[o]:{value:p,source:null},[s]:{value:u,source:e[s]},...c&&{r:{value:c,source:e.r}}}}})}function nh(t,e){return Math.abs(t)-Math.abs(e)}function ih(t,e){return t-e}function ah(t){if(void 0===t)return uh;if("function"==typeof t)return lh(Vt(t));if(/^p\d{2}$/i.test(t))return oh(Ot(t));switch((""+t).toLowerCase()){case"deviation":return fh;case"first":return uh;case"last":return ch;case"max":return hh;case"mean":return dh;case"median":return ph;case"min":return mh;case"sum":return yh;case"extent":return sh}throw new Error("invalid basis: "+t)}function lh(t){return{mapIndex(e,r,n){var i=+t(e,r);for(let t of e)n[t]=null===r[t]?NaN:r[t]/i}}}function oh(r){return lh((t,e)=>r(t,t=>e[t]))}let sh={mapIndex(e,r,n){var[i,t]=G.extent(e,t=>r[t]),a=t-i;for(let t of e)n[t]=null===r[t]?NaN:(r[t]-i)/a}},uh=lh((e,r)=>{for(let t=0;t<e.length;++t){var n=r[e[t]];if(y(n))return n}}),ch=lh((e,r)=>{for(let t=e.length-1;0<=t;--t){var n=r[e[t]];if(y(n))return n}}),fh={mapIndex(e,r,n){var i=G.mean(e,t=>r[t]),a=G.deviation(e,t=>r[t]);for(let t of e)n[t]=null===r[t]?NaN:a?(r[t]-i)/a:0}},hh=oh(G.max),dh=oh(G.mean),ph=oh(G.median),mh=oh(G.min),yh=oh(G.sum);function vh(t,r,e={}){let n,i=1;if("number"==typeof r)i=r,n=(t,e)=>+t+e;else{if("string"==typeof r){let t=r.startsWith("-")?-1:1;[r,i]=at(r.replace(/^[+-]/,"")),i*=t}r=ne(r),n=(t,e)=>r.offset(t,e)}let a=t+"1",l=t+"2",o=pu({[a]:t=>t.map(t=>n(t,i)),[l]:t=>t},e),s=o[l].transform;return o[l].transform=()=>{var t=s(),[e,r]=G.extent(t);return t.domain=i<0?[e,n(r,i)]:[n(e,i),r],t},o}function gh(t){return Ah(null,wh,t)}function xh(t){return Ah(null,bh,t)}function*wh(t){yield t[0]}function*bh(t){yield t[t.length-1]}function*kh(t,e){yield G.least(t,t=>e[t])}function*Mh(t,e){yield G.greatest(t,t=>e[t])}function Ah(r,l,t){if(null!=r){if(null==t[r])throw new Error("missing channel: "+r);r=t[r]}let o=Gt(t);return We(t,(t,e)=>{let n=_(t,o),i=_(t,r),a=[];for(let t of e){let r=[];for(let e of n?G.group(t,t=>n[t]).values():[t])for(let t of l(e,i))r.push(t);a.push(r)}return{data:t,facets:a}})}r.prototype.plot=function({marks:t=[],...e}={}){return Po({...e,marks:[...t,this]})},t.Area=Ss,t.Arrow=Is,t.BarX=qs,t.BarY=Ds,t.Cell=Xs,t.Contour=nc,t.Density=Mc,t.Dot=Zs,t.Frame=Ao,t.Geo=Cc,t.Hexgrid=Bc,t.Image=Wc,t.Line=Ks,t.Link=Cs,t.Mark=r,t.Raster=Gu,t.Rect=ho,t.RuleX=La,t.RuleY=$a,t.Text=Na,t.TickX=Cu,t.TickY=Nu,t.Tip=zo,t.Vector=al,t.WaffleX=Mf,t.WaffleY=Af,t.area=zs,t.areaX=Os,t.areaY=Es,t.arrow=function(t,{x:e,x1:r,x2:n,y:i,y1:a,y2:l,...o}={}){return[r,n]=Ts(e,r,n),[a,l]=Ts(i,a,l),new Is(t,{...o,x1:r,x2:n,y1:a,y2:l})},t.auto=function(t,e){var e=nu(t,e),{fx:r,fy:n,x:{zero:i},y:{zero:a},markOptions:l,transformOptions:o,colorMode:s}=e,u=cu[e.markImpl],e=cu[e.transformImpl],r=null!=r||null!=n?Lo({strokeOpacity:.1}):null,n=[i?Sa([0]):null,a?za([0]):null],i=u(t,e?e(o,l):l);return"stroke"===s?K(r,n,i):K(r,i,n)},t.autoSpec=nu,t.axisFx=gl,t.axisFy=yl,t.axisX=vl,t.axisY=ml,t.barX=Ys,t.barY=_s,t.bin=is,t.binX=rs,t.binY=ns,t.bollinger=Ou,t.bollingerX=function(t,{x:e=X,y:r,k:n=zu.k,color:i=zu.color,opacity:a=zu.opacity,fill:l=i,fillOpacity:o=a,stroke:s=i,strokeOpacity:u,strokeWidth:c,...f}={}){return K(W(l)?null:Os(t,pu({x1:Ou({k:-n,...f}),x2:Ou({k:n,...f})},{x1:e,x2:e,y:r,fill:l,fillOpacity:o,...f})),W(s)?null:eu(t,pu({x:Ou(f)},{x:e,y:r,stroke:s,strokeOpacity:u,strokeWidth:c,...f})))},t.bollingerY=function(t,{x:e,y:r=X,k:n=zu.k,color:i=zu.color,opacity:a=zu.opacity,fill:l=i,fillOpacity:o=a,stroke:s=i,strokeOpacity:u,strokeWidth:c,...f}={}){return K(W(l)?null:Es(t,pu({y1:Ou({k:-n,...f}),y2:Ou({k:n,...f})},{x:e,y1:r,y2:r,fill:l,fillOpacity:o,...f})),W(s)?null:ru(t,pu({y:Ou(f)},{x:e,y:r,stroke:s,strokeOpacity:u,strokeWidth:c,...f})))},t.boxX=function(t,{x:e=X,y:r=null,r:n,fill:i="#ccc",fillOpacity:a,stroke:l="currentColor",strokeOpacity:o,strokeWidth:s=2,sort:u,...c}={}){var f=null!=r?Ve:He;return K(za(t,f({x1:Pu,x2:Wu},{x:e,y:r,stroke:l,strokeOpacity:o,...c})),Ys(t,f({x1:"p25",x2:"p75"},{x:e,y:r,fill:i,fillOpacity:a,...c})),Tu(t,f({x:"p50"},{x:e,y:r,stroke:l,strokeOpacity:o,strokeWidth:s,sort:u,...c})),Js(t,pu({x:Iu},{x:e,y:r,z:r,r:n,stroke:l,strokeOpacity:o,...c})))},t.boxY=function(t,{y:e=X,x:r=null,r:n,fill:i="#ccc",fillOpacity:a,stroke:l="currentColor",strokeOpacity:o,strokeWidth:s=2,sort:u,...c}={}){var f=null!=r?Ue:He;return K(Sa(t,f({y1:Pu,y2:Wu},{x:r,y:e,stroke:l,strokeOpacity:o,...c})),_s(t,f({y1:"p25",y2:"p75"},{x:r,y:e,fill:i,fillOpacity:a,...c})),Bu(t,f({y:"p50"},{x:r,y:e,stroke:l,strokeOpacity:o,strokeWidth:s,sort:u,...c})),Js(t,pu({y:Iu},{x:r,y:e,z:r,r:n,stroke:l,strokeOpacity:o,...c})))},t.cell=Hs,t.cellX=function(t,{x:e=b,fill:r,stroke:n,...i}={}){return void 0===r&&void 0===H(n)[0]&&(r=X),new Xs(t,{...i,x:e,fill:r,stroke:n})},t.cellY=function(t,{y:e=b,fill:r,stroke:n,...i}={}){return void 0===r&&void 0===H(n)[0]&&(r=X),new Xs(t,{...i,y:e,fill:r,stroke:n})},t.centroid=Ec,t.circle=function(t,e){return Js(t,{...e,symbol:"circle"})},t.cluster=function(t,e){return bf(t,{...e,treeLayout:G.cluster})},t.column=L,t.contour=function(){return new nc(...Xu("value",...arguments))},t.crosshair=function(t,e){return ac(Xi,t,e)},t.crosshairX=function(t,e={}){return ac(Hi,t,e)},t.crosshairY=function(t,e={}){return ac(Ui,t,e)},t.delaunayLink=function(t,e){return bc(pc,t,e)},t.delaunayMesh=function(t,e){return bc(yc,t,e)},t.density=function(t,{x:e,y:r,...n}={}){return[e,r]=a(e,r),new Mc(t,{...n,x:e,y:r})},t.differenceX=function(t,e){return $c("x",t,e)},t.differenceY=function(t,e){return $c("y",t,e)},t.dodgeX=function(t={},e={}){1===arguments.length&&([t,e]=eh(t));let{anchor:r="left",padding:n=1,r:i=e.r}=th(t);switch((""+r).toLowerCase()){case"left":r=Uf;break;case"right":r=Vf;break;case"middle":r=Zf;break;default:throw new Error("unknown dodge anchor: "+r)}return rh("x","y",r,O(n),i,e)},t.dodgeY=function(t={},e={}){1===arguments.length&&([t,e]=eh(t));let{anchor:r="bottom",padding:n=1,r:i=e.r}=th(t);switch((""+r).toLowerCase()){case"top":r=Jf;break;case"bottom":r=Qf;break;case"middle":r=Kf;break;default:throw new Error("unknown dodge anchor: "+r)}return rh("y","x",r,O(n),i,e)},t.dot=Js,t.dotX=function(t,{x:e=X,...r}={}){return new Zs(t,Ma({...r,x:e}))},t.dotY=function(t,{y:e=X,...r}={}){return new Zs(t,ka({...r,y:e}))},t.filter=function(t,e){return qe(e,De(t))},t.find=function(n){if("function"!=typeof n)throw new Error("invalid test function: "+n);return{reduceIndex:(t,e,{data:r})=>e[t.find(pt(r)?t=>n(r[t],t,r):t=>n(r.get(t),t,r))]}},t.formatIsoDate=xi,t.formatMonth=function(t="en-US",e="short"){let r=yi(t,e);return t=>null==t||isNaN(t=+new Date(Date.UTC(2e3,+t)))?void 0:r.format(t)},t.formatNumber=gi,t.formatWeekday=function(t="en-US",e="short"){let r=vi(t,e);return t=>null==t||isNaN(t=+new Date(Date.UTC(2001,0,+t)))?void 0:r.format(t)},t.frame=Lo,t.geo=Nc,t.geoCentroid=function({geometry:e=X,...t}={}){let r=hi(t=>_(t,e)),n=hi(t=>_(r(t),G.geoCentroid));return{...t,x:{transform:t=>Float64Array.from(n(t),([t])=>t)},y:{transform:t=>Float64Array.from(n(t),([,t])=>t)},geometry:{transform:r}}},t.graticule=function({strokeOpacity:t=.1,...e}={}){return Nc(G.geoGraticule10(),{strokeOpacity:t,...e})},t.gridFx=Al,t.gridFy=kl,t.gridX=Ml,t.gridY=bl,t.group=Ze,t.groupX=Ue,t.groupY=Ve,t.groupZ=He,t.hexagon=function(t,e){return Js(t,{...e,symbol:"hexagon"})},t.hexbin=function(b={fill:"count"},{binWidth:k,...t}={}){let M=t.z;return k=void 0===k?20:O(k),Qe(b=ar(b,t),"fill")&&(t.channels={...t.channels,fill:{value:[]}}),void 0===t.symbol&&(t.symbol="hexagon"),void 0!==t.r||Qe(b,"r")||(t.r=k/2),Z(t,(a,t,e,r,n,i)=>{var{x:l,y:o,z:s,fill:u,stroke:c,symbol:f}=e;if(void 0===l)throw new Error("missing channel: x");if(void 0===o)throw new Error("missing channel: y");({x:l,y:o}=ui(e,r,i));var s=s?s.value:_(a,M),u=u?.value,c=c?.value,f=f?.value,h=cr(b,{z:s,fill:u,stroke:c,symbol:f}),d=s&&[],p=u&&[],m=c&&[],y=f&&[],v=[],g=[],x=[];let w=-1;for(let t of b)t.initialize(a);for(let e of t){let i=[];for(let t of b)t.scope("facet",e);for(let[t,n]of rr(e,h))for(let{index:e,extent:r}of((i,t,e,r,a)=>{var l,o=a*(1.5/Re),s=new Map;for(l of t){var u=e[l],c=r[l];if(!isNaN(u)&&!isNaN(c)){let t=Math.round(c=+c/o),e=Math.round(u=(u-.5)/a-(1&t)/2),r=c-t;1<3*Math.abs(r)&&(f=u-e,(h=u-(u=e+(u<e?-1:1)/2))*h+(c=c-(h=t+(c<t?-1:1)))*c<f*f+r*r)&&(e=u+(1&t?1:-1)/2,t=h);var f,h,c=e+","+t;let n=s.get(c);void 0===n&&(n={index:[],extent:{data:i,x:(e+(1&t)/2)*a+.5,y:t*o+0}},s.set(c,n)),n.index.push(l)}}return s.values()})(a,n,l,o,k)){i.push(++w),g.push(r.x),x.push(r.y),s&&d.push(h===s?t:s[e[0]]),u&&p.push(h===u?t:u[e[0]]),c&&m.push(h===c?t:c[e[0]]),f&&y.push(h===f?t:f[e[0]]);for(let t of b)t.reduce(e,r)}v.push(i)}i=e.x.scale,t=e.y.scale;return{data:a,facets:v,channels:{x:{value:g,source:r[i]?{value:C(g,r[i].invert),scale:i}:null},y:{value:x,source:r[t]?{value:C(x,r[t].invert),scale:t}:null},...s&&{z:{value:d}},...u&&{fill:{value:p,scale:"auto"}},...c&&{stroke:{value:m,scale:"auto"}},...f&&{symbol:{value:y,scale:"auto"}},...Object.fromEntries(b.map(({name:t,output:e})=>[t,{scale:"auto",label:e.label,radius:"r"===t?k/2:void 0,value:e.transform()}]))}}})},t.hexgrid=function(t){return new Bc(t)},t.hull=function(t,e){return bc(vc,t,e)},t.identity=X,t.image=function(t,{x:e,y:r,...n}={}){return void 0===n.frameAnchor&&([e,r]=a(e,r)),new Wc(t,{...n,x:e,y:r})},t.indexOf=b,t.initializer=Z,t.interpolateNearest=Ku,t.interpolateNone=Zu,t.interpolatorBarycentric=Ju,t.interpolatorRandomWalk=tc,t.legend=function(e={}){for(var[r,n]of Yl){var i=e[r];if(qt(i)){var a,l,o=ci(e);let t;return"symbol"===r&&({fill:a,stroke:l=void 0===a&&qt(e.color)?"color":void 0}=e,t={fill:a,stroke:l}),n(zn(r,i,t),_l(o,i,e),t=>qt(e[t])?zn(t,e[t]):null)}}throw new Error("unknown legend type; no scale found")},t.line=tu,t.lineX=eu,t.lineY=ru,t.linearRegressionX=function(t,{y:e=b,x:r=X,stroke:n,fill:i=W(n)?"currentColor":n,...a}={}){return new Xc(t,os({...a,x:r,y:e,fill:i,stroke:n}))},t.linearRegressionY=function(t,{x:e=b,y:r=X,stroke:n,fill:i=W(n)?"currentColor":n,...a}={}){return new Hc(t,ls({...a,x:e,y:r,fill:i,stroke:n}))},t.link=Ns,t.map=pu,t.mapX=hu,t.mapY=du,t.marks=K,t.normalize=ah,t.normalizeX=function(t,e){return 1===arguments.length&&({basis:t,...e}=t),hu(ah(t),e)},t.normalizeY=function(t,e){return 1===arguments.length&&({basis:t,...e}=t),du(ah(t),e)},t.numberInterval=ie,t.plot=Po,t.pointer=Xi,t.pointerX=Hi,t.pointerY=Ui,t.raster=function(){var[t,e]=Xu("fill",...arguments);return new Gu(t,null==t||void 0!==e.fill||void 0!==e.fillOpacity?e:{...e,fill:X})},t.rect=xo,t.rectX=wo,t.rectY=bo,t.reverse=function({sort:t,...e}={}){return{...qe(e,Ye),sort:Yt(t)?t:null}},t.ruleX=Sa,t.ruleY=za,t.scale=function(t={}){let e;for(var r in t)if(V.has(r)&&qt(t[r])){if(void 0!==e)throw new Error("ambiguous scale definition; multiple scales found");e=jn(zn(r,t[r]))}if(void 0===e)throw new Error("invalid scale definition; no scale found");return e},t.select=function(t,e={}){if("string"==typeof t)switch(t.toLowerCase()){case"first":return gh(e);case"last":return xh(e)}if("function"==typeof t)return Ah(null,t,e);let r,n;for(r in t){if(void 0!==n)throw new Error("ambiguous selector; multiple inputs");n=(t=>{if("function"==typeof t)return t;switch((""+t).toLowerCase()){case"min":return kh;case"max":return Mh}throw new Error("unknown selector: "+t)})(t[r])}if(void 0===n)throw new Error("invalid selector: "+t);return Ah(r,n,e)},t.selectFirst=gh,t.selectLast=xh,t.selectMaxX=function(t){return Ah("x",Mh,t)},t.selectMaxY=function(t){return Ah("y",Mh,t)},t.selectMinX=function(t){return Ah("x",kh,t)},t.selectMinY=function(t){return Ah("y",kh,t)},t.shiftX=function(t,e){return vh("x",t,e)},t.shiftY=function(t,e){return vh("y",t,e)},t.shuffle=function({seed:t,sort:e,...r}={}){return{...qe(r,Xe(null==t?Math.random:G.randomLcg(t))),sort:Yt(e)?e:null}},t.sort=_e,t.sphere=function({strokeWidth:t=1.5,...e}={}){return Nc({type:"Sphere"},{strokeWidth:t,...e})},t.spike=function(t,e={}){let{shape:r=nl,stroke:n=el.stroke,strokeWidth:i=1,fill:a=n,fillOpacity:l=.3,anchor:o="start",...s}=e;return ll(t,{...s,shape:r,stroke:n,strokeWidth:i,fill:a,fillOpacity:l,anchor:o})},t.stackX=Vl,t.stackX1=function(t={},e={}){1===arguments.length&&([t,e]=Kl(t));var{y1:r,y:n=r,x:i}=e,[n,i,t]=eo(n,i,"y","x",t,e);return{...n,y1:r,y:i,x:t}},t.stackX2=function(t={},e={}){1===arguments.length&&([t,e]=Kl(t));var{y1:r,y:n=r,x:i}=e,[n,i,,t]=eo(n,i,"y","x",t,e);return{...n,y1:r,y:i,x:t}},t.stackY=Zl,t.stackY1=function(t={},e={}){1===arguments.length&&([t,e]=Kl(t));var{x1:r,x:n=r,y:i}=e,[n,i,t]=eo(n,i,"x","y",t,e);return{...n,x1:r,x:i,y:t}},t.stackY2=function(t={},e={}){1===arguments.length&&([t,e]=Kl(t));var{x1:r,x:n=r,y:i}=e,[n,i,,t]=eo(n,i,"x","y",t,e);return{...n,x1:r,x:i,y:t}},t.text=Ia,t.textX=Pa,t.textY=Wa,t.tickX=Tu,t.tickY=Bu,t.timeInterval=lt,t.tip=Oo,t.transform=We,t.tree=bf,t.treeLink=Jc,t.treeNode=Zc,t.utcInterval=ot,t.valueof=_,t.vector=ll,t.vectorX=ol,t.vectorY=sl,t.version="0.6.16",t.voronoi=function(t,{x:e,y:r,initializer:n,...i}={}){return bc(gc,t,{...We({...i,x:e,y:r},Ul),initializer:n})},t.voronoiMesh=function(t,e){return bc(xc,t,e)},t.waffleX=function(t,{tip:e,...r}={}){return Ft(r)||(r={...r,y:b,x2:X}),new Mf(t,{tip:Ef(e),...Jl(wa(Xl(r)))})},t.waffleY=function(t,{tip:e,...r}={}){return Ft(r)||(r={...r,x:b,y2:X}),new Af(t,{tip:Ef(e),...Ql(ba(Hl(r)))})},t.window=vu,t.windowX=function(t={},e){return 1===arguments.length&&(e=t),hu(vu(t),e)},t.windowY=function(t={},e){return 1===arguments.length&&(e=t),du(vu(t),e)}});